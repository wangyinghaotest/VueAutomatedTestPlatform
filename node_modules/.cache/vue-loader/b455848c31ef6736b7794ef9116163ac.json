{"remainingRequest":"D:\\VUE\\VueAutomatedTestPlatform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\VUE\\VueAutomatedTestPlatform\\src\\components\\page\\apiTask\\ApiTask.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\VUE\\VueAutomatedTestPlatform\\src\\components\\page\\apiTask\\ApiTask.vue","mtime":1632633660566},{"path":"D:\\VUE\\VueAutomatedTestPlatform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\VUE\\VueAutomatedTestPlatform\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\VUE\\VueAutomatedTestPlatform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\VUE\\VueAutomatedTestPlatform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7IGdldEFwaVRlc3RUYXNrUmVxdWVzdCwgZGVsZXRlU2luZ2xlQXBpVGVzdFRhc2tSZXF1ZXN0LCBwb3N0UGVyZm9ybUFwaVRhc2tSZXF1ZXN0IH0gZnJvbSAnLi4vLi4vLi4vYXBpL2FwaVRlc3RUYXNrJzsNCmltcG9ydCBhZGRPckVkaXRBcGlUYXNrIGZyb20gJy4vYWRkT3JFZGl0QXBpVGFzayc7DQppbXBvcnQgQXBpVGVzdFRhc2tSZXN1bHQgZnJvbSAnLi9BcGlUZXN0VGFza1Jlc3VsdCc7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0FwaVRhc2snLA0KICBpbmplY3Q6WydyZWxvYWQnXSwNCiAgcHJvcHM6IFsndHlwZScsICdhcGlQcm9qZWN0SWQnXSwNCiAgZGF0YSgpew0KICAgIHJldHVybnsNCg0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIGFwaVRlc3RUYXNrSWQ6ICIiLA0KDQogICAgICBzaG93QWRkT3JFZGl0QXBpVGVzdFRhc2sgOiBmYWxzZSwNCg0KICAgICAgc2hvd0FwaVRlc3RUYXNrUmVzdWx0OiBmYWxzZSwNCg0KICAgICAgb3BzVHlwZTogImFkZCIsDQoNCiAgICAgIC8v5b2T5YmNYXBpVGVzdFRhc2tJZA0KICAgICAgY3VycmVudEFwaVRlc3RUYXNrSWQ6IDAsDQoNCiAgICAgIC8v5b2T5YmNIGFwaVRlc3RDYXNl5pWw5o2uDQogICAgICBjdXJyZW50QXBpVGVzdFRhc2tEYXRhOiB7fSwNCiAgICAgIHByb2plY3RJZDoiIg0KDQoNCg0KDQoNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6ew0KDQogICAgLy/ojrflj5bor6Xpobnnm67kuIvnmoTmiYDmnIlBcGnmtYvor5Xku7vliqHliJfooagNCiAgICBnZXRBcGlUZXN0VGFza0Z1bigpIHsNCiAgICAgIGdldEFwaVRlc3RUYXNrUmVxdWVzdCh0aGlzLmFwaVByb2plY3RJZCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7DQogICAgICAgIGlmICh0cnVlID09PSBkYXRhLmRhdGEuc3VjY2Vzcykgew0KICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gZGF0YS5kYXRhLmRhdGE7DQoNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oIuiOt+WPluaOpeWPo+Wksei0pSIpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCg0KDQoNCiAgICAvLyDmt7vliqDmtYvor5Xku7vliqENCiAgICBvcGVuQWRkQXBpVGVzdFRhc2soKXsNCiAgICAgIHRoaXMub3BzVHlwZSA9ICdhZGQnOw0KICAgICAgdGhpcy5jdXJyZW50QXBpVGVzdFRhc2tJZCA9IDA7DQogICAgICB0aGlzLmN1cnJlbnRBcGlUZXN0VGFza0RhdGEgPSB7fTsNCg0KICAgICAgdGhpcy5zaG93QWRkT3JFZGl0QXBpVGVzdFRhc2sgPSB0cnVlDQoNCg0KICAgIH0sDQoNCiAgICAvLyDnvJbovpFBUEnmtYvor5Xku7vliqENCiAgICBvcGVuRWRpdEFwaVRlc3RUYXNrKGRhdGEpew0KICAgICAgdGhpcy5vcHNUeXBlID0gJ2VkaXQnOw0KICAgICAgdGhpcy5jdXJyZW50QXBpVGVzdFRhc2tJZCA9IGRhdGEuaWQ7DQogICAgICB0aGlzLmN1cnJlbnRBcGlUZXN0VGFza0RhdGEgPSBkYXRhOw0KICAgICAgY29uc29sZS5sb2coZGF0YSkNCg0KICAgICAgdGhpcy5zaG93QWRkT3JFZGl0QXBpVGVzdFRhc2sgPSB0cnVlOw0KDQoNCg0KICAgIH0sDQoNCiAgICAvL+WIoOmZpOWNleS4qkFQSea1i+ivleS7u+WKoQ0KICAgIGRlbGV0ZUFwaVRlc3RUYXNrKGRhdGEpew0KICAgICAgdGhpcy5hcGlUZXN0VGFza0lkID0gZGF0YS5pZA0KICAgICAgZGVsZXRlU2luZ2xlQXBpVGVzdFRhc2tSZXF1ZXN0KHRoaXMuYXBpVGVzdFRhc2tJZCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZGF0YSkNCiAgICAgICAgaWYgKHRydWUgPT09IGRhdGEuZGF0YS5zdWNjZXNzKXsNCiAgICAgICAgICB0aGlzLmdldEFwaVRlc3RUYXNrRnVuKCkNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpEFQSea1i+ivleS7u+WKoeaIkOWKnyIpDQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5pbmZvKCLliKDpmaRBUEnmtYvor5Xku7vliqHlpLHotKUiKQ0KICAgICAgICB9DQogICAgICB9KQ0KDQogICAgfSwNCg0KICAgIC8v5L+d5a2Y5rWL6K+V5Lu75YqhDQogICAgc2F2ZUFwaVRlc3RUYXNrKCl7DQogICAgICB0aGlzLnNob3dBZGRPckVkaXRBcGlUZXN0VGFzayA9IGZhbHNlDQogICAgICB0aGlzLmdldEFwaVRlc3RUYXNrRnVuKCkNCg0KDQogICAgfSwNCg0KICAgIC8vIOWPlua2iOS/neWtmOa1i+ivleS7u+WKoQ0KICAgIGNhbmNlbFNhdmVBcGlUZXN0VGFzaygpew0KICAgICAgdGhpcy5zaG93QWRkT3JFZGl0QXBpVGVzdFRhc2sgPSBmYWxzZQ0KICAgICAgdGhpcy5nZXRBcGlUZXN0VGFza0Z1bigpDQoNCiAgICB9LA0KDQogICAgLy8g5omn6KGM5rWL6K+V5Lu75YqhDQogICAgcGVyZm9ybUFwaVRlc3RUYXNrKGRhdGEpew0KDQogICAgICB0aGlzLmFwaVRlc3RUYXNrSWQgPSBkYXRhLmlkDQogICAgICBwb3N0UGVyZm9ybUFwaVRhc2tSZXF1ZXN0KHRoaXMuYXBpVGVzdFRhc2tJZCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZGF0YSkNCiAgICAgICAgaWYgKHRydWUgPT09IGRhdGEuZGF0YS5zdWNjZXNzKXsNCiAgICAgICAgICB0aGlzLmdldEFwaVRlc3RUYXNrRnVuKCkNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuaJp+ihjOa1i+ivleS7u+WKoeaIkOWKnyIpDQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZigxMDIwMCA9PT0gZGF0YS5kYXRhLmVycm9yLmNvZGUuc3RhdHVzKXsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlvZPliY3mnIlBUEnku7vliqHmraPlnKjmiafooYzvvIEiKQ0KDQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5omn6KGMQVBJ5rWL6K+V5Lu75Yqh5aSx6LSlIikNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KDQogICAgLy8g5p+l55yL5Lu75Yqh5oql5ZGKDQogICAgcmVwb3J0QXBpVGVzdFRhc2soZGF0YSl7DQogICAgICB0aGlzLmN1cnJlbnRBcGlUZXN0VGFza0lkID0gZGF0YS5pZDsNCiAgICAgIHRoaXMuY3VycmVudEFwaVRlc3RUYXNrRGF0YSA9IGRhdGE7DQogICAgICBjb25zb2xlLmxvZyhkYXRhKQ0KICAgICAgdGhpcy5zaG93QXBpVGVzdFRhc2tSZXN1bHQgPSB0cnVlDQoNCiAgICB9LA0KDQogICAgLy8g6L+U5Zue6aG555uu5YiX6KGoDQogICAgcmV0dXJuUHJvamVjdExpc3QoKXsNCiAgICAgIHRoaXMuJHBhcmVudC5yZXR1cm5Qcm9qZWN0KCk7DQoNCiAgICB9LA0KDQogICAgLy8g6L+U5Zue6aG555uu5YiX6KGoDQogICAgcmV0dXJuQVBJVGFza0xpc3QoKXsNCiAgICAgIHRoaXMuc2hvd0FwaVRlc3RUYXNrUmVzdWx0ID0gZmFsc2UNCiAgICAgIHRoaXMuZ2V0QXBpVGVzdFRhc2tGdW4oKQ0KICAgIH0NCg0KDQogIH0sDQogIGNvbXBvbmVudHM6IHsNCiAgICAnYWRkLW9yLWVkaXQtYXBpLXRhc2snOiBhZGRPckVkaXRBcGlUYXNrLA0KICAgICdhcGktdGVzdC10YXNrLXJlc3VsdCc6IEFwaVRlc3RUYXNrUmVzdWx0DQoNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICBpZiAoJ2VudGVyJz09PSB0aGlzLnR5cGUpew0KICAgICAgdGhpcy5wcm9qZWN0SWQgPSB0aGlzLmFwaVByb2plY3RJZA0KICAgICAgdGhpcy5nZXRBcGlUZXN0VGFza0Z1bigpDQoNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["ApiTask.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;AAMA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"ApiTask.vue","sourceRoot":"src/components/page/apiTask","sourcesContent":["<template>\r\n  <div>\r\n\r\n    <add-or-edit-api-task\r\n        :type=\"opsType\"\r\n        :apiProjectId=\"currentApiTestTaskId\"\r\n        :apiTestTaskData=\"currentApiTestTaskData\"\r\n        :projectId = \"projectId\"\r\n        @saveApiTestTask=\"saveApiTestTask\"\r\n        @cancelSaveApiTestTask=\"cancelSaveApiTestTask\"\r\n        v-if=\"showAddOrEditApiTestTask\">\r\n\r\n    </add-or-edit-api-task>\r\n\r\n    <api-test-task-result\r\n        :apiTestTaskId=\"currentApiTestTaskId\"\r\n        :apiTestTaskData=\"currentApiTestTaskData\"\r\n        v-else-if=\"showApiTestTaskResult\">\r\n    </api-test-task-result>\r\n\r\n    <div v-else>\r\n      <div class=\"crumbs\">\r\n        <el-breadcrumb separator=\"/\">\r\n          <el-breadcrumb-item>\r\n            <i class=\"el-icon-lx-calendar\"></i> API任务管理\r\n          </el-breadcrumb-item>\r\n          <el-breadcrumb-item>API项目</el-breadcrumb-item>\r\n          <el-breadcrumb-item>API任务</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n      </div>\r\n      <el-row>\r\n        <el-button @click=\"returnProjectList\">返回</el-button>\r\n        <el-button type=\"primary\" @click=\"openAddApiTestTask\" >创建API测试任务</el-button>\r\n        <el-button @click=\"getApiTestTaskFun\" >刷新</el-button>\r\n      </el-row>\r\n      <div>\r\n        <el-table\r\n            :data=\"tableData\"\r\n            style=\"width: 100%\">\r\n          <!--                    :default-sort = \"{prop: 'date', order: 'descending'}\">-->\r\n          <el-table-column\r\n              prop=\"id\"\r\n              label=\"id\"\r\n              sortable\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"api_project_name\"\r\n              label=\"项目\"\r\n              sortable\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"api_test_task_name\"\r\n              label=\"任务名称\"\r\n              sortable\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"status\"\r\n              label=\"状态\"\r\n              sortable\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"describe\"\r\n              label=\"描述\"\r\n              sortable\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"updata_time\"\r\n              label=\"更新时间\"\r\n              width=\"180\">\r\n          </el-table-column>\r\n\r\n          <el-table-column\r\n              prop=\"create_time\"\r\n              label=\"创建时间\"\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                  size=\"mini\"\r\n                  @click=\"openEditApiTestTask(scope.row)\">编辑</el-button>\r\n              <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  @click=\"deleteApiTestTask(scope.row)\">删除</el-button>\r\n              <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  @click=\"performApiTestTask(scope.row)\">执行</el-button>\r\n              <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  @click=\"reportApiTestTask(scope.row)\">查看报告</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport { getApiTestTaskRequest, deleteSingleApiTestTaskRequest, postPerformApiTaskRequest } from '../../../api/apiTestTask';\r\nimport addOrEditApiTask from './addOrEditApiTask';\r\nimport ApiTestTaskResult from './ApiTestTaskResult';\r\n\r\nexport default {\r\n  name: 'ApiTask',\r\n  inject:['reload'],\r\n  props: ['type', 'apiProjectId'],\r\n  data(){\r\n    return{\r\n\r\n      tableData: [],\r\n      apiTestTaskId: \"\",\r\n\r\n      showAddOrEditApiTestTask : false,\r\n\r\n      showApiTestTaskResult: false,\r\n\r\n      opsType: \"add\",\r\n\r\n      //当前apiTestTaskId\r\n      currentApiTestTaskId: 0,\r\n\r\n      //当前 apiTestCase数据\r\n      currentApiTestTaskData: {},\r\n      projectId:\"\"\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n  },\r\n  methods:{\r\n\r\n    //获取该项目下的所有Api测试任务列表\r\n    getApiTestTaskFun() {\r\n      getApiTestTaskRequest(this.apiProjectId).then(data => {\r\n        console.log(data);\r\n        if (true === data.data.success) {\r\n          this.tableData = data.data.data;\r\n\r\n        } else {\r\n          this.$message.info(\"获取接口失败\")\r\n        }\r\n      })\r\n    },\r\n\r\n\r\n\r\n    // 添加测试任务\r\n    openAddApiTestTask(){\r\n      this.opsType = 'add';\r\n      this.currentApiTestTaskId = 0;\r\n      this.currentApiTestTaskData = {};\r\n\r\n      this.showAddOrEditApiTestTask = true\r\n\r\n\r\n    },\r\n\r\n    // 编辑API测试任务\r\n    openEditApiTestTask(data){\r\n      this.opsType = 'edit';\r\n      this.currentApiTestTaskId = data.id;\r\n      this.currentApiTestTaskData = data;\r\n      console.log(data)\r\n\r\n      this.showAddOrEditApiTestTask = true;\r\n\r\n\r\n\r\n    },\r\n\r\n    //删除单个API测试任务\r\n    deleteApiTestTask(data){\r\n      this.apiTestTaskId = data.id\r\n      deleteSingleApiTestTaskRequest(this.apiTestTaskId).then(data => {\r\n        console.log(data)\r\n        if (true === data.data.success){\r\n          this.getApiTestTaskFun()\r\n          this.$message.success(\"删除API测试任务成功\")\r\n        }\r\n        else {\r\n          this.$message.info(\"删除API测试任务失败\")\r\n        }\r\n      })\r\n\r\n    },\r\n\r\n    //保存测试任务\r\n    saveApiTestTask(){\r\n      this.showAddOrEditApiTestTask = false\r\n      this.getApiTestTaskFun()\r\n\r\n\r\n    },\r\n\r\n    // 取消保存测试任务\r\n    cancelSaveApiTestTask(){\r\n      this.showAddOrEditApiTestTask = false\r\n      this.getApiTestTaskFun()\r\n\r\n    },\r\n\r\n    // 执行测试任务\r\n    performApiTestTask(data){\r\n\r\n      this.apiTestTaskId = data.id\r\n      postPerformApiTaskRequest(this.apiTestTaskId).then(data => {\r\n        console.log(data)\r\n        if (true === data.data.success){\r\n          this.getApiTestTaskFun()\r\n          this.$message.success(\"执行测试任务成功\")\r\n        }\r\n        else if(10200 === data.data.error.code.status){\r\n          this.$message.error(\"当前有API任务正在执行！\")\r\n\r\n        }\r\n        else {\r\n          this.$message.error(\"执行API测试任务失败\")\r\n        }\r\n      })\r\n    },\r\n\r\n    // 查看任务报告\r\n    reportApiTestTask(data){\r\n      this.currentApiTestTaskId = data.id;\r\n      this.currentApiTestTaskData = data;\r\n      console.log(data)\r\n      this.showApiTestTaskResult = true\r\n\r\n    },\r\n\r\n    // 返回项目列表\r\n    returnProjectList(){\r\n      this.$parent.returnProject();\r\n\r\n    },\r\n\r\n    // 返回项目列表\r\n    returnAPITaskList(){\r\n      this.showApiTestTaskResult = false\r\n      this.getApiTestTaskFun()\r\n    }\r\n\r\n\r\n  },\r\n  components: {\r\n    'add-or-edit-api-task': addOrEditApiTask,\r\n    'api-test-task-result': ApiTestTaskResult\r\n\r\n  },\r\n  created() {\r\n    if ('enter'=== this.type){\r\n      this.projectId = this.apiProjectId\r\n      this.getApiTestTaskFun()\r\n\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}