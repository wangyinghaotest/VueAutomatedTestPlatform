{"remainingRequest":"E:\\test_platform_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\test_platform_vue\\src\\components\\page\\apiTask\\ApiTask.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\test_platform_vue\\src\\components\\page\\apiTask\\ApiTask.vue","mtime":1640329298594},{"path":"E:\\test_platform_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\test_platform_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\test_platform_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\test_platform_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7IGdldEFwaVRlc3RUYXNrUmVxdWVzdCwgZGVsZXRlU2luZ2xlQXBpVGVzdFRhc2tSZXF1ZXN0LCBwb3N0UGVyZm9ybUFwaVRhc2tSZXF1ZXN0IH0gZnJvbSAnLi4vLi4vLi4vYXBpL2FwaVRlc3RUYXNrJzsNCmltcG9ydCBhZGRPckVkaXRBcGlUYXNrIGZyb20gJy4vYWRkT3JFZGl0QXBpVGFzayc7DQppbXBvcnQgQXBpVGVzdFRhc2tSZXN1bHQgZnJvbSAnLi9BcGlUZXN0VGFza1Jlc3VsdCc7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0FwaVRhc2snLA0KICBpbmplY3Q6WydyZWxvYWQnXSwNCiAgcHJvcHM6IFsndHlwZScsICdhcGlQcm9qZWN0SWQnXSwNCiAgZGF0YSgpew0KICAgIHJldHVybnsNCg0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIGFwaVRlc3RUYXNrSWQ6ICIiLA0KDQogICAgICBzaG93QWRkT3JFZGl0QXBpVGVzdFRhc2sgOiBmYWxzZSwNCg0KICAgICAgc2hvd0FwaVRlc3RUYXNrUmVzdWx0OiBmYWxzZSwNCg0KICAgICAgb3BzVHlwZTogImFkZCIsDQoNCiAgICAgIC8v5b2T5YmNYXBpVGVzdFRhc2tJZA0KICAgICAgY3VycmVudEFwaVRlc3RUYXNrSWQ6IDAsDQoNCiAgICAgIC8v5b2T5YmNIGFwaVRlc3RDYXNl5pWw5o2uDQogICAgICBjdXJyZW50QXBpVGVzdFRhc2tEYXRhOiB7fSwNCiAgICAgIHByb2plY3RJZDoiIg0KDQoNCg0KDQoNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6ew0KDQogICAgLy/ojrflj5bor6Xpobnnm67kuIvnmoTmiYDmnIlBcGnmtYvor5Xku7vliqHliJfooagNCiAgICBnZXRBcGlUZXN0VGFza0Z1bigpIHsNCiAgICAgIGdldEFwaVRlc3RUYXNrUmVxdWVzdCh0aGlzLmFwaVByb2plY3RJZCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7DQogICAgICAgIGlmICh0cnVlID09PSBkYXRhLmRhdGEuc3VjY2Vzcykgew0KICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gZGF0YS5kYXRhLmRhdGE7DQoNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLojrflj5bmjqXlj6PlpLHotKUiKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQoNCg0KDQogICAgLy8g5re75Yqg5rWL6K+V5Lu75YqhDQogICAgb3BlbkFkZEFwaVRlc3RUYXNrKCl7DQogICAgICB0aGlzLm9wc1R5cGUgPSAnYWRkJzsNCiAgICAgIHRoaXMuY3VycmVudEFwaVRlc3RUYXNrSWQgPSAwOw0KICAgICAgdGhpcy5jdXJyZW50QXBpVGVzdFRhc2tEYXRhID0ge307DQoNCiAgICAgIHRoaXMuc2hvd0FkZE9yRWRpdEFwaVRlc3RUYXNrID0gdHJ1ZQ0KDQoNCiAgICB9LA0KDQogICAgLy8g57yW6L6RQVBJ5rWL6K+V5Lu75YqhDQogICAgb3BlbkVkaXRBcGlUZXN0VGFzayhkYXRhKXsNCiAgICAgIHRoaXMub3BzVHlwZSA9ICdlZGl0JzsNCiAgICAgIHRoaXMuY3VycmVudEFwaVRlc3RUYXNrSWQgPSBkYXRhLmlkOw0KICAgICAgdGhpcy5jdXJyZW50QXBpVGVzdFRhc2tEYXRhID0gZGF0YTsNCiAgICAgIGNvbnNvbGUubG9nKGRhdGEpDQoNCiAgICAgIHRoaXMuc2hvd0FkZE9yRWRpdEFwaVRlc3RUYXNrID0gdHJ1ZTsNCg0KDQoNCiAgICB9LA0KDQogICAgLy/liKDpmaTljZXkuKpBUEnmtYvor5Xku7vliqENCiAgICBkZWxldGVBcGlUZXN0VGFzayhkYXRhKXsNCiAgICAgIHRoaXMuYXBpVGVzdFRhc2tJZCA9IGRhdGEuaWQNCiAgICAgIGRlbGV0ZVNpbmdsZUFwaVRlc3RUYXNrUmVxdWVzdCh0aGlzLmFwaVRlc3RUYXNrSWQpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKGRhdGEpDQogICAgICAgIGlmICh0cnVlID09PSBkYXRhLmRhdGEuc3VjY2Vzcyl7DQogICAgICAgICAgdGhpcy5nZXRBcGlUZXN0VGFza0Z1bigpDQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaRBUEnmtYvor5Xku7vliqHmiJDlip8iKQ0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuWIoOmZpEFQSea1i+ivleS7u+WKoeWksei0pSIpDQogICAgICAgIH0NCiAgICAgIH0pDQoNCiAgICB9LA0KDQogICAgLy/kv53lrZjmtYvor5Xku7vliqENCiAgICBzYXZlQXBpVGVzdFRhc2soKXsNCiAgICAgIHRoaXMuc2hvd0FkZE9yRWRpdEFwaVRlc3RUYXNrID0gZmFsc2UNCiAgICAgIHRoaXMuZ2V0QXBpVGVzdFRhc2tGdW4oKQ0KDQoNCiAgICB9LA0KDQogICAgLy8g5Y+W5raI5L+d5a2Y5rWL6K+V5Lu75YqhDQogICAgY2FuY2VsU2F2ZUFwaVRlc3RUYXNrKCl7DQogICAgICB0aGlzLnNob3dBZGRPckVkaXRBcGlUZXN0VGFzayA9IGZhbHNlDQogICAgICB0aGlzLmdldEFwaVRlc3RUYXNrRnVuKCkNCg0KICAgIH0sDQoNCiAgICAvLyDmiafooYzmtYvor5Xku7vliqENCiAgICBwZXJmb3JtQXBpVGVzdFRhc2soZGF0YSl7DQoNCiAgICAgIHRoaXMuYXBpVGVzdFRhc2tJZCA9IGRhdGEuaWQNCiAgICAgIHBvc3RQZXJmb3JtQXBpVGFza1JlcXVlc3QodGhpcy5hcGlUZXN0VGFza0lkKS50aGVuKGRhdGEgPT4gew0KICAgICAgICBjb25zb2xlLmxvZyhkYXRhKQ0KICAgICAgICBpZiAodHJ1ZSA9PT0gZGF0YS5kYXRhLnN1Y2Nlc3Mpew0KICAgICAgICAgIHRoaXMuZ2V0QXBpVGVzdFRhc2tGdW4oKQ0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5omn6KGM5rWL6K+V5Lu75Yqh5oiQ5YqfIikNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmKDEwMjAwID09PSBkYXRhLmRhdGEuZXJyb3IuY29kZS5zdGF0dXMpew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuW9k+WJjeaciUFQSeS7u+WKoeato+WcqOaJp+ihjO+8gSIpDQoNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmiafooYxBUEnmtYvor5Xku7vliqHlpLHotKUiKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQoNCiAgICAvLyDmn6XnnIvku7vliqHmiqXlkYoNCiAgICByZXBvcnRBcGlUZXN0VGFzayhkYXRhKXsNCiAgICAgIHRoaXMuY3VycmVudEFwaVRlc3RUYXNrSWQgPSBkYXRhLmlkOw0KICAgICAgdGhpcy5jdXJyZW50QXBpVGVzdFRhc2tEYXRhID0gZGF0YTsNCiAgICAgIGNvbnNvbGUubG9nKGRhdGEpDQogICAgICB0aGlzLnNob3dBcGlUZXN0VGFza1Jlc3VsdCA9IHRydWUNCg0KICAgIH0sDQoNCiAgICAvLyDov5Tlm57pobnnm67liJfooagNCiAgICByZXR1cm5Qcm9qZWN0TGlzdCgpew0KICAgICAgdGhpcy4kcGFyZW50LnJldHVyblByb2plY3QoKTsNCg0KICAgIH0sDQoNCiAgICAvLyDov5Tlm57pobnnm67liJfooagNCiAgICByZXR1cm5BUElUYXNrTGlzdCgpew0KICAgICAgdGhpcy5zaG93QXBpVGVzdFRhc2tSZXN1bHQgPSBmYWxzZQ0KICAgICAgdGhpcy5nZXRBcGlUZXN0VGFza0Z1bigpDQogICAgfQ0KDQoNCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgICdhZGQtb3ItZWRpdC1hcGktdGFzayc6IGFkZE9yRWRpdEFwaVRhc2ssDQogICAgJ2FwaS10ZXN0LXRhc2stcmVzdWx0JzogQXBpVGVzdFRhc2tSZXN1bHQNCg0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGlmICgnZW50ZXInPT09IHRoaXMudHlwZSl7DQogICAgICB0aGlzLnByb2plY3RJZCA9IHRoaXMuYXBpUHJvamVjdElkDQogICAgICB0aGlzLmdldEFwaVRlc3RUYXNrRnVuKCkNCg0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["ApiTask.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;AAMA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"ApiTask.vue","sourceRoot":"src/components/page/apiTask","sourcesContent":["<template>\r\n  <div>\r\n\r\n    <add-or-edit-api-task\r\n        :type=\"opsType\"\r\n        :apiProjectId=\"currentApiTestTaskId\"\r\n        :apiTestTaskData=\"currentApiTestTaskData\"\r\n        :projectId = \"projectId\"\r\n        @saveApiTestTask=\"saveApiTestTask\"\r\n        @cancelSaveApiTestTask=\"cancelSaveApiTestTask\"\r\n        v-if=\"showAddOrEditApiTestTask\">\r\n\r\n    </add-or-edit-api-task>\r\n\r\n    <api-test-task-result\r\n        :apiTestTaskId=\"currentApiTestTaskId\"\r\n        :apiTestTaskData=\"currentApiTestTaskData\"\r\n        v-else-if=\"showApiTestTaskResult\">\r\n    </api-test-task-result>\r\n\r\n    <div v-else>\r\n      <div class=\"crumbs\">\r\n        <el-breadcrumb separator=\"/\">\r\n          <el-breadcrumb-item>\r\n            <i class=\"el-icon-lx-calendar\"></i> API任务管理\r\n          </el-breadcrumb-item>\r\n          <el-breadcrumb-item>API项目</el-breadcrumb-item>\r\n          <el-breadcrumb-item>API任务</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n      </div>\r\n      <el-row>\r\n        <el-button @click=\"returnProjectList\">返回</el-button>\r\n        <el-button type=\"primary\" @click=\"openAddApiTestTask\" >创建API测试任务</el-button>\r\n        <el-button @click=\"getApiTestTaskFun\" >刷新</el-button>\r\n      </el-row>\r\n      <div>\r\n        <el-table\r\n            :data=\"tableData\"\r\n            style=\"width: 100%\">\r\n          <!--                    :default-sort = \"{prop: 'date', order: 'descending'}\">-->\r\n          <el-table-column\r\n              prop=\"id\"\r\n              label=\"id\"\r\n              sortable\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"api_project_name\"\r\n              label=\"项目\"\r\n              sortable\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"api_test_task_name\"\r\n              label=\"任务名称\"\r\n              sortable\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"status\"\r\n              label=\"状态\"\r\n              sortable\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"describe\"\r\n              label=\"描述\"\r\n              sortable\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"updata_time\"\r\n              label=\"更新时间\"\r\n              width=\"180\">\r\n          </el-table-column>\r\n\r\n          <el-table-column\r\n              prop=\"create_time\"\r\n              label=\"创建时间\"\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                  size=\"mini\"\r\n                  @click=\"openEditApiTestTask(scope.row)\">编辑</el-button>\r\n              <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  @click=\"deleteApiTestTask(scope.row)\">删除</el-button>\r\n              <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  @click=\"performApiTestTask(scope.row)\">执行</el-button>\r\n              <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  @click=\"reportApiTestTask(scope.row)\">查看报告</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport { getApiTestTaskRequest, deleteSingleApiTestTaskRequest, postPerformApiTaskRequest } from '../../../api/apiTestTask';\r\nimport addOrEditApiTask from './addOrEditApiTask';\r\nimport ApiTestTaskResult from './ApiTestTaskResult';\r\n\r\nexport default {\r\n  name: 'ApiTask',\r\n  inject:['reload'],\r\n  props: ['type', 'apiProjectId'],\r\n  data(){\r\n    return{\r\n\r\n      tableData: [],\r\n      apiTestTaskId: \"\",\r\n\r\n      showAddOrEditApiTestTask : false,\r\n\r\n      showApiTestTaskResult: false,\r\n\r\n      opsType: \"add\",\r\n\r\n      //当前apiTestTaskId\r\n      currentApiTestTaskId: 0,\r\n\r\n      //当前 apiTestCase数据\r\n      currentApiTestTaskData: {},\r\n      projectId:\"\"\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n  },\r\n  methods:{\r\n\r\n    //获取该项目下的所有Api测试任务列表\r\n    getApiTestTaskFun() {\r\n      getApiTestTaskRequest(this.apiProjectId).then(data => {\r\n        console.log(data);\r\n        if (true === data.data.success) {\r\n          this.tableData = data.data.data;\r\n\r\n        } else {\r\n          this.$message.error(\"获取接口失败\")\r\n        }\r\n      })\r\n    },\r\n\r\n\r\n\r\n    // 添加测试任务\r\n    openAddApiTestTask(){\r\n      this.opsType = 'add';\r\n      this.currentApiTestTaskId = 0;\r\n      this.currentApiTestTaskData = {};\r\n\r\n      this.showAddOrEditApiTestTask = true\r\n\r\n\r\n    },\r\n\r\n    // 编辑API测试任务\r\n    openEditApiTestTask(data){\r\n      this.opsType = 'edit';\r\n      this.currentApiTestTaskId = data.id;\r\n      this.currentApiTestTaskData = data;\r\n      console.log(data)\r\n\r\n      this.showAddOrEditApiTestTask = true;\r\n\r\n\r\n\r\n    },\r\n\r\n    //删除单个API测试任务\r\n    deleteApiTestTask(data){\r\n      this.apiTestTaskId = data.id\r\n      deleteSingleApiTestTaskRequest(this.apiTestTaskId).then(data => {\r\n        console.log(data)\r\n        if (true === data.data.success){\r\n          this.getApiTestTaskFun()\r\n          this.$message.success(\"删除API测试任务成功\")\r\n        }\r\n        else {\r\n          this.$message.error(\"删除API测试任务失败\")\r\n        }\r\n      })\r\n\r\n    },\r\n\r\n    //保存测试任务\r\n    saveApiTestTask(){\r\n      this.showAddOrEditApiTestTask = false\r\n      this.getApiTestTaskFun()\r\n\r\n\r\n    },\r\n\r\n    // 取消保存测试任务\r\n    cancelSaveApiTestTask(){\r\n      this.showAddOrEditApiTestTask = false\r\n      this.getApiTestTaskFun()\r\n\r\n    },\r\n\r\n    // 执行测试任务\r\n    performApiTestTask(data){\r\n\r\n      this.apiTestTaskId = data.id\r\n      postPerformApiTaskRequest(this.apiTestTaskId).then(data => {\r\n        console.log(data)\r\n        if (true === data.data.success){\r\n          this.getApiTestTaskFun()\r\n          this.$message.success(\"执行测试任务成功\")\r\n        }\r\n        else if(10200 === data.data.error.code.status){\r\n          this.$message.error(\"当前有API任务正在执行！\")\r\n\r\n        }\r\n        else {\r\n          this.$message.error(\"执行API测试任务失败\")\r\n        }\r\n      })\r\n    },\r\n\r\n    // 查看任务报告\r\n    reportApiTestTask(data){\r\n      this.currentApiTestTaskId = data.id;\r\n      this.currentApiTestTaskData = data;\r\n      console.log(data)\r\n      this.showApiTestTaskResult = true\r\n\r\n    },\r\n\r\n    // 返回项目列表\r\n    returnProjectList(){\r\n      this.$parent.returnProject();\r\n\r\n    },\r\n\r\n    // 返回项目列表\r\n    returnAPITaskList(){\r\n      this.showApiTestTaskResult = false\r\n      this.getApiTestTaskFun()\r\n    }\r\n\r\n\r\n  },\r\n  components: {\r\n    'add-or-edit-api-task': addOrEditApiTask,\r\n    'api-test-task-result': ApiTestTaskResult\r\n\r\n  },\r\n  created() {\r\n    if ('enter'=== this.type){\r\n      this.projectId = this.apiProjectId\r\n      this.getApiTestTaskFun()\r\n\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}