{"remainingRequest":"E:\\test-platform-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\test-platform-vue\\src\\components\\page\\uiAutomation\\uiPageElement\\UiPageElement.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\test-platform-vue\\src\\components\\page\\uiAutomation\\uiPageElement\\UiPageElement.vue","mtime":1652877133463},{"path":"E:\\test-platform-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652877126456},{"path":"E:\\test-platform-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1652877125945},{"path":"E:\\test-platform-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652877126456},{"path":"E:\\test-platform-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1652877132787}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICAgIGdldFNpbmdsZVVpUGFnZUVsZW1lbnRSZXF1ZXN0LA0KICAgIGdldFVpUGFnZUVsZW1lbnRSZXF1ZXN0LA0KICAgIGRlbGV0ZVNpbmdsZVVpUGFnZUVsZW1lbnRSZXF1ZXN0LA0KICAgIHVwZGF0ZVNpbmdsZVVpUGFnZUVsZW1lbnRSZXF1ZXN0LA0KICAgIGFkZFVpUGFnZUVsZW1lbnRSZXF1ZXN0DQp9IGZyb20gJy4uLy4uLy4uLy4uL2FwaS91aUF1dG9tYXRpb24vdWlQYWdlRWxlbWVudCc7DQoNCmltcG9ydCBhZGRPckVkaXRQYWdlRWxlbWVudCBmcm9tICcuL2FkZE9yRWRpdFBhZ2VFbGVtZW50JzsNCmltcG9ydCB7IGdldFNpbmdsZVVpUHJvamVjdFBhZ2VSZXF1ZXN0IH0gZnJvbSAnLi4vLi4vLi4vLi4vYXBpL3VpQXV0b21hdGlvbi91aVBhZ2UnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogJ1VpUGFnZUVsZW1lbnQnLA0KICAgIHByb3BzOiBbJ3R5cGUnLCAndWlQcm9qZWN0SWQnLCAnc2hvd1VpUHJvamVjdFBhZ2UnXSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgICAgICAgIHBhZ2U6IHsNCiAgICAgICAgICAgICAgICBwYWdlOiAxLA0KICAgICAgICAgICAgICAgIHRvdGFsOiAwLA0KICAgICAgICAgICAgICAgIHNpemU6IDEwDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgaW5qZWN0OiBbJ3JlbG9hZCddLA0KICAgICAgICAgICAgcGFnZUVsZW1lbnRJZDogJycsDQogICAgICAgICAgICAvLyBzaG93VWlQcm9qZWN0OiBmYWxzZSwNCg0KICAgICAgICAgICAgc2hvd0FkZE9yRWRpdFBhZ2VFbGVtZW50OiBmYWxzZSwNCg0KICAgICAgICAgICAgb3BzVHlwZTogJ2FkZCcsDQoNCiAgICAgICAgICAgIC8vIOW9k+WJjXVpUGFnZUlkDQogICAgICAgICAgICBjdXJyZW50UGFnZUlkOiAwLA0KDQogICAgICAgICAgICBjdXJyZW50UHJvamVjdElkOiAwLA0KDQogICAgICAgICAgICAvL+W9k+WJjXVpUGFnZUVsZW1lbnTmlbDmja4NCiAgICAgICAgICAgIGN1cnJlbnRVaVBhZ2VFbGVtZW50RGF0YToge30sDQoNCiAgICAgICAgICAgIHJ1bGVzOiB7DQogICAgICAgICAgICAgICAgdWlfcGFnZV9uYW1lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpemhtemdouWQjeensCcsIHRyaWdnZXI6ICdibHVyJyB9XSwNCiAgICAgICAgICAgICAgICB1aV9wYWdlX2Rlc2NyaWJlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpemhtemdouaPj+i/sCcsIHRyaWdnZXI6ICdibHVyJyB9XSwNCiAgICAgICAgICAgICAgICB1aV9wcm9qZWN0X2lkOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqemhueebricsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dDQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgfSwNCg0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgZm9ybWF0dGVyKHJvdywgY29sdW1uKSB7DQogICAgICAgICAgICByZXR1cm4gcm93LmFkZHJlc3M7DQogICAgICAgIH0sDQogICAgICAgIGhhbmRsZUVkaXQoaW5kZXgsIHJvdykgew0KICAgICAgICAgICAgY29uc29sZS5sb2coaW5kZXgsIHJvdyk7DQogICAgICAgIH0sDQogICAgICAgIGhhbmRsZURlbGV0ZShpbmRleCwgcm93KSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhpbmRleCwgcm93KTsNCiAgICAgICAgfSwNCiAgICAgICAgaGFuZGxlU2l6ZUNoYW5nZShzaXplKSB7DQogICAgICAgICAgICB0aGlzLnBhZ2Uuc2l6ZSA9IHNpemU7DQogICAgICAgICAgICB0aGlzLmdldFVpUGFnZUZ1bigpOw0KICAgICAgICB9LA0KICAgICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKGluZGV4KSB7DQogICAgICAgICAgICB0aGlzLnBhZ2UucGFnZSA9IGluZGV4Ow0KICAgICAgICAgICAgdGhpcy5nZXRVaVBhZ2VFbGVtZW50RnVuKCk7DQogICAgICAgIH0sDQoNCiAgICAgICAgLy/ojrflj5bmiYDmnInpobXpnaLlhYPntKDliJfooagNCiAgICAgICAgZ2V0VWlQYWdlRWxlbWVudEZ1bigpIHsNCiAgICAgICAgICAgIGxldCByZXEgPSB7DQogICAgICAgICAgICAgICAgcGFnZTogdGhpcy5wYWdlLnBhZ2UsDQogICAgICAgICAgICAgICAgc2l6ZTogdGhpcy5wYWdlLnNpemUNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBnZXRVaVBhZ2VFbGVtZW50UmVxdWVzdChyZXEpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7DQogICAgICAgICAgICAgICAgaWYgKHRydWUgPT09IGRhdGEuZGF0YS5zdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gZGF0YS5kYXRhLmRhdGE7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W5o6l5Y+j5aSx6LSlJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgb3BlbkFkZFBhZ2VFbGVtZW50KCkgew0KICAgICAgICAgICAgdGhpcy5vcHNUeXBlID0gJ2FkZCc7DQogICAgICAgICAgICB0aGlzLmN1cnJlbnRVaVBhZ2VFbGVtZW50SWQgPSAwOw0KICAgICAgICAgICAgdGhpcy5jdXJyZW50VWlQYWdlRWxlbWVudERhdGEgPSB7fTsNCiAgICAgICAgICAgIHRoaXMuc2hvd0FkZE9yRWRpdFBhZ2VFbGVtZW50ID0gdHJ1ZTsNCiAgICAgICAgfSwNCg0KICAgICAgICBvcGVuRWRpdFBhZ2VFbGVtZW50KGRhdGEpIHsNCiAgICAgICAgICAgIHRoaXMub3BzVHlwZSA9ICdlZGl0JzsNCiAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2VJZCA9IGRhdGEuaWQ7DQogICAgICAgICAgICBjb25zb2xlLmxvZygn6L+Z5piv6aG16Z2iaWQnLCBkYXRhLmlkKTsNCiAgICAgICAgICAgIHRoaXMuY3VycmVudFByb2plY3RJZCA9IHRoaXMucHJvamVjdElkOw0KDQogICAgICAgICAgICB0aGlzLnNob3dBZGRPckVkaXRQYWdlRWxlbWVudCA9IHRydWU7DQogICAgICAgIH0sDQoNCiAgICAgICAgc2F2ZVBhZ2VFbGVtZW50KCkgew0KICAgICAgICAgICAgdGhpcy5zaG93QWRkT3JFZGl0UGFnZUVsZW1lbnQgPSBmYWxzZTsNCiAgICAgICAgfSwNCiAgICAgICAgY2FuY2VsU2F2ZVBhZ2VFbGVtZW50KCkgew0KICAgICAgICAgICAgdGhpcy5zaG93QWRkT3JFZGl0UGFnZUVsZW1lbnQgPSBmYWxzZTsNCiAgICAgICAgfSwNCg0KICAgICAgICAvL+WIoOmZpOWNleS4qumhtemdouWFg+e0oA0KICAgICAgICBkZWxldGVQYWdlRWxlbWVudFBvcHVwKGRhdGEpIHsNCiAgICAgICAgICAgIHRoaXMucGFnZUVsZW1lbnRJZCA9IGRhdGEuaWQ7DQoNCiAgICAgICAgICAgIGRlbGV0ZVNpbmdsZVVpUGFnZUVsZW1lbnRSZXF1ZXN0KHRoaXMucGFnZUVsZW1lbnRJZCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsNCiAgICAgICAgICAgICAgICBpZiAodHJ1ZSA9PT0gZGF0YS5kYXRhLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRVaVBhZ2VFbGVtZW50RnVuKCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk6aG16Z2i5oiQ5YqfJyk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Yig6Zmk6aG16Z2i5aSx6LSlJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgLy/ojrflj5Yg5Y2V5LiqVUnpobnnm67kuK3ljIXlkKvlvpfmiYDmnInpobXpnaINCiAgICAgICAgZ2V0U2luZ2xlVWlQcm9qZWN0UGFnZSgpIHsNCiAgICAgICAgICAgIGdldFNpbmdsZVVpUHJvamVjdFBhZ2VSZXF1ZXN0KHRoaXMucHJvamVjdElkKS50aGVuKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgIGlmICh0cnVlID09PSBkYXRhLmRhdGEuc3VjY2Vzcykgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6L+Z5piv6I635Y+W5pWw5o2uJyk7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEuZGF0YS5kYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSBkYXRhLmRhdGEuZGF0YTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bmjqXlj6PlpLHotKUnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCg0KICAgICAgICAvLyDov5Tlm57pobnnm67pppbpobXliJfooagNCiAgICAgICAgcmV0dXJuUHJvamVjdExpc3QoKSB7DQoNCiAgICAgICAgICB0aGlzLiRwYXJlbnQucmV0dXJuUHJvamVjdCgpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGNvbXBvbmVudHM6IHsNCiAgICAgICAgJ2FkZC1vci1lZGl0LXBhZ2UtZWxlbWVudCc6IGFkZE9yRWRpdFBhZ2VFbGVtZW50DQoNCiAgICB9LA0KICAgIGNyZWF0ZWQoKSB7DQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMudWlQcm9qZWN0SWQpOw0KICAgICAgICBpZiAoJ2VudGVyJyA9PT0gdGhpcy50eXBlKSB7DQogICAgICAgICAgICB0aGlzLnByb2plY3RJZCA9IHRoaXMudWlQcm9qZWN0SWQ7DQogICAgICAgICAgICB0aGlzLmdldFNpbmdsZVVpUHJvamVjdFBhZ2UoKTsNCiAgICAgICAgfQ0KICAgIH0NCn07DQo="},{"version":3,"sources":["UiPageElement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UiPageElement.vue","sourceRoot":"src/components/page/uiAutomation/uiPageElement","sourcesContent":["<template>\r\n  <div>\r\n    <add-or-edit-page-element\r\n      :type=\"opsType\"\r\n      :uiPageId=\"currentPageId\"\r\n      :uiProjectId=\"currentProjectId\"\r\n      @savePageElement=\"savePageElement\"\r\n      @cancelSavePageElement=\"cancelSavePageElement\"\r\n      v-if=\"showAddOrEditPageElement\"\r\n    ></add-or-edit-page-element>\r\n\r\n\r\n    <div v-else>\r\n      <div class=\"crumbs\">\r\n        <el-breadcrumb separator=\"/\">\r\n          <el-breadcrumb-item>\r\n            <i class=\"el-icon-lx-calendar\"></i> UI项目\r\n          </el-breadcrumb-item>\r\n          <el-breadcrumb-item>UI页面元素管理</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n      </div>\r\n      <el-row>\r\n        <el-button @click=\"returnProjectList\">返回</el-button>\r\n        <el-button type=\"primary\" @click=\"openAddPageElement\">创建页面元素</el-button>\r\n      </el-row>\r\n      <div>\r\n        <el-table :data=\"tableData\" style=\"width: 100%\">\r\n          <el-table-column prop=\"id\" label=\"id\" sortable width=\"180\"></el-table-column>\r\n          <el-table-column prop=\"ui_project_name\" label=\"项目名称\" sortable width=\"180\"></el-table-column>\r\n          <el-table-column prop=\"ui_page_name\" label=\"页面名称\" sortable width=\"180\"></el-table-column>\r\n\r\n          <el-table-column prop=\"updata_time\" label=\"更新时间\" width=\"180\"></el-table-column>\r\n\r\n          <el-table-column prop=\"create_time\" label=\"创建时间\" width=\"180\"></el-table-column>\r\n          <el-table-column label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button size=\"mini\" @click=\"openEditPageElement(scope.row)\">编辑</el-button>\r\n              <el-button size=\"mini\" type=\"danger\" @click=\"deletePageElementPopup(scope.row)\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <!--                <el-pagination-->\r\n        <!--                        class=\"page-class\"-->\r\n        <!--                        @size-change=\"handleSizeChange\"-->\r\n        <!--                        @current-change=\"handleCurrentChange\"-->\r\n        <!--                        :current-page=\"page.page\"-->\r\n        <!--                        :page-sizes=\"[10, 20, 50, 100]\"-->\r\n        <!--                        :page-size=\"page.size\"-->\r\n        <!--                        layout=\"total, sizes, prev, pager, next, jumper\"-->\r\n        <!--                        :total=\"page.total\">-->\r\n        <!--                </el-pagination>-->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    getSingleUiPageElementRequest,\r\n    getUiPageElementRequest,\r\n    deleteSingleUiPageElementRequest,\r\n    updateSingleUiPageElementRequest,\r\n    addUiPageElementRequest\r\n} from '../../../../api/uiAutomation/uiPageElement';\r\n\r\nimport addOrEditPageElement from './addOrEditPageElement';\r\nimport { getSingleUiProjectPageRequest } from '../../../../api/uiAutomation/uiPage';\r\n\r\nexport default {\r\n    name: 'UiPageElement',\r\n    props: ['type', 'uiProjectId', 'showUiProjectPage'],\r\n    data() {\r\n        return {\r\n            tableData: [],\r\n            page: {\r\n                page: 1,\r\n                total: 0,\r\n                size: 10\r\n            },\r\n            inject: ['reload'],\r\n            pageElementId: '',\r\n            // showUiProject: false,\r\n\r\n            showAddOrEditPageElement: false,\r\n\r\n            opsType: 'add',\r\n\r\n            // 当前uiPageId\r\n            currentPageId: 0,\r\n\r\n            currentProjectId: 0,\r\n\r\n            //当前uiPageElement数据\r\n            currentUiPageElementData: {},\r\n\r\n            rules: {\r\n                ui_page_name: [{ required: true, message: '请输入页面名称', trigger: 'blur' }],\r\n                ui_page_describe: [{ required: true, message: '请输入页面描述', trigger: 'blur' }],\r\n                ui_project_id: [{ required: true, message: '请选择项目', trigger: 'change' }]\r\n            }\r\n        };\r\n    },\r\n\r\n    methods: {\r\n        formatter(row, column) {\r\n            return row.address;\r\n        },\r\n        handleEdit(index, row) {\r\n            console.log(index, row);\r\n        },\r\n        handleDelete(index, row) {\r\n            console.log(index, row);\r\n        },\r\n        handleSizeChange(size) {\r\n            this.page.size = size;\r\n            this.getUiPageFun();\r\n        },\r\n        handleCurrentChange(index) {\r\n            this.page.page = index;\r\n            this.getUiPageElementFun();\r\n        },\r\n\r\n        //获取所有页面元素列表\r\n        getUiPageElementFun() {\r\n            let req = {\r\n                page: this.page.page,\r\n                size: this.page.size\r\n            };\r\n            getUiPageElementRequest(req).then(data => {\r\n                console.log(data);\r\n                if (true === data.data.success) {\r\n                    this.tableData = data.data.data;\r\n                } else {\r\n                    this.$message.error('获取接口失败');\r\n                }\r\n            });\r\n        },\r\n\r\n        openAddPageElement() {\r\n            this.opsType = 'add';\r\n            this.currentUiPageElementId = 0;\r\n            this.currentUiPageElementData = {};\r\n            this.showAddOrEditPageElement = true;\r\n        },\r\n\r\n        openEditPageElement(data) {\r\n            this.opsType = 'edit';\r\n            this.currentPageId = data.id;\r\n            console.log('这是页面id', data.id);\r\n            this.currentProjectId = this.projectId;\r\n\r\n            this.showAddOrEditPageElement = true;\r\n        },\r\n\r\n        savePageElement() {\r\n            this.showAddOrEditPageElement = false;\r\n        },\r\n        cancelSavePageElement() {\r\n            this.showAddOrEditPageElement = false;\r\n        },\r\n\r\n        //删除单个页面元素\r\n        deletePageElementPopup(data) {\r\n            this.pageElementId = data.id;\r\n\r\n            deleteSingleUiPageElementRequest(this.pageElementId).then(data => {\r\n                console.log(data);\r\n                if (true === data.data.success) {\r\n                    this.getUiPageElementFun();\r\n                    this.$message.success('删除页面成功');\r\n                } else {\r\n                    this.$message.error('删除页面失败');\r\n                }\r\n            });\r\n        },\r\n\r\n        //获取 单个UI项目中包含得所有页面\r\n        getSingleUiProjectPage() {\r\n            getSingleUiProjectPageRequest(this.projectId).then(data => {\r\n                if (true === data.data.success) {\r\n                    console.log('这是获取数据');\r\n                    console.log(data.data.data);\r\n                    this.tableData = data.data.data;\r\n                } else {\r\n                    this.$message.error('获取接口失败');\r\n                }\r\n            });\r\n        },\r\n\r\n        // 返回项目首页列表\r\n        returnProjectList() {\r\n\r\n          this.$parent.returnProject();\r\n        }\r\n    },\r\n\r\n    components: {\r\n        'add-or-edit-page-element': addOrEditPageElement\r\n\r\n    },\r\n    created() {\r\n        console.log(this.uiProjectId);\r\n        if ('enter' === this.type) {\r\n            this.projectId = this.uiProjectId;\r\n            this.getSingleUiProjectPage();\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]}]}