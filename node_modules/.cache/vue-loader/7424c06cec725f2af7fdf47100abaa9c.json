{"remainingRequest":"D:\\VueAutomatedTestPlatform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\VueAutomatedTestPlatform\\src\\components\\page\\apiAutomation\\apiTask\\ApiTestTaskResult.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\VueAutomatedTestPlatform\\src\\components\\page\\apiAutomation\\apiTask\\ApiTestTaskResult.vue","mtime":1652877133455},{"path":"D:\\VueAutomatedTestPlatform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652877126456},{"path":"D:\\VueAutomatedTestPlatform\\node_modules\\babel-loader\\lib\\index.js","mtime":1652877125945},{"path":"D:\\VueAutomatedTestPlatform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652877126456},{"path":"D:\\VueAutomatedTestPlatform\\node_modules\\vue-loader\\lib\\index.js","mtime":1652877132787}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2dldEFwaUNhc2VSZXN1bHRSZXF1ZXN0LCBkZWxldGVBcGlDYXNlUmVzdWx0UmVxdWVzdCwgcG9zdFBlcmZvcm1BcGlUYXNrUmVxdWVzdH0gZnJvbSAnLi4vLi4vLi4vLi4vYXBpL2FwaUF1dG9tYXRpb24vYXBpVGVzdFRhc2snOw0KaW1wb3J0IEFQSVRlc3RUYXNrUmVzdWx0RGV0YWlscyBmcm9tICcuL0FQSVRlc3RUYXNrUmVzdWx0RGV0YWlscyc7DQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogJ0FwaVRlc3RUYXNrUmVzdWx0JywNCiAgICBpbmplY3Q6WydyZWxvYWQnXSwNCiAgICBwcm9wczogWydhcGlUZXN0VGFza0RhdGEnLCAnYXBpVGVzdFRhc2tJZCddLA0KICAgIGRhdGEoKXsNCg0KICAgICAgICByZXR1cm57DQoNCiAgICAgICAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICAgICAgICB0ZXN0VGFza0lkOiAiIiwNCiAgICAgICAgICAgIHJlc3VsdF9pZDogIiIsDQogICAgICAgICAgICBhcGlfUmVzdWx0OiAiIiwNCiAgICAgICAgICAgIHNob3dBcGlUZXN0VGFza1Jlc3VsdERldGFpbHM6IGZhbHNlDQoNCg0KICAgICAgICB9DQoNCg0KDQogICAgfSwNCiAgICBtb3VudGVkKCkgew0KICAgICAgICB0aGlzLmdldEFwaUNhc2VSZXN1bHRGdW4oKQ0KDQoNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgZGV0YWlsc1JlcG9ydChkYXRhKXsNCiAgICAgICAgICAgIGNvbnN0IHtocmVmfSA9IHRoaXMuJHJvdXRlci5yZXNvbHZlKHsNCiAgICAgICAgICAgICAgICBwYXRoOiAnL2FwaV90ZXN0X3Rhc2tfcmVzdWx0JywNCiAgICAgICAgICAgICAgICBxdWVyeTogew0KICAgICAgICAgICAgICAgICAgICBhcGlSZXN1bHRJZDpkYXRhLmlkLA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICB3aW5kb3cub3BlbihocmVmLCAnX2JsYW5rJykNCg0KDQogICAgICAgIH0sDQoNCiAgICAgICAgLy8g5omn6KGM5rWL6K+V5Lu75YqhDQogICAgICAgIHBlcmZvcm1BcGlUZXN0VGFzaygpew0KICAgICAgICAgICAgcG9zdFBlcmZvcm1BcGlUYXNrUmVxdWVzdCh0aGlzLnRlc3RUYXNrSWQpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSkNCiAgICAgICAgICAgICAgICBpZiAodHJ1ZSA9PT0gZGF0YS5kYXRhLnN1Y2Nlc3Mpew0KICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmdldEFwaVRlc3RUYXNrRnVuKCkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmiafooYzmtYvor5Xku7vliqHmiJDlip8iKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmKDEwMjAwID09PSBkYXRhLmRhdGEuZXJyb3IuY29kZS5zdGF0dXMpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlvZPliY3mnIlBUEnku7vliqHmraPlnKjmiafooYzvvIEiKQ0KDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmiafooYxBUEnmtYvor5Xku7vliqHlpLHotKUiKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQoNCg0KICAgICAgICAvLyDojrflj5bmtYvor5XmiqXlkYoNCiAgICAgICAgZ2V0QXBpQ2FzZVJlc3VsdEZ1bigpIHsNCiAgICAgICAgICAgIGdldEFwaUNhc2VSZXN1bHRSZXF1ZXN0KHRoaXMudGVzdFRhc2tJZCkudGhlbihkYXRhID0+ew0KICAgICAgICAgICAgICAgIGlmICh0cnVlID09PSBkYXRhLmRhdGEuc3VjY2Vzcyl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gZGF0YS5kYXRhLmRhdGEuZGF0YTsNCg0KICAgICAgICAgICAgICAgIH1lbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5pbmZvKCLojrflj5bmjqXlj6PlpLHotKUiKQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCg0KDQogICAgICAgIGNoZWNrUmVwb3J0KGRhdGEpew0KICAgICAgICAgICAgdGhpcy5zaG93QXBpVGVzdFRhc2tSZXN1bHREZXRhaWxzID0gdHJ1ZQ0KICAgICAgICAgICAgdGhpcy5yZXN1bHRfaWQgPSBkYXRhLmlkDQoNCiAgICAgICAgfSwNCg0KDQogICAgICAgIHJldHVybkFQSVJlcG9ydExpc3QoKXsNCiAgICAgICAgICAgIHRoaXMuc2hvd0FwaVRlc3RUYXNrUmVzdWx0RGV0YWlscyA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLmdldEFwaUNhc2VSZXN1bHRGdW4oKQ0KICAgICAgICB9LA0KDQogICAgICAgIC8vIOWIoOmZpOaKpeWRig0KICAgICAgICBkZWxldGVSZXBvcnQoZGF0YSl7DQogICAgICAgICAgICB0aGlzLnJlc3VsdF9pZCA9IGRhdGEuaWQNCiAgICAgICAgICAgIGRlbGV0ZUFwaUNhc2VSZXN1bHRSZXF1ZXN0KHRoaXMucmVzdWx0X2lkKS50aGVuKGRhdGEgPT57DQogICAgICAgICAgICAgICAgaWYgKHRydWUgPT09IGRhdGEuZGF0YS5zdWNjZXNzKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRBcGlDYXNlUmVzdWx0RnVuKCkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaRBUEnmtYvor5XmiqXlkYrmiJDlip8iKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5Yig6ZmkQVBJ5rWL6K+V5oql5ZGK5aSx6LSlIikNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQoNCiAgICAgICAgLy8g6L+U5Zue5Lu75Yqh5YiX6KGoDQogICAgICAgIHJldHVyblRhc2tMaXN0KCl7DQogICAgICAgICAgICB0aGlzLiRwYXJlbnQucmV0dXJuQVBJVGFza0xpc3QoKTsNCg0KICAgICAgICB9DQoNCg0KDQogICAgfSwNCiAgICBjb21wb25lbnRzOiB7DQogICAgICAgICdhcGktdGVzdC10YXNrLXJlc3VsdF9kZXRhaWxzJzogQVBJVGVzdFRhc2tSZXN1bHREZXRhaWxzDQoNCiAgICB9LA0KICAgIGNyZWF0ZWQoKSB7DQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuYXBpVGVzdFRhc2tEYXRhLmlkKQ0KICAgICAgICB0aGlzLnRlc3RUYXNrSWQgPSB0aGlzLmFwaVRlc3RUYXNrRGF0YS5pZA0KDQogICAgfQ0KDQoNCg0KfTsNCg=="},{"version":3,"sources":["ApiTestTaskResult.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;;;AAIA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;AAIA","file":"ApiTestTaskResult.vue","sourceRoot":"src/components/page/apiAutomation/apiTask","sourcesContent":["<template>\r\n    <div>\r\n        <api-test-task-result_details\r\n            :apiResultId = \"result_id\"\r\n            v-if=\"showApiTestTaskResultDetails\">\r\n        </api-test-task-result_details>\r\n        <div v-else>\r\n            <div class=\"crumbs\">\r\n                <el-breadcrumb separator=\"/\">\r\n                    <el-breadcrumb-item>\r\n                        <i class=\"el-icon-lx-calendar\"></i> API任务管理\r\n                    </el-breadcrumb-item>\r\n                    <el-breadcrumb-item>API项目</el-breadcrumb-item>\r\n                    <el-breadcrumb-item>API任务</el-breadcrumb-item>\r\n                    <el-breadcrumb-item>API测试报告</el-breadcrumb-item>\r\n                </el-breadcrumb>\r\n            </div>\r\n            <el-row>\r\n                <el-button @click=\"returnTaskList\">返回</el-button>\r\n                <el-button type=\"danger\" @click=\"performApiTestTask\">执行</el-button>\r\n            </el-row>\r\n            <div>\r\n                <el-table\r\n                    :data=\"tableData\"\r\n                    style=\"width: 100%\">\r\n                    <!--                    :default-sort = \"{prop: 'date', order: 'descending'}\">-->\r\n                    <el-table-column\r\n                        prop=\"id\"\r\n                        label=\"id\"\r\n                        sortable\r\n                        width=\"180\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"api_test_result_name\"\r\n                        label=\"测试报告名称\"\r\n                        sortable\r\n                        width=\"180\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"api_total_number\"\r\n                        label=\"总数\"\r\n                        sortable\r\n                        width=\"180\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"api_successful_total_number\"\r\n                        label=\"成功\"\r\n                        sortable\r\n                        width=\"180\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"api_error_total_number\"\r\n                        label=\"失败\"\r\n                        sortable\r\n                        width=\"180\">\r\n                    </el-table-column>\r\n\r\n                    <el-table-column label=\"操作\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-button\r\n                                size=\"mini\"\r\n                                type=\"danger\"\r\n                                @click=\"detailsReport(scope.row)\">查看报告</el-button>\r\n<!--                            <el-button-->\r\n<!--                                size=\"mini\"-->\r\n<!--                                type=\"danger\"-->\r\n<!--                                @click=\"checkReport(scope.row)\">查看报告</el-button>-->\r\n                            <el-button\r\n                                size=\"mini\"\r\n                                type=\"danger\"\r\n                                @click=\"deleteReport(scope.row)\">删除</el-button>\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {getApiCaseResultRequest, deleteApiCaseResultRequest, postPerformApiTaskRequest} from '../../../../api/apiAutomation/apiTestTask';\r\nimport APITestTaskResultDetails from './APITestTaskResultDetails';\r\nexport default {\r\n    name: 'ApiTestTaskResult',\r\n    inject:['reload'],\r\n    props: ['apiTestTaskData', 'apiTestTaskId'],\r\n    data(){\r\n\r\n        return{\r\n\r\n            tableData: [],\r\n            testTaskId: \"\",\r\n            result_id: \"\",\r\n            api_Result: \"\",\r\n            showApiTestTaskResultDetails: false\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n    },\r\n    mounted() {\r\n        this.getApiCaseResultFun()\r\n\r\n\r\n    },\r\n    methods: {\r\n        detailsReport(data){\r\n            const {href} = this.$router.resolve({\r\n                path: '/api_test_task_result',\r\n                query: {\r\n                    apiResultId:data.id,\r\n                }\r\n            })\r\n            window.open(href, '_blank')\r\n\r\n\r\n        },\r\n\r\n        // 执行测试任务\r\n        performApiTestTask(){\r\n            postPerformApiTaskRequest(this.testTaskId).then(data => {\r\n                console.log(data)\r\n                if (true === data.data.success){\r\n                    // this.getApiTestTaskFun()\r\n                    this.$message.success(\"执行测试任务成功\")\r\n                }\r\n                else if(10200 === data.data.error.code.status){\r\n                    this.$message.error(\"当前有API任务正在执行！\")\r\n\r\n                }\r\n                else {\r\n                    this.$message.error(\"执行API测试任务失败\")\r\n                }\r\n            })\r\n        },\r\n\r\n\r\n        // 获取测试报告\r\n        getApiCaseResultFun() {\r\n            getApiCaseResultRequest(this.testTaskId).then(data =>{\r\n                if (true === data.data.success){\r\n                    this.tableData = data.data.data.data;\r\n\r\n                }else {\r\n                    this.$message.info(\"获取接口失败\")\r\n                }\r\n\r\n            })\r\n        },\r\n\r\n\r\n        checkReport(data){\r\n            this.showApiTestTaskResultDetails = true\r\n            this.result_id = data.id\r\n\r\n        },\r\n\r\n\r\n        returnAPIReportList(){\r\n            this.showApiTestTaskResultDetails = false\r\n            this.getApiCaseResultFun()\r\n        },\r\n\r\n        // 删除报告\r\n        deleteReport(data){\r\n            this.result_id = data.id\r\n            deleteApiCaseResultRequest(this.result_id).then(data =>{\r\n                if (true === data.data.success){\r\n                    this.getApiCaseResultFun()\r\n                    this.$message.success(\"删除API测试报告成功\")\r\n                }\r\n                else {\r\n                    this.$message.error(\"删除API测试报告失败\")\r\n                }\r\n\r\n            })\r\n        },\r\n\r\n        // 返回任务列表\r\n        returnTaskList(){\r\n            this.$parent.returnAPITaskList();\r\n\r\n        }\r\n\r\n\r\n\r\n    },\r\n    components: {\r\n        'api-test-task-result_details': APITestTaskResultDetails\r\n\r\n    },\r\n    created() {\r\n        console.log(this.apiTestTaskData.id)\r\n        this.testTaskId = this.apiTestTaskData.id\r\n\r\n    }\r\n\r\n\r\n\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}