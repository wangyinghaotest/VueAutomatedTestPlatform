{"remainingRequest":"E:\\test_platform_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\test_platform_vue\\src\\components\\page\\uiPageElement\\UiPageElement.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\test_platform_vue\\src\\components\\page\\uiPageElement\\UiPageElement.vue","mtime":1635232414367},{"path":"E:\\test_platform_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\test_platform_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\test_platform_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\test_platform_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICAgIGdldFNpbmdsZVVpUGFnZUVsZW1lbnRSZXF1ZXN0LA0KICAgIGdldFVpUGFnZUVsZW1lbnRSZXF1ZXN0LA0KICAgIGRlbGV0ZVNpbmdsZVVpUGFnZUVsZW1lbnRSZXF1ZXN0LA0KICAgIHVwZGF0ZVNpbmdsZVVpUGFnZUVsZW1lbnRSZXF1ZXN0LA0KICAgIGFkZFVpUGFnZUVsZW1lbnRSZXF1ZXN0DQp9IGZyb20gJy4uLy4uLy4uL2FwaS91aVBhZ2VFbGVtZW50JzsNCg0KaW1wb3J0IGFkZE9yRWRpdFBhZ2VFbGVtZW50IGZyb20gJy4vYWRkT3JFZGl0UGFnZUVsZW1lbnQnOw0KaW1wb3J0IHsgZ2V0U2luZ2xlVWlQcm9qZWN0UGFnZVJlcXVlc3QgfSBmcm9tICcuLi8uLi8uLi9hcGkvdWlQYWdlJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICdVaVBhZ2VFbGVtZW50JywNCiAgICBwcm9wczogWyd0eXBlJywgJ3VpUHJvamVjdElkJywgJ3Nob3dVaVByb2plY3RQYWdlJ10sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICAgICAgICBwYWdlOiB7DQogICAgICAgICAgICAgICAgcGFnZTogMSwNCiAgICAgICAgICAgICAgICB0b3RhbDogMCwNCiAgICAgICAgICAgICAgICBzaXplOiAxMA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGluamVjdDogWydyZWxvYWQnXSwNCiAgICAgICAgICAgIHBhZ2VFbGVtZW50SWQ6ICcnLA0KICAgICAgICAgICAgLy8gc2hvd1VpUHJvamVjdDogZmFsc2UsDQoNCiAgICAgICAgICAgIHNob3dBZGRPckVkaXRQYWdlRWxlbWVudDogZmFsc2UsDQoNCiAgICAgICAgICAgIG9wc1R5cGU6ICdhZGQnLA0KDQogICAgICAgICAgICAvLyDlvZPliY11aVBhZ2VJZA0KICAgICAgICAgICAgY3VycmVudFBhZ2VJZDogMCwNCg0KICAgICAgICAgICAgY3VycmVudFByb2plY3RJZDogMCwNCg0KICAgICAgICAgICAgLy/lvZPliY11aVBhZ2VFbGVtZW505pWw5o2uDQogICAgICAgICAgICBjdXJyZW50VWlQYWdlRWxlbWVudERhdGE6IHt9LA0KDQogICAgICAgICAgICBydWxlczogew0KICAgICAgICAgICAgICAgIHVpX3BhZ2VfbmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXpobXpnaLlkI3np7AnLCB0cmlnZ2VyOiAnYmx1cicgfV0sDQogICAgICAgICAgICAgICAgdWlfcGFnZV9kZXNjcmliZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXpobXpnaLmj4/ov7AnLCB0cmlnZ2VyOiAnYmx1cicgfV0sDQogICAgICAgICAgICAgICAgdWlfcHJvamVjdF9pZDogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6npobnnm64nLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgIH0sDQoNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGZvcm1hdHRlcihyb3csIGNvbHVtbikgew0KICAgICAgICAgICAgcmV0dXJuIHJvdy5hZGRyZXNzOw0KICAgICAgICB9LA0KICAgICAgICBoYW5kbGVFZGl0KGluZGV4LCByb3cpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGluZGV4LCByb3cpOw0KICAgICAgICB9LA0KICAgICAgICBoYW5kbGVEZWxldGUoaW5kZXgsIHJvdykgew0KICAgICAgICAgICAgY29uc29sZS5sb2coaW5kZXgsIHJvdyk7DQogICAgICAgIH0sDQogICAgICAgIGhhbmRsZVNpemVDaGFuZ2Uoc2l6ZSkgew0KICAgICAgICAgICAgdGhpcy5wYWdlLnNpemUgPSBzaXplOw0KICAgICAgICAgICAgdGhpcy5nZXRVaVBhZ2VGdW4oKTsNCiAgICAgICAgfSwNCiAgICAgICAgaGFuZGxlQ3VycmVudENoYW5nZShpbmRleCkgew0KICAgICAgICAgICAgdGhpcy5wYWdlLnBhZ2UgPSBpbmRleDsNCiAgICAgICAgICAgIHRoaXMuZ2V0VWlQYWdlRWxlbWVudEZ1bigpOw0KICAgICAgICB9LA0KDQogICAgICAgIC8v6I635Y+W5omA5pyJ6aG16Z2i5YWD57Sg5YiX6KGoDQogICAgICAgIGdldFVpUGFnZUVsZW1lbnRGdW4oKSB7DQogICAgICAgICAgICBsZXQgcmVxID0gew0KICAgICAgICAgICAgICAgIHBhZ2U6IHRoaXMucGFnZS5wYWdlLA0KICAgICAgICAgICAgICAgIHNpemU6IHRoaXMucGFnZS5zaXplDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgZ2V0VWlQYWdlRWxlbWVudFJlcXVlc3QocmVxKS50aGVuKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOw0KICAgICAgICAgICAgICAgIGlmICh0cnVlID09PSBkYXRhLmRhdGEuc3VjY2Vzcykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IGRhdGEuZGF0YS5kYXRhOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluaOpeWPo+Wksei0pScpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KDQogICAgICAgIG9wZW5BZGRQYWdlRWxlbWVudCgpIHsNCiAgICAgICAgICAgIHRoaXMub3BzVHlwZSA9ICdhZGQnOw0KICAgICAgICAgICAgdGhpcy5jdXJyZW50VWlQYWdlRWxlbWVudElkID0gMDsNCiAgICAgICAgICAgIHRoaXMuY3VycmVudFVpUGFnZUVsZW1lbnREYXRhID0ge307DQogICAgICAgICAgICB0aGlzLnNob3dBZGRPckVkaXRQYWdlRWxlbWVudCA9IHRydWU7DQogICAgICAgIH0sDQoNCiAgICAgICAgb3BlbkVkaXRQYWdlRWxlbWVudChkYXRhKSB7DQogICAgICAgICAgICB0aGlzLm9wc1R5cGUgPSAnZWRpdCc7DQogICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlSWQgPSBkYXRhLmlkOw0KICAgICAgICAgICAgY29uc29sZS5sb2coJ+i/meaYr+mhtemdomlkJywgZGF0YS5pZCk7DQogICAgICAgICAgICB0aGlzLmN1cnJlbnRQcm9qZWN0SWQgPSB0aGlzLnByb2plY3RJZDsNCg0KICAgICAgICAgICAgdGhpcy5zaG93QWRkT3JFZGl0UGFnZUVsZW1lbnQgPSB0cnVlOw0KICAgICAgICB9LA0KDQogICAgICAgIHNhdmVQYWdlRWxlbWVudCgpIHsNCiAgICAgICAgICAgIHRoaXMuc2hvd0FkZE9yRWRpdFBhZ2VFbGVtZW50ID0gZmFsc2U7DQogICAgICAgIH0sDQogICAgICAgIGNhbmNlbFNhdmVQYWdlRWxlbWVudCgpIHsNCiAgICAgICAgICAgIHRoaXMuc2hvd0FkZE9yRWRpdFBhZ2VFbGVtZW50ID0gZmFsc2U7DQogICAgICAgIH0sDQoNCiAgICAgICAgLy/liKDpmaTljZXkuKrpobXpnaLlhYPntKANCiAgICAgICAgZGVsZXRlUGFnZUVsZW1lbnRQb3B1cChkYXRhKSB7DQogICAgICAgICAgICB0aGlzLnBhZ2VFbGVtZW50SWQgPSBkYXRhLmlkOw0KDQogICAgICAgICAgICBkZWxldGVTaW5nbGVVaVBhZ2VFbGVtZW50UmVxdWVzdCh0aGlzLnBhZ2VFbGVtZW50SWQpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7DQogICAgICAgICAgICAgICAgaWYgKHRydWUgPT09IGRhdGEuZGF0YS5zdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VWlQYWdlRWxlbWVudEZ1bigpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOmhtemdouaIkOWKnycpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOmhtemdouWksei0pScpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KDQogICAgICAgIC8v6I635Y+WIOWNleS4qlVJ6aG555uu5Lit5YyF5ZCr5b6X5omA5pyJ6aG16Z2iDQogICAgICAgIGdldFNpbmdsZVVpUHJvamVjdFBhZ2UoKSB7DQogICAgICAgICAgICBnZXRTaW5nbGVVaVByb2plY3RQYWdlUmVxdWVzdCh0aGlzLnByb2plY3RJZCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgICAgICAgICBpZiAodHJ1ZSA9PT0gZGF0YS5kYXRhLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+i/meaYr+iOt+WPluaVsOaNricpOw0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEuZGF0YSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gZGF0YS5kYXRhLmRhdGE7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W5o6l5Y+j5aSx6LSlJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgLy8g6L+U5Zue6aG555uu6aaW6aG15YiX6KGoDQogICAgICAgIHJldHVyblByb2plY3RMaXN0KCkgew0KDQogICAgICAgICAgdGhpcy4kcGFyZW50LnJldHVyblByb2plY3QoKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBjb21wb25lbnRzOiB7DQogICAgICAgICdhZGQtb3ItZWRpdC1wYWdlLWVsZW1lbnQnOiBhZGRPckVkaXRQYWdlRWxlbWVudA0KDQogICAgfSwNCiAgICBjcmVhdGVkKCkgew0KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnVpUHJvamVjdElkKTsNCiAgICAgICAgaWYgKCdlbnRlcicgPT09IHRoaXMudHlwZSkgew0KICAgICAgICAgICAgdGhpcy5wcm9qZWN0SWQgPSB0aGlzLnVpUHJvamVjdElkOw0KICAgICAgICAgICAgdGhpcy5nZXRTaW5nbGVVaVByb2plY3RQYWdlKCk7DQogICAgICAgIH0NCiAgICB9DQp9Ow0K"},{"version":3,"sources":["UiPageElement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UiPageElement.vue","sourceRoot":"src/components/page/uiPageElement","sourcesContent":["<template>\r\n  <div>\r\n    <add-or-edit-page-element\r\n      :type=\"opsType\"\r\n      :uiPageId=\"currentPageId\"\r\n      :uiProjectId=\"currentProjectId\"\r\n      @savePageElement=\"savePageElement\"\r\n      @cancelSavePageElement=\"cancelSavePageElement\"\r\n      v-if=\"showAddOrEditPageElement\"\r\n    ></add-or-edit-page-element>\r\n\r\n\r\n    <div v-else>\r\n      <div class=\"crumbs\">\r\n        <el-breadcrumb separator=\"/\">\r\n          <el-breadcrumb-item>\r\n            <i class=\"el-icon-lx-calendar\"></i> UI项目\r\n          </el-breadcrumb-item>\r\n          <el-breadcrumb-item>UI页面元素管理</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n      </div>\r\n      <el-row>\r\n        <el-button @click=\"returnProjectList\">返回</el-button>\r\n        <el-button type=\"primary\" @click=\"openAddPageElement\">创建页面元素</el-button>\r\n      </el-row>\r\n      <div>\r\n        <el-table :data=\"tableData\" style=\"width: 100%\">\r\n          <el-table-column prop=\"id\" label=\"id\" sortable width=\"180\"></el-table-column>\r\n          <el-table-column prop=\"ui_project_name\" label=\"项目名称\" sortable width=\"180\"></el-table-column>\r\n          <el-table-column prop=\"ui_page_name\" label=\"页面名称\" sortable width=\"180\"></el-table-column>\r\n\r\n          <el-table-column prop=\"updata_time\" label=\"更新时间\" width=\"180\"></el-table-column>\r\n\r\n          <el-table-column prop=\"create_time\" label=\"创建时间\" width=\"180\"></el-table-column>\r\n          <el-table-column label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button size=\"mini\" @click=\"openEditPageElement(scope.row)\">编辑</el-button>\r\n              <el-button size=\"mini\" type=\"danger\" @click=\"deletePageElementPopup(scope.row)\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <!--                <el-pagination-->\r\n        <!--                        class=\"page-class\"-->\r\n        <!--                        @size-change=\"handleSizeChange\"-->\r\n        <!--                        @current-change=\"handleCurrentChange\"-->\r\n        <!--                        :current-page=\"page.page\"-->\r\n        <!--                        :page-sizes=\"[10, 20, 50, 100]\"-->\r\n        <!--                        :page-size=\"page.size\"-->\r\n        <!--                        layout=\"total, sizes, prev, pager, next, jumper\"-->\r\n        <!--                        :total=\"page.total\">-->\r\n        <!--                </el-pagination>-->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    getSingleUiPageElementRequest,\r\n    getUiPageElementRequest,\r\n    deleteSingleUiPageElementRequest,\r\n    updateSingleUiPageElementRequest,\r\n    addUiPageElementRequest\r\n} from '../../../api/uiPageElement';\r\n\r\nimport addOrEditPageElement from './addOrEditPageElement';\r\nimport { getSingleUiProjectPageRequest } from '../../../api/uiPage';\r\n\r\nexport default {\r\n    name: 'UiPageElement',\r\n    props: ['type', 'uiProjectId', 'showUiProjectPage'],\r\n    data() {\r\n        return {\r\n            tableData: [],\r\n            page: {\r\n                page: 1,\r\n                total: 0,\r\n                size: 10\r\n            },\r\n            inject: ['reload'],\r\n            pageElementId: '',\r\n            // showUiProject: false,\r\n\r\n            showAddOrEditPageElement: false,\r\n\r\n            opsType: 'add',\r\n\r\n            // 当前uiPageId\r\n            currentPageId: 0,\r\n\r\n            currentProjectId: 0,\r\n\r\n            //当前uiPageElement数据\r\n            currentUiPageElementData: {},\r\n\r\n            rules: {\r\n                ui_page_name: [{ required: true, message: '请输入页面名称', trigger: 'blur' }],\r\n                ui_page_describe: [{ required: true, message: '请输入页面描述', trigger: 'blur' }],\r\n                ui_project_id: [{ required: true, message: '请选择项目', trigger: 'change' }]\r\n            }\r\n        };\r\n    },\r\n\r\n    methods: {\r\n        formatter(row, column) {\r\n            return row.address;\r\n        },\r\n        handleEdit(index, row) {\r\n            console.log(index, row);\r\n        },\r\n        handleDelete(index, row) {\r\n            console.log(index, row);\r\n        },\r\n        handleSizeChange(size) {\r\n            this.page.size = size;\r\n            this.getUiPageFun();\r\n        },\r\n        handleCurrentChange(index) {\r\n            this.page.page = index;\r\n            this.getUiPageElementFun();\r\n        },\r\n\r\n        //获取所有页面元素列表\r\n        getUiPageElementFun() {\r\n            let req = {\r\n                page: this.page.page,\r\n                size: this.page.size\r\n            };\r\n            getUiPageElementRequest(req).then(data => {\r\n                console.log(data);\r\n                if (true === data.data.success) {\r\n                    this.tableData = data.data.data;\r\n                } else {\r\n                    this.$message.error('获取接口失败');\r\n                }\r\n            });\r\n        },\r\n\r\n        openAddPageElement() {\r\n            this.opsType = 'add';\r\n            this.currentUiPageElementId = 0;\r\n            this.currentUiPageElementData = {};\r\n            this.showAddOrEditPageElement = true;\r\n        },\r\n\r\n        openEditPageElement(data) {\r\n            this.opsType = 'edit';\r\n            this.currentPageId = data.id;\r\n            console.log('这是页面id', data.id);\r\n            this.currentProjectId = this.projectId;\r\n\r\n            this.showAddOrEditPageElement = true;\r\n        },\r\n\r\n        savePageElement() {\r\n            this.showAddOrEditPageElement = false;\r\n        },\r\n        cancelSavePageElement() {\r\n            this.showAddOrEditPageElement = false;\r\n        },\r\n\r\n        //删除单个页面元素\r\n        deletePageElementPopup(data) {\r\n            this.pageElementId = data.id;\r\n\r\n            deleteSingleUiPageElementRequest(this.pageElementId).then(data => {\r\n                console.log(data);\r\n                if (true === data.data.success) {\r\n                    this.getUiPageElementFun();\r\n                    this.$message.success('删除页面成功');\r\n                } else {\r\n                    this.$message.error('删除页面失败');\r\n                }\r\n            });\r\n        },\r\n\r\n        //获取 单个UI项目中包含得所有页面\r\n        getSingleUiProjectPage() {\r\n            getSingleUiProjectPageRequest(this.projectId).then(data => {\r\n                if (true === data.data.success) {\r\n                    console.log('这是获取数据');\r\n                    console.log(data.data.data);\r\n                    this.tableData = data.data.data;\r\n                } else {\r\n                    this.$message.error('获取接口失败');\r\n                }\r\n            });\r\n        },\r\n\r\n        // 返回项目首页列表\r\n        returnProjectList() {\r\n\r\n          this.$parent.returnProject();\r\n        }\r\n    },\r\n\r\n    components: {\r\n        'add-or-edit-page-element': addOrEditPageElement\r\n\r\n    },\r\n    created() {\r\n        console.log(this.uiProjectId);\r\n        if ('enter' === this.type) {\r\n            this.projectId = this.uiProjectId;\r\n            this.getSingleUiProjectPage();\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]}]}