{"remainingRequest":"E:\\test-platform-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\test-platform-vue\\src\\components\\page\\performanceScript\\performanceReport.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\test-platform-vue\\src\\components\\page\\performanceScript\\performanceReport.vue","mtime":1651228164953},{"path":"E:\\test-platform-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650008434508},{"path":"E:\\test-platform-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1650008434007},{"path":"E:\\test-platform-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650008434508},{"path":"E:\\test-platform-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1650008440984}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBwZXJmb3JtYW5jZVNjcmlwdFJlcG9ydERlbGV0ZVJlcXVlc3QsIHBlcmZvcm1hbmNlU2NyaXB0UmVwb3J0UmVxdWVzdCB9IGZyb20gJy4uLy4uLy4uL2FwaS9wZXJmb3JtYW5jZVNjcmlwdCc7DQppbXBvcnQgbmV3UGVyZm9ybWFuY2VSZXBvcnQgZnJvbSAnLi9uZXdQZXJmb3JtYW5jZVJlcG9ydCc7DQppbXBvcnQgeyBmaWxlVXJsIH0gZnJvbSAnLi4vLi4vLi4vYXBpL2NvbW1vbic7DQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogJ3BlcmZvcm1hbmNlUmVwb3J0JywNCiAgICBwcm9wczogWydwZXJmb3JtYW5jZVNjcmlwdERhdGEnXSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgICAgICAgIHJlcG9ydF9hZGRyZXNzOiAnJywNCiAgICAgICAgICAgIHJlcG9ydF9ob3N0OiAiIiwNCiAgICAgICAgICAgIHBlcmZvcm1hbmNlU2NyaXB0SWQ6ICcnLA0KICAgICAgICAgICAgcmVwb3J0X2lkOiAnJywNCiAgICAgICAgICAgIHBlcmZvcm1hbmNlX3NjcmlwdF9yZXBvcnRfbmFtZTogJycsDQogICAgICAgICAgICBwZXJmb3JtYW5jZV9zY3JpcHRfcmVwb3J0X3VybDogJycsDQogICAgICAgICAgICBwZXJmb3JtYW5jZV9yZXBvcnRfaWQ6ICcnLA0KICAgICAgICAgICAgY3JlYXRlX3RpbWU6ICcnLA0KICAgICAgICAgICAgY3VycmVudFBlcmZvcm1hbmNlU2NyaXB0UmVwb3J0VVJMOiB7fSwNCiAgICAgICAgICAgIC8vIGN1cnJlbnRQZXJmb3JtYW5jZVNjcmlwdElkOiB0aGlzLnBlcmZvcm1hbmNlU2NyaXB0SWQsDQogICAgICAgICAgICBzaG93TmV3UGVyZm9ybWFuY2VTY3JpcHRSZXN1bHQ6IGZhbHNlLA0KICAgICAgICAgICAgY3VycmVudFBlcmZvcm1hbmNlU2NyaXB0UmVwb3J0RGF0YTogW3t9XQ0KICAgICAgICB9Ow0KICAgIH0sDQogICAgbW91bnRlZCgpIHsNCiAgICAgICAgdGhpcy5nZXRQZXJmb3JtYW5jZVNjcmlwdFJlcG9ydEZ1bigpOw0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBvbkNvcHk6IGZ1bmN0aW9uIChlKSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WkjeWItuaIkOWKnycpDQogICAgICAgIH0sDQogICAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIChlKSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCflpI3liLblpLHotKXvvIzor7fnqI3lkI7ph43or5UnKQ0KICAgICAgICB9LA0KICAgICAgICBwZXJmb3JtYW5jZVJlcG9ydExpc3QoKSB7DQogICAgICAgICAgICB0aGlzLnNob3dOZXdQZXJmb3JtYW5jZVNjcmlwdFJlc3VsdCA9IGZhbHNlOw0KICAgICAgICB9LA0KDQogICAgICAgIE5ld1BhZ2VDaGVja1JlcG9ydChkYXRhKXsNCiAgICAgICAgICAgIGlmIChmaWxlVXJsID09PSAiaHR0cDovL2xvY2FsaG9zdDo4MDAwLyIpew0KICAgICAgICAgICAgICAgIHRoaXMucmVwb3J0X2hvc3QgPSAnaHR0cDovL2xvY2FsaG9zdDo4MDgwLycNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMucmVwb3J0X2hvc3QgPSBmaWxlVXJsDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnJlcG9ydF9hZGRyZXNzID0gdGhpcy5yZXBvcnRfaG9zdCArICdwZXJmb3JtYW5jZVJlcG9ydFBhZ2UjL3BlcmZvcm1hbmNlUmVwb3J0UGFnZT9wZXJmb3JtYW5jZVJlc3VsdElkPScrIGRhdGEucGVyZm9ybWFuY2VfcmVwb3J0X2lkICsgJyZwZXJmb3JtYW5jZVNjcmlwdElkPScgKyB0aGlzLnBlcmZvcm1hbmNlU2NyaXB0SWQNCiAgICAgICAgICAgIC8vIGNvbnN0IHtocmVmfSA9IHRoaXMuJHJvdXRlci5yZXNvbHZlKHsNCiAgICAgICAgICAgIC8vICAgICBwYXRoOiAnL3BlcmZvcm1hbmNlUmVwb3J0UGFnZScsDQogICAgICAgICAgICAvLyAgICAgcXVlcnk6IHsNCiAgICAgICAgICAgIC8vICAgICAgICAgcGVyZm9ybWFuY2VSZXN1bHRJZDpkYXRhLnBlcmZvcm1hbmNlX3JlcG9ydF9pZCwNCiAgICAgICAgICAgIC8vICAgICAgICAgcGVyZm9ybWFuY2VTY3JpcHRJZDogdGhpcy5wZXJmb3JtYW5jZVNjcmlwdElkDQogICAgICAgICAgICAvLyAgICAgfQ0KICAgICAgICAgICAgLy8gfSkNCiAgICAgICAgICAgIC8vIHdpbmRvdy5vcGVuKGhyZWYsICdfYmxhbmsnKQ0KICAgICAgICB9LA0KDQoNCiAgICAgICAgLy8g6I635Y+W5rWL6K+V5oql5ZGKDQogICAgICAgIGdldFBlcmZvcm1hbmNlU2NyaXB0UmVwb3J0RnVuKCkgew0KICAgICAgICAgICAgcGVyZm9ybWFuY2VTY3JpcHRSZXBvcnRSZXF1ZXN0KHRoaXMucGVyZm9ybWFuY2VTY3JpcHRJZCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgICAgICAgICBpZiAodHJ1ZSA9PT0gZGF0YS5kYXRhLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSBkYXRhLmRhdGEuZGF0YTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bmjqXlj6PlpLHotKUnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCg0KICAgICAgICAvLyBOZXfmn6XnnIvmgKfog73mtYvor5XmiqXlkYoNCiAgICAgICAgTmV3Q2hlY2tSZXBvcnQoZGF0YSkgew0KICAgICAgICAgICAgdGhpcy5zaG93TmV3UGVyZm9ybWFuY2VTY3JpcHRSZXN1bHQgPSB0cnVlDQogICAgICAgICAgICB0aGlzLmN1cnJlbnRQZXJmb3JtYW5jZVNjcmlwdFJlcG9ydERhdGFbMF0ucGVyZm9ybWFuY2VfcmVwb3J0X2lkID0gZGF0YS5wZXJmb3JtYW5jZV9yZXBvcnRfaWQNCiAgICAgICAgfSwNCg0KICAgICAgICAvLyDmn6XnnIvmgKfog73mtYvor5XmiqXlkYoNCiAgICAgICAgY2hlY2tSZXBvcnQoZGF0YSkgew0KICAgICAgICAgICAgdGhpcy5wZXJmb3JtYW5jZV9zY3JpcHRfcmVwb3J0X25hbWUgPSBkYXRhLnBlcmZvcm1hbmNlX3NjcmlwdF9yZXBvcnRfbmFtZTsNCiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VfcmVwb3J0X2lkID0gZGF0YS5wZXJmb3JtYW5jZV9yZXBvcnRfaWQ7DQogICAgICAgICAgICB0aGlzLmNyZWF0ZV90aW1lID0gZGF0YS5jcmVhdGVfdGltZTsNCiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2Vfc2NyaXB0X3JlcG9ydF91cmwgPSBkYXRhLmZpbGU7DQogICAgICAgICAgICB0aGlzLmN1cnJlbnRQZXJmb3JtYW5jZVNjcmlwdFJlcG9ydFVSTCA9IGRhdGEuZmlsZTsNCiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHRoaXMuY3VycmVudFBlcmZvcm1hbmNlU2NyaXB0UmVwb3J0VVJMKTsNCiAgICAgICAgfSwNCg0KICAgICAgICAvLyDliKDpmaTmgKfog73mtYvor5XmiqXlkYoNCiAgICAgICAgZGVsZXRlUmVwb3J0KGRhdGEpIHsNCiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2Vfc2NyaXB0X3JlcG9ydF9uYW1lID0gZGF0YS5wZXJmb3JtYW5jZV9zY3JpcHRfcmVwb3J0X25hbWU7DQogICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlX3JlcG9ydF9pZCA9IGRhdGEucGVyZm9ybWFuY2VfcmVwb3J0X2lkOw0KDQogICAgICAgICAgICBwZXJmb3JtYW5jZVNjcmlwdFJlcG9ydERlbGV0ZVJlcXVlc3QodGhpcy5wZXJmb3JtYW5jZV9zY3JpcHRfcmVwb3J0X25hbWUsIHRoaXMucGVyZm9ybWFuY2VfcmVwb3J0X2lkKS50aGVuKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgIGlmICh0cnVlID09PSBkYXRhLmRhdGEuc3VjY2Vzcykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKnycpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFBlcmZvcm1hbmNlU2NyaXB0UmVwb3J0RnVuKCkNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bmjqXlj6PlpLHotKUnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucGVyZm9ybWFuY2Vfc2NyaXB0X3JlcG9ydF9uYW1lKQ0KICAgICAgICB9LA0KDQogICAgICAgIC8vIOi/lOWbnuaAp+iDveiEmuacrOWIl+ihqA0KICAgICAgICByZXR1cm5TY3JpcHRMaXN0KCl7DQogICAgICAgICAgICB0aGlzLiRwYXJlbnQucGVyZm9ybWFuY2VTY3JpcHRMaXN0KCk7DQogICAgICAgIH0sDQogICAgfSwNCg0KICAgIGNvbXBvbmVudHM6IHsNCiAgICAgICAgJ25ldy1wZXJmb3JtYW5jZS1zY3JpcHQtcmVzdWx0JzogbmV3UGVyZm9ybWFuY2VSZXBvcnQsDQoNCiAgICB9LA0KDQogICAgY3JlYXRlZCgpIHsNCiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZVNjcmlwdElkID0gdGhpcy5wZXJmb3JtYW5jZVNjcmlwdERhdGEuaWQ7DQogICAgfQ0KfTsNCg=="},{"version":3,"sources":["performanceReport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA","file":"performanceReport.vue","sourceRoot":"src/components/page/performanceScript","sourcesContent":["<template>\r\n    <div>\r\n        <new-performance-script-result\r\n            @performanceReportList = \"performanceReportList\"\r\n            :performanceScriptReportData = \"currentPerformanceScriptReportData\"\r\n            :performanceScriptId = \"performanceScriptId\"\r\n            v-if=\"showNewPerformanceScriptResult\"\r\n        ></new-performance-script-result>\r\n        <div v-else>\r\n            <div class=\"crumbs\">\r\n                <el-breadcrumb separator=\"/\">\r\n                    <el-breadcrumb-item>\r\n                        <i class=\"el-icon-lx-calendar\"></i> 性能测试项目\r\n                    </el-breadcrumb-item>\r\n                    <el-breadcrumb-item>性能测试项目</el-breadcrumb-item>\r\n                    <el-breadcrumb-item>性能测试脚本</el-breadcrumb-item>\r\n                    <el-breadcrumb-item>性能测试报告</el-breadcrumb-item>\r\n                </el-breadcrumb>\r\n            </div>\r\n            <el-row>\r\n                <el-button @click=\"returnScriptList\" >返回</el-button>\r\n            </el-row>\r\n            <div>\r\n                <el-table :data=\"tableData\" style=\"width: 100%\">\r\n                    <el-table-column\r\n                        prop=\"performance_report_id\"\r\n                        label=\"id\"\r\n                        width=\"180\"\r\n                    ></el-table-column>\r\n                    <el-table-column\r\n                        prop=\"performance_script_report_name\"\r\n                        label=\"性能测试报告名称\"\r\n                        sortable\r\n                        width=\"180\"\r\n                    ></el-table-column>\r\n                    <el-table-column\r\n                        prop=\"create_time\"\r\n                        sortable\r\n                        label=\"创建时间\"\r\n                        width=\"180\"\r\n                    ></el-table-column>\r\n                    <el-table-column label=\"操作\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-button size=\"mini\" type=\"danger\" @click=\"NewCheckReport(scope.row)\">查看报告</el-button>\r\n                            <el-button size=\"mini\" type=\"danger\"\r\n                                       v-clipboard:copy=\"report_address\"\r\n                                       v-clipboard:success=\"onCopy\"\r\n                                       v-clipboard:error=\"onError\"\r\n                                       @click=\"NewPageCheckReport(scope.row)\">分享报告</el-button>\r\n                            <!--                            <el-button size=\"mini\" type=\"danger\" @click=\"checkReport(scope.row)\">查看报告</el-button>-->\r\n                            <el-button size=\"mini\" type=\"danger\" @click=\"deleteReport(scope.row)\">删除</el-button>\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { performanceScriptReportDeleteRequest, performanceScriptReportRequest } from '../../../api/performanceScript';\r\nimport newPerformanceReport from './newPerformanceReport';\r\nimport { fileUrl } from '../../../api/common';\r\nexport default {\r\n    name: 'performanceReport',\r\n    props: ['performanceScriptData'],\r\n    data() {\r\n        return {\r\n            tableData: [],\r\n            report_address: '',\r\n            report_host: \"\",\r\n            performanceScriptId: '',\r\n            report_id: '',\r\n            performance_script_report_name: '',\r\n            performance_script_report_url: '',\r\n            performance_report_id: '',\r\n            create_time: '',\r\n            currentPerformanceScriptReportURL: {},\r\n            // currentPerformanceScriptId: this.performanceScriptId,\r\n            showNewPerformanceScriptResult: false,\r\n            currentPerformanceScriptReportData: [{}]\r\n        };\r\n    },\r\n    mounted() {\r\n        this.getPerformanceScriptReportFun();\r\n    },\r\n    methods: {\r\n        onCopy: function (e) {\r\n            this.$message.success('复制成功')\r\n        },\r\n        onError: function (e) {\r\n            this.$message.error('复制失败，请稍后重试')\r\n        },\r\n        performanceReportList() {\r\n            this.showNewPerformanceScriptResult = false;\r\n        },\r\n\r\n        NewPageCheckReport(data){\r\n            if (fileUrl === \"http://localhost:8000/\"){\r\n                this.report_host = 'http://localhost:8080/'\r\n            }\r\n            else {\r\n                this.report_host = fileUrl\r\n            }\r\n            this.report_address = this.report_host + 'performanceReportPage#/performanceReportPage?performanceResultId='+ data.performance_report_id + '&performanceScriptId=' + this.performanceScriptId\r\n            // const {href} = this.$router.resolve({\r\n            //     path: '/performanceReportPage',\r\n            //     query: {\r\n            //         performanceResultId:data.performance_report_id,\r\n            //         performanceScriptId: this.performanceScriptId\r\n            //     }\r\n            // })\r\n            // window.open(href, '_blank')\r\n        },\r\n\r\n\r\n        // 获取测试报告\r\n        getPerformanceScriptReportFun() {\r\n            performanceScriptReportRequest(this.performanceScriptId).then(data => {\r\n                if (true === data.data.success) {\r\n                    this.tableData = data.data.data;\r\n                } else {\r\n                    this.$message.error('获取接口失败');\r\n                }\r\n            });\r\n        },\r\n\r\n        // New查看性能测试报告\r\n        NewCheckReport(data) {\r\n            this.showNewPerformanceScriptResult = true\r\n            this.currentPerformanceScriptReportData[0].performance_report_id = data.performance_report_id\r\n        },\r\n\r\n        // 查看性能测试报告\r\n        checkReport(data) {\r\n            this.performance_script_report_name = data.performance_script_report_name;\r\n            this.performance_report_id = data.performance_report_id;\r\n            this.create_time = data.create_time;\r\n            this.performance_script_report_url = data.file;\r\n            this.currentPerformanceScriptReportURL = data.file;\r\n            window.open(this.currentPerformanceScriptReportURL);\r\n        },\r\n\r\n        // 删除性能测试报告\r\n        deleteReport(data) {\r\n            this.performance_script_report_name = data.performance_script_report_name;\r\n            this.performance_report_id = data.performance_report_id;\r\n\r\n            performanceScriptReportDeleteRequest(this.performance_script_report_name, this.performance_report_id).then(data => {\r\n                if (true === data.data.success) {\r\n                    this.$message.success('删除成功');\r\n                    this.getPerformanceScriptReportFun()\r\n                } else {\r\n                    this.$message.error('获取接口失败');\r\n                }\r\n            });\r\n            console.log(this.performance_script_report_name)\r\n        },\r\n\r\n        // 返回性能脚本列表\r\n        returnScriptList(){\r\n            this.$parent.performanceScriptList();\r\n        },\r\n    },\r\n\r\n    components: {\r\n        'new-performance-script-result': newPerformanceReport,\r\n\r\n    },\r\n\r\n    created() {\r\n        this.performanceScriptId = this.performanceScriptData.id;\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]}]}