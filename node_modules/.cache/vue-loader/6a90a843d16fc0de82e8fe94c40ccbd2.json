{"remainingRequest":"E:\\test-platform-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\test-platform-vue\\src\\components\\page\\uiAutomation\\uiTask\\UiTestTaskResult.vue?vue&type=style&index=0&id=04a9587a&scoped=true&lang=css&","dependencies":[{"path":"E:\\test-platform-vue\\src\\components\\page\\uiAutomation\\uiTask\\UiTestTaskResult.vue","mtime":1652877133466},{"path":"E:\\test-platform-vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1652877127608},{"path":"E:\\test-platform-vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1652877132788},{"path":"E:\\test-platform-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1652877131208},{"path":"E:\\test-platform-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652877126456},{"path":"E:\\test-platform-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1652877132787}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnNjaGFydC1ib3ggew0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIG1hcmdpbjogMjBweDsNCn0NCi5jb250ZW50LXRpdGxlIHsNCiAgY2xlYXI6IGJvdGg7DQogIGZvbnQtd2VpZ2h0OiA0MDA7DQogIGxpbmUtaGVpZ2h0OiA1MHB4Ow0KICBtYXJnaW46IDEwcHggMDsNCiAgZm9udC1zaXplOiAyMnB4Ow0KICBjb2xvcjogIzFmMmYzZDsNCn0NCi5zY2hhcnQgew0KICB3aWR0aDogNjAwcHg7DQogIGhlaWdodDogNDAwcHg7DQp9DQoNCi5leGVjdXRpdmVfaW5mb3JtYXRpb257DQogIHdpZHRoOiA2MDBweDsNCiAgaGVpZ2h0OiA0MDBweDsNCg0KfQ0KDQo="},{"version":3,"sources":["UiTestTaskResult.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA","file":"UiTestTaskResult.vue","sourceRoot":"src/components/page/uiAutomation/uiTask","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"crumbs\">\r\n      <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item>\r\n          <i class=\"el-icon-lx-calendar\"></i> UI任务管理\r\n        </el-breadcrumb-item>\r\n        <el-breadcrumb-item>UI项目</el-breadcrumb-item>\r\n        <el-breadcrumb-item>UI任务</el-breadcrumb-item>\r\n        <el-breadcrumb-item>UI测试报告</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </div>\r\n    <el-row>\r\n      <el-button @click=\"returnUITaskList\">返回</el-button>\r\n      <el-button type=\"primary\" @click=\"DownloadWebScriptTemplate\">下载脚本模板</el-button>\r\n    </el-row>\r\n    <div>\r\n      <el-table\r\n          :data=\"tableData\"\r\n          style=\"width: 100%\">\r\n        <el-table-column\r\n            prop=\"id\"\r\n            label=\"id\"\r\n            sortable\r\n            width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"ui_test_result_name\"\r\n            label=\"测试报告名称\"\r\n            sortable\r\n            width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"ui_error_total_number\"\r\n            label=\"失败总数\"\r\n            sortable\r\n            width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"ui_successful_total_number\"\r\n            label=\"成功总数\"\r\n            sortable\r\n            width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"ui_total_number\"\r\n            label=\"用例总数\"\r\n            width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"create_time\"\r\n            label=\"时间\"\r\n            width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n                size=\"mini\"\r\n                type=\"danger\"\r\n                @click=\"checkReport(scope.row)\">查看报告</el-button>\r\n            <el-button\r\n                size=\"mini\"\r\n                type=\"danger\"\r\n                @click=\"deleteSingleRequest(scope.row)\">删除</el-button>\r\n            <el-button\r\n                size=\"mini\"\r\n                type=\"danger\"\r\n                @click=\"DownloadWebScript(scope.row)\">下载脚本</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <div>\r\n      <el-dialog\r\n          :visible.sync=\"ui_ResultVisible\"\r\n          :fullscreen=\"false\"\r\n          :destroy-on-close=\"true\"\r\n          :show-close=\"true\"\r\n          width=\"70%\">\r\n\r\n        <div class=\"schart-box\">\r\n          <div class=\"content-title\">测试结果</div>\r\n          <schart class=\"schart\" canvasId=\"pie\" :options=\"options3\"></schart>\r\n        </div>\r\n        <div>\r\n          <el-table\r\n              :data=\"ui_result_visible_table_data\"\r\n              style=\"width: 65%\">\r\n            <el-table-column\r\n                prop=\"id\"\r\n                label=\"id\"\r\n                sortable\r\n                width=\"180\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"ui_test_case_name\"\r\n                label=\"测试用例名称\"\r\n                sortable\r\n                width=\"180\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"ui_error\"\r\n                label=\"失败\"\r\n                sortable\r\n                width=\"180\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"ui_successful\"\r\n                label=\"成功\"\r\n                sortable\r\n                width=\"180\">\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"操作\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                    size=\"mini\"\r\n                    type=\"danger\"\r\n                    @click=\"check_abnormal(scope.row)\">查看</el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n\r\n      </el-dialog>\r\n    </div>\r\n    <div>\r\n      <el-dialog\r\n          :visible.sync=\"UiTestAbnormalResult\"\r\n          :destroy-on-close=\"true\"\r\n          :show-close=\"true\"\r\n          :modal=\"true\"\r\n          title=\"异常消息\"\r\n          width=\"50%\">\r\n        <span>{{ui_test_abnormal}}</span>\r\n\r\n      </el-dialog>\r\n    </div>\r\n\r\n\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getUiCaseResultRequest,\r\n  postUiCaseCheckResultRequest,\r\n  getUiTestAbnormalRequest,\r\n  deleteSingleUiTestResultRequest,\r\n} from '../../../../api/uiAutomation/uiTestTask';\r\nimport Schart from 'vue-schart';\r\nimport { fileUrl } from '../../../../api/common/common';\r\n\r\nexport default {\r\n  name: 'UiTestTaskResult',\r\n  props: ['uiTestTaskData'],\r\n  components: {\r\n    Schart\r\n  },\r\n\r\n  data(){\r\n\r\n    return{\r\n      ui_result_visible_table_data: [],\r\n      ui_test_abnormal_result_id: \"\",\r\n      ui_test_abnormal: \"\",\r\n      ui_test_script: \"\",\r\n\r\n      tableData: [],\r\n      testTaskId: \"\",\r\n      result_id: \"\",\r\n      ui_ResultVisible: false,\r\n      UiTestAbnormalResult: false,\r\n      ui_Result: \"\",\r\n      options3: {\r\n        type: 'pie',\r\n        title: {\r\n          text: '测试结果'\r\n        },\r\n        legend: {\r\n          position: 'left'\r\n        },\r\n        bgColor: '#fbfbfb',\r\n        labels: ['成功', '失败'],\r\n        datasets: [\r\n          {\r\n            data: [334,22]\r\n          },\r\n        ]\r\n      },\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n  },\r\n  mounted() {\r\n    this.getUiCaseResultFun()\r\n\r\n\r\n  },\r\n  methods: {\r\n\r\n    // 下载脚本\r\n    DownloadWebScript(data){\r\n\r\n      let download_web_script;\r\n      this.result_id = data.id\r\n      download_web_script = fileUrl + \"api/backend/ui_test_task/check_result/ui_test_web_script/\" + this.result_id + \"/\"\r\n      console.log(download_web_script)\r\n\r\n      return window.location.href = download_web_script\r\n\r\n    },\r\n\r\n    DownloadWebScriptTemplate(){\r\n\r\n      let download_web_script_Template;\r\n      download_web_script_Template = fileUrl + \"api/backend/ui_test_task/check_result/ui_test_web_script/download_web_script_template/\"\r\n      console.log(download_web_script_Template)\r\n\r\n      return window.location.href = download_web_script_Template\r\n\r\n    },\r\n\r\n\r\n    // 获取测试报告列表\r\n    getUiCaseResultFun() {\r\n      getUiCaseResultRequest(this.testTaskId).then(data =>{\r\n        if (true === data.data.success){\r\n          this.tableData = data.data.data.data;\r\n\r\n        }else {\r\n          this.$message.error(\"获取接口失败\")\r\n        }\r\n\r\n      })\r\n    },\r\n\r\n    // 删除单独测试报告\r\n    deleteSingleRequest(data) {\r\n      this.result_id = data.id\r\n      deleteSingleUiTestResultRequest(this.testTaskId, this.result_id).then(data =>{\r\n        if (true === data.data.success){\r\n          this.tableData = data.data.data.data;\r\n          this.$message.success(\"删除成功\")\r\n          this.getUiCaseResultFun()\r\n\r\n        }else {\r\n          this.$message.error(\"获取接口失败\")\r\n        }\r\n\r\n      })\r\n    },\r\n\r\n\r\n    // 查看报告详情\r\n    checkReport(data){\r\n\r\n      this.result_id = data.id\r\n\r\n      postUiCaseCheckResultRequest(this.result_id).then(data =>{\r\n\r\n        if (true === data.data.success){\r\n\r\n          this.options3.datasets[0].data = data.data.data.case_result_total\r\n          this.ui_result_visible_table_data = data.data.data.data\r\n\r\n          this.ui_ResultVisible=true\r\n\r\n\r\n        }else {\r\n          this.$message.error(\"获取接口失败\")\r\n        }\r\n\r\n      })\r\n\r\n    },\r\n\r\n    // 查看异常\r\n    check_abnormal(data){\r\n      this.ui_test_abnormal_result_id = data.id\r\n\r\n      getUiTestAbnormalRequest(this.ui_test_abnormal_result_id).then(data =>{\r\n            if (true === data.data.success){\r\n              console.log(data.data.data.ui_test_abnormal)\r\n\r\n              this.ui_test_abnormal = data.data.data.ui_test_abnormal\r\n              this.UiTestAbnormalResult = true\r\n\r\n            }else {\r\n              this.$message.error(\"获取接口失败\")\r\n            }\r\n          }\r\n      )\r\n    },\r\n\r\n\r\n\r\n    // 关闭测试报告弹窗\r\n    closeReport(){\r\n      this.ui_ResultVisible=false\r\n    },\r\n\r\n    // 返回任务列表\r\n    returnUITaskList(){\r\n      this.$parent.returnTaskList();\r\n    },\r\n\r\n\r\n\r\n  },\r\n  created() {\r\n    console.log(this.uiTestTaskData.id)\r\n    this.testTaskId = this.uiTestTaskData.id\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.schart-box {\r\n  display: inline-block;\r\n  margin: 20px;\r\n}\r\n.content-title {\r\n  clear: both;\r\n  font-weight: 400;\r\n  line-height: 50px;\r\n  margin: 10px 0;\r\n  font-size: 22px;\r\n  color: #1f2f3d;\r\n}\r\n.schart {\r\n  width: 600px;\r\n  height: 400px;\r\n}\r\n\r\n.executive_information{\r\n  width: 600px;\r\n  height: 400px;\r\n\r\n}\r\n\r\n</style>"]}]}