{"remainingRequest":"D:\\VueAutomatedTestPlatform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\VueAutomatedTestPlatform\\src\\components\\page\\apiAutomation\\apiTask\\ApiTask.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\VueAutomatedTestPlatform\\src\\components\\page\\apiAutomation\\apiTask\\ApiTask.vue","mtime":1652877133454},{"path":"D:\\VueAutomatedTestPlatform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652877126456},{"path":"D:\\VueAutomatedTestPlatform\\node_modules\\babel-loader\\lib\\index.js","mtime":1652877125945},{"path":"D:\\VueAutomatedTestPlatform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652877126456},{"path":"D:\\VueAutomatedTestPlatform\\node_modules\\vue-loader\\lib\\index.js","mtime":1652877132787}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7IGdldEFwaVRlc3RUYXNrUmVxdWVzdCwgZGVsZXRlU2luZ2xlQXBpVGVzdFRhc2tSZXF1ZXN0LCBwb3N0UGVyZm9ybUFwaVRhc2tSZXF1ZXN0IH0gZnJvbSAnLi4vLi4vLi4vLi4vYXBpL2FwaUF1dG9tYXRpb24vYXBpVGVzdFRhc2snOw0KaW1wb3J0IGFkZE9yRWRpdEFwaVRhc2sgZnJvbSAnLi9hZGRPckVkaXRBcGlUYXNrJzsNCmltcG9ydCBBcGlUZXN0VGFza1Jlc3VsdCBmcm9tICcuL0FwaVRlc3RUYXNrUmVzdWx0JzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnQXBpVGFzaycsDQogIGluamVjdDpbJ3JlbG9hZCddLA0KICBwcm9wczogWyd0eXBlJywgJ2FwaVByb2plY3RJZCddLA0KICBkYXRhKCl7DQogICAgcmV0dXJuew0KDQogICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgYXBpVGVzdFRhc2tJZDogIiIsDQoNCiAgICAgIHNob3dBZGRPckVkaXRBcGlUZXN0VGFzayA6IGZhbHNlLA0KDQogICAgICBzaG93QXBpVGVzdFRhc2tSZXN1bHQ6IGZhbHNlLA0KDQogICAgICBvcHNUeXBlOiAiYWRkIiwNCg0KICAgICAgLy/lvZPliY1hcGlUZXN0VGFza0lkDQogICAgICBjdXJyZW50QXBpVGVzdFRhc2tJZDogMCwNCg0KICAgICAgLy/lvZPliY0gYXBpVGVzdENhc2XmlbDmja4NCiAgICAgIGN1cnJlbnRBcGlUZXN0VGFza0RhdGE6IHt9LA0KICAgICAgcHJvamVjdElkOiIiDQoNCg0KDQoNCg0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczp7DQoNCiAgICAvL+iOt+WPluivpemhueebruS4i+eahOaJgOaciUFwaea1i+ivleS7u+WKoeWIl+ihqA0KICAgIGdldEFwaVRlc3RUYXNrRnVuKCkgew0KICAgICAgZ2V0QXBpVGVzdFRhc2tSZXF1ZXN0KHRoaXMuYXBpUHJvamVjdElkKS50aGVuKGRhdGEgPT4gew0KICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsNCiAgICAgICAgaWYgKHRydWUgPT09IGRhdGEuZGF0YS5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy50YWJsZURhdGEgPSBkYXRhLmRhdGEuZGF0YTsNCg0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuiOt+WPluaOpeWPo+Wksei0pSIpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCg0KDQoNCiAgICAvLyDmt7vliqDmtYvor5Xku7vliqENCiAgICBvcGVuQWRkQXBpVGVzdFRhc2soKXsNCiAgICAgIHRoaXMub3BzVHlwZSA9ICdhZGQnOw0KICAgICAgdGhpcy5jdXJyZW50QXBpVGVzdFRhc2tJZCA9IDA7DQogICAgICB0aGlzLmN1cnJlbnRBcGlUZXN0VGFza0RhdGEgPSB7fTsNCg0KICAgICAgdGhpcy5zaG93QWRkT3JFZGl0QXBpVGVzdFRhc2sgPSB0cnVlDQoNCg0KICAgIH0sDQoNCiAgICAvLyDnvJbovpFBUEnmtYvor5Xku7vliqENCiAgICBvcGVuRWRpdEFwaVRlc3RUYXNrKGRhdGEpew0KICAgICAgdGhpcy5vcHNUeXBlID0gJ2VkaXQnOw0KICAgICAgdGhpcy5jdXJyZW50QXBpVGVzdFRhc2tJZCA9IGRhdGEuaWQ7DQogICAgICB0aGlzLmN1cnJlbnRBcGlUZXN0VGFza0RhdGEgPSBkYXRhOw0KICAgICAgY29uc29sZS5sb2coZGF0YSkNCg0KICAgICAgdGhpcy5zaG93QWRkT3JFZGl0QXBpVGVzdFRhc2sgPSB0cnVlOw0KDQoNCg0KICAgIH0sDQoNCiAgICAvL+WIoOmZpOWNleS4qkFQSea1i+ivleS7u+WKoQ0KICAgIGRlbGV0ZUFwaVRlc3RUYXNrKGRhdGEpew0KICAgICAgdGhpcy5hcGlUZXN0VGFza0lkID0gZGF0YS5pZA0KICAgICAgZGVsZXRlU2luZ2xlQXBpVGVzdFRhc2tSZXF1ZXN0KHRoaXMuYXBpVGVzdFRhc2tJZCkudGhlbihkYXRhID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZGF0YSkNCiAgICAgICAgaWYgKHRydWUgPT09IGRhdGEuZGF0YS5zdWNjZXNzKXsNCiAgICAgICAgICB0aGlzLmdldEFwaVRlc3RUYXNrRnVuKCkNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpEFQSea1i+ivleS7u+WKoeaIkOWKnyIpDQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5Yig6ZmkQVBJ5rWL6K+V5Lu75Yqh5aSx6LSlIikNCiAgICAgICAgfQ0KICAgICAgfSkNCg0KICAgIH0sDQoNCiAgICAvL+S/neWtmOa1i+ivleS7u+WKoQ0KICAgIHNhdmVBcGlUZXN0VGFzaygpew0KICAgICAgdGhpcy5zaG93QWRkT3JFZGl0QXBpVGVzdFRhc2sgPSBmYWxzZQ0KICAgICAgdGhpcy5nZXRBcGlUZXN0VGFza0Z1bigpDQoNCg0KICAgIH0sDQoNCiAgICAvLyDlj5bmtojkv53lrZjmtYvor5Xku7vliqENCiAgICBjYW5jZWxTYXZlQXBpVGVzdFRhc2soKXsNCiAgICAgIHRoaXMuc2hvd0FkZE9yRWRpdEFwaVRlc3RUYXNrID0gZmFsc2UNCiAgICAgIHRoaXMuZ2V0QXBpVGVzdFRhc2tGdW4oKQ0KDQogICAgfSwNCg0KICAgIC8vIOaJp+ihjOa1i+ivleS7u+WKoQ0KICAgIHBlcmZvcm1BcGlUZXN0VGFzayhkYXRhKXsNCg0KICAgICAgdGhpcy5hcGlUZXN0VGFza0lkID0gZGF0YS5pZA0KICAgICAgcG9zdFBlcmZvcm1BcGlUYXNrUmVxdWVzdCh0aGlzLmFwaVRlc3RUYXNrSWQpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKGRhdGEpDQogICAgICAgIGlmICh0cnVlID09PSBkYXRhLmRhdGEuc3VjY2Vzcyl7DQogICAgICAgICAgdGhpcy5nZXRBcGlUZXN0VGFza0Z1bigpDQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmiafooYzmtYvor5Xku7vliqHmiJDlip8iKQ0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYoMTAyMDAgPT09IGRhdGEuZGF0YS5lcnJvci5jb2RlLnN0YXR1cyl7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5b2T5YmN5pyJQVBJ5Lu75Yqh5q2j5Zyo5omn6KGM77yBIikNCg0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaJp+ihjEFQSea1i+ivleS7u+WKoeWksei0pSIpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCg0KICAgIC8vIOafpeeci+S7u+WKoeaKpeWRig0KICAgIHJlcG9ydEFwaVRlc3RUYXNrKGRhdGEpew0KICAgICAgdGhpcy5jdXJyZW50QXBpVGVzdFRhc2tJZCA9IGRhdGEuaWQ7DQogICAgICB0aGlzLmN1cnJlbnRBcGlUZXN0VGFza0RhdGEgPSBkYXRhOw0KICAgICAgY29uc29sZS5sb2coZGF0YSkNCiAgICAgIHRoaXMuc2hvd0FwaVRlc3RUYXNrUmVzdWx0ID0gdHJ1ZQ0KDQogICAgfSwNCg0KICAgIC8vIOi/lOWbnumhueebruWIl+ihqA0KICAgIHJldHVyblByb2plY3RMaXN0KCl7DQogICAgICB0aGlzLiRwYXJlbnQucmV0dXJuUHJvamVjdCgpOw0KDQogICAgfSwNCg0KICAgIC8vIOi/lOWbnumhueebruWIl+ihqA0KICAgIHJldHVybkFQSVRhc2tMaXN0KCl7DQogICAgICB0aGlzLnNob3dBcGlUZXN0VGFza1Jlc3VsdCA9IGZhbHNlDQogICAgICB0aGlzLmdldEFwaVRlc3RUYXNrRnVuKCkNCiAgICB9DQoNCg0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgJ2FkZC1vci1lZGl0LWFwaS10YXNrJzogYWRkT3JFZGl0QXBpVGFzaywNCiAgICAnYXBpLXRlc3QtdGFzay1yZXN1bHQnOiBBcGlUZXN0VGFza1Jlc3VsdA0KDQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgaWYgKCdlbnRlcic9PT0gdGhpcy50eXBlKXsNCiAgICAgIHRoaXMucHJvamVjdElkID0gdGhpcy5hcGlQcm9qZWN0SWQNCiAgICAgIHRoaXMuZ2V0QXBpVGVzdFRhc2tGdW4oKQ0KDQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["ApiTask.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;AAMA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"ApiTask.vue","sourceRoot":"src/components/page/apiAutomation/apiTask","sourcesContent":["<template>\r\n  <div>\r\n\r\n    <add-or-edit-api-task\r\n        :type=\"opsType\"\r\n        :apiProjectId=\"currentApiTestTaskId\"\r\n        :apiTestTaskData=\"currentApiTestTaskData\"\r\n        :projectId = \"projectId\"\r\n        @saveApiTestTask=\"saveApiTestTask\"\r\n        @cancelSaveApiTestTask=\"cancelSaveApiTestTask\"\r\n        v-if=\"showAddOrEditApiTestTask\">\r\n\r\n    </add-or-edit-api-task>\r\n\r\n    <api-test-task-result\r\n        :apiTestTaskId=\"currentApiTestTaskId\"\r\n        :apiTestTaskData=\"currentApiTestTaskData\"\r\n        v-else-if=\"showApiTestTaskResult\">\r\n    </api-test-task-result>\r\n\r\n    <div v-else>\r\n      <div class=\"crumbs\">\r\n        <el-breadcrumb separator=\"/\">\r\n          <el-breadcrumb-item>\r\n            <i class=\"el-icon-lx-calendar\"></i> API任务管理\r\n          </el-breadcrumb-item>\r\n          <el-breadcrumb-item>API项目</el-breadcrumb-item>\r\n          <el-breadcrumb-item>API任务</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n      </div>\r\n      <el-row>\r\n        <el-button @click=\"returnProjectList\">返回</el-button>\r\n        <el-button type=\"primary\" @click=\"openAddApiTestTask\" >创建API测试任务</el-button>\r\n        <el-button @click=\"getApiTestTaskFun\" >刷新</el-button>\r\n      </el-row>\r\n      <div>\r\n        <el-table\r\n            :data=\"tableData\"\r\n            style=\"width: 100%\">\r\n          <!--                    :default-sort = \"{prop: 'date', order: 'descending'}\">-->\r\n          <el-table-column\r\n              prop=\"id\"\r\n              label=\"id\"\r\n              sortable\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"api_project_name\"\r\n              label=\"项目\"\r\n              sortable\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"api_test_task_name\"\r\n              label=\"任务名称\"\r\n              sortable\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"status\"\r\n              label=\"状态\"\r\n              sortable\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"describe\"\r\n              label=\"描述\"\r\n              sortable\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"update_time\"\r\n              label=\"更新时间\"\r\n              width=\"180\">\r\n          </el-table-column>\r\n\r\n          <el-table-column\r\n              prop=\"create_time\"\r\n              label=\"创建时间\"\r\n              width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                  size=\"mini\"\r\n                  @click=\"openEditApiTestTask(scope.row)\">编辑</el-button>\r\n              <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  @click=\"deleteApiTestTask(scope.row)\">删除</el-button>\r\n              <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  @click=\"performApiTestTask(scope.row)\">执行</el-button>\r\n              <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  @click=\"reportApiTestTask(scope.row)\">查看报告</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport { getApiTestTaskRequest, deleteSingleApiTestTaskRequest, postPerformApiTaskRequest } from '../../../../api/apiAutomation/apiTestTask';\r\nimport addOrEditApiTask from './addOrEditApiTask';\r\nimport ApiTestTaskResult from './ApiTestTaskResult';\r\n\r\nexport default {\r\n  name: 'ApiTask',\r\n  inject:['reload'],\r\n  props: ['type', 'apiProjectId'],\r\n  data(){\r\n    return{\r\n\r\n      tableData: [],\r\n      apiTestTaskId: \"\",\r\n\r\n      showAddOrEditApiTestTask : false,\r\n\r\n      showApiTestTaskResult: false,\r\n\r\n      opsType: \"add\",\r\n\r\n      //当前apiTestTaskId\r\n      currentApiTestTaskId: 0,\r\n\r\n      //当前 apiTestCase数据\r\n      currentApiTestTaskData: {},\r\n      projectId:\"\"\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n  },\r\n  methods:{\r\n\r\n    //获取该项目下的所有Api测试任务列表\r\n    getApiTestTaskFun() {\r\n      getApiTestTaskRequest(this.apiProjectId).then(data => {\r\n        console.log(data);\r\n        if (true === data.data.success) {\r\n          this.tableData = data.data.data;\r\n\r\n        } else {\r\n          this.$message.error(\"获取接口失败\")\r\n        }\r\n      })\r\n    },\r\n\r\n\r\n\r\n    // 添加测试任务\r\n    openAddApiTestTask(){\r\n      this.opsType = 'add';\r\n      this.currentApiTestTaskId = 0;\r\n      this.currentApiTestTaskData = {};\r\n\r\n      this.showAddOrEditApiTestTask = true\r\n\r\n\r\n    },\r\n\r\n    // 编辑API测试任务\r\n    openEditApiTestTask(data){\r\n      this.opsType = 'edit';\r\n      this.currentApiTestTaskId = data.id;\r\n      this.currentApiTestTaskData = data;\r\n      console.log(data)\r\n\r\n      this.showAddOrEditApiTestTask = true;\r\n\r\n\r\n\r\n    },\r\n\r\n    //删除单个API测试任务\r\n    deleteApiTestTask(data){\r\n      this.apiTestTaskId = data.id\r\n      deleteSingleApiTestTaskRequest(this.apiTestTaskId).then(data => {\r\n        console.log(data)\r\n        if (true === data.data.success){\r\n          this.getApiTestTaskFun()\r\n          this.$message.success(\"删除API测试任务成功\")\r\n        }\r\n        else {\r\n          this.$message.error(\"删除API测试任务失败\")\r\n        }\r\n      })\r\n\r\n    },\r\n\r\n    //保存测试任务\r\n    saveApiTestTask(){\r\n      this.showAddOrEditApiTestTask = false\r\n      this.getApiTestTaskFun()\r\n\r\n\r\n    },\r\n\r\n    // 取消保存测试任务\r\n    cancelSaveApiTestTask(){\r\n      this.showAddOrEditApiTestTask = false\r\n      this.getApiTestTaskFun()\r\n\r\n    },\r\n\r\n    // 执行测试任务\r\n    performApiTestTask(data){\r\n\r\n      this.apiTestTaskId = data.id\r\n      postPerformApiTaskRequest(this.apiTestTaskId).then(data => {\r\n        console.log(data)\r\n        if (true === data.data.success){\r\n          this.getApiTestTaskFun()\r\n          this.$message.success(\"执行测试任务成功\")\r\n        }\r\n        else if(10200 === data.data.error.code.status){\r\n          this.$message.error(\"当前有API任务正在执行！\")\r\n\r\n        }\r\n        else {\r\n          this.$message.error(\"执行API测试任务失败\")\r\n        }\r\n      })\r\n    },\r\n\r\n    // 查看任务报告\r\n    reportApiTestTask(data){\r\n      this.currentApiTestTaskId = data.id;\r\n      this.currentApiTestTaskData = data;\r\n      console.log(data)\r\n      this.showApiTestTaskResult = true\r\n\r\n    },\r\n\r\n    // 返回项目列表\r\n    returnProjectList(){\r\n      this.$parent.returnProject();\r\n\r\n    },\r\n\r\n    // 返回项目列表\r\n    returnAPITaskList(){\r\n      this.showApiTestTaskResult = false\r\n      this.getApiTestTaskFun()\r\n    }\r\n\r\n\r\n  },\r\n  components: {\r\n    'add-or-edit-api-task': addOrEditApiTask,\r\n    'api-test-task-result': ApiTestTaskResult\r\n\r\n  },\r\n  created() {\r\n    if ('enter'=== this.type){\r\n      this.projectId = this.apiProjectId\r\n      this.getApiTestTaskFun()\r\n\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}