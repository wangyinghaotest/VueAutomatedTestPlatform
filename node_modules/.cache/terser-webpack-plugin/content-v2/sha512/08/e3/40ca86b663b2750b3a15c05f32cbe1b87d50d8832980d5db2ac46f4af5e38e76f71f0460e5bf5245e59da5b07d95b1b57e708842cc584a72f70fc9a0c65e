{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"login\"],{\"0290\":function(e,s,o){\"use strict\";o.r(s);var r=function(){var e=this,s=e.$createElement,o=e._self._c||s;return o(\"div\",{staticClass:\"login-wrap\"},[o(\"div\",{staticClass:\"ms-login\"},[o(\"div\",{staticClass:\"ms-title\"},[e._v(\"自动化测试平台\")]),o(\"el-form\",{ref:\"loginFormRef\",staticClass:\"ms-content\",attrs:{model:e.loginForm,rules:e.rules,\"label-width\":\"0px\"}},[o(\"el-form-item\",{attrs:{prop:\"username\"}},[o(\"el-input\",{attrs:{placeholder:\"username\"},model:{value:e.loginForm.username,callback:function(s){e.$set(e.loginForm,\"username\",s)},expression:\"loginForm.username\"}},[o(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-people\"},slot:\"prepend\"})],1)],1),o(\"el-form-item\",{attrs:{prop:\"password\"}},[o(\"el-input\",{attrs:{type:\"password\",placeholder:\"password\"},nativeOn:{keyup:function(s){return!s.type.indexOf(\"key\")&&e._k(s.keyCode,\"enter\",13,s.key,\"Enter\")?null:e.login(s)}},model:{value:e.loginForm.password,callback:function(s){e.$set(e.loginForm,\"password\",s)},expression:\"loginForm.password\"}},[o(\"el-button\",{attrs:{slot:\"prepend\",icon:\"el-icon-lx-lock\"},slot:\"prepend\"})],1)],1),o(\"div\",{staticClass:\"login-btn\"},[o(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.login}},[e._v(\"登录\")]),o(\"el-button\",{staticStyle:{\"margin-left\":\"0px\"},attrs:{type:\"danger\"},on:{click:e.register}},[e._v(\"注册\")])],1),e.showMessage?o(\"el-alert\",{attrs:{title:e.errorMessage,type:\"error\",center:\"\",\"show-icon\":\"\"},on:{close:e.closeMessage}}):e._e(),o(\"p\",{staticClass:\"login-tips\"},[e._v(\"Tips : 请填写用户名和密码。\")])],1)],1)])},t=[],n=o(\"2934\"),a=function(e){return Object(n[\"c\"])(\"api/backend/users/\",e)},l=function(e){return Object(n[\"d\"])(\"api/backend/users/\",e)},i={props:{},data:function(){return{showMessage:!1,errorMessage:\"错误\",loginForm:{username:\"\",password:\"\"},rules:{username:[{required:!0,message:\"请输入用户名\",trigger:\"blur\"},{min:1,max:30,message:\"长度在 1 到 30 个字符\",trigger:\"blur\"}],password:[{required:!0,message:\"请输入密码\",trigger:\"blur\"},{min:1,max:30,message:\"长度在 1 到 30 个字符\",trigger:\"blur\"}]}}},methods:{closeMessage:function(){this.showMessage=!1},login:function(){var e=this;console.log(this.$refs.loginFormRef),this.$refs.loginFormRef.validate((function(s){if(!s)return e.$message.error(\"请输入账号和密码\"),console.log(\"error submit!!\"),!1;a(e.loginForm).then((function(s){console.log(s),!0===s.data.success?(console.log(s.data.data.last_login),e.$message.success(\"登录成功\"),localStorage.setItem(\"ms_username\",e.loginForm.username),localStorage.setItem(\"last_login\",s.data.data.last_login),e.$router.push(\"/\")):(e.showMessage=!0,e.errorMessage=s.data.error.message)})).catch((function(e){console.log(e)}))}))},register:function(){var e=this;this.$refs.loginFormRef.validate((function(s){if(!s)return e.$message.error(\"请输入账号和密码\"),console.log(\"error submit!!\"),!1;l(e.loginForm).then((function(s){console.log(s),!0===s.data.success?e.$message.success(\"注册成功\"):(e.showMessage=!0,e.errorMessage=s.data.error.message)})).catch((function(e){console.log(e)}))}))}},created:function(){}},c=i,u=(o(\"8aee\"),o(\"2877\")),g=Object(u[\"a\"])(c,r,t,!1,null,\"72291a6b\",null);s[\"default\"]=g.exports},\"8aee\":function(e,s,o){\"use strict\";o(\"8ede\")},\"8ede\":function(e,s,o){}}]);","extractedComments":[]}