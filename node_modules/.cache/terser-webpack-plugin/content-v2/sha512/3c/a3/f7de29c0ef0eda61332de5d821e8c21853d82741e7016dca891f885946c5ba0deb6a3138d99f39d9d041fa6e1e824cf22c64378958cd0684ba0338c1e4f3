{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"apiProjectTestCase\"],{\"2aa0\":function(e,t,a){\"use strict\";a.d(t,\"c\",(function(){return i})),a.d(t,\"a\",(function(){return r})),a.d(t,\"d\",(function(){return n})),a.d(t,\"e\",(function(){return o})),a.d(t,\"b\",(function(){return l}));var s=a(\"2934\"),i=function(){return Object(s[\"c\"])(\"api/backend/api_environment/list/\")},r=function(e){return Object(s[\"e\"])(\"api/backend/api_environment/\",e)},n=function(e){return Object(s[\"c\"])(\"api/backend/api_environment/\"+e+\"/\")},o=function(e,t){return Object(s[\"d\"])(\"api/backend/api_environment/\"+e+\"/\",t)},l=function(e){return Object(s[\"a\"])(\"api/backend/api_environment/\"+e+\"/\")}},\"34b1\":function(e,t,a){},\"4e41\":function(e,t,a){\"use strict\";a.d(t,\"c\",(function(){return i})),a.d(t,\"a\",(function(){return r})),a.d(t,\"d\",(function(){return n})),a.d(t,\"e\",(function(){return o})),a.d(t,\"b\",(function(){return l}));var s=a(\"2934\"),i=function(){return Object(s[\"c\"])(\"api/backend/api_project/list/\")},r=function(e){return Object(s[\"e\"])(\"api/backend/api_project/\",e)},n=function(e){return Object(s[\"c\"])(\"api/backend/api_project/\"+e+\"/\")},o=function(e,t){return Object(s[\"d\"])(\"api/backend/api_project/\"+e+\"/\",t)},l=function(e){return Object(s[\"a\"])(\"api/backend/api_project/\"+e+\"/\")}},\"931a\":function(e,t,a){\"use strict\";a.d(t,\"c\",(function(){return i})),a.d(t,\"a\",(function(){return r})),a.d(t,\"d\",(function(){return n})),a.d(t,\"f\",(function(){return o})),a.d(t,\"b\",(function(){return l})),a.d(t,\"e\",(function(){return p}));var s=a(\"2934\"),i=function(){return Object(s[\"c\"])(\"api/backend/api_database/list/\")},r=function(e){return Object(s[\"e\"])(\"api/backend/api_database/\",e)},n=function(e){return Object(s[\"c\"])(\"api/backend/api_database/\"+e+\"/\")},o=function(e,t){return Object(s[\"d\"])(\"api/backend/api_database/\"+e+\"/\",t)},l=function(e){return Object(s[\"a\"])(\"api/backend/api_database/\"+e+\"/\")},p=function(e){return Object(s[\"d\"])(\"api/backend/api_debug_database/\",e)}},\"9c08\":function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return i})),a.d(t,\"c\",(function(){return r})),a.d(t,\"e\",(function(){return n})),a.d(t,\"b\",(function(){return o})),a.d(t,\"d\",(function(){return l}));var s=a(\"2934\"),i=function(e){return Object(s[\"e\"])(\"api/backend/api_module/\",e)},r=function(e){return Object(s[\"c\"])(\"api/backend/api_module/\"+e+\"/\")},n=function(e,t){return Object(s[\"d\"])(\"api/backend/api_module/\"+e+\"/\",t)},o=function(e){return Object(s[\"a\"])(\"api/backend/api_module/\"+e+\"/\")},l=function(e,t,a){return Object(s[\"c\"])(\"api/backend/api_project/api_module/\"+e+\"/\"+t+\"/\"+a+\"/\")}},a1bc:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[e.showApiTestCaseModule?a(\"api-test-case-module\",{attrs:{type:e.opsType,apiProjectId:e.currentApiProjectId}}):a(\"div\",[a(\"div\",{staticClass:\"crumbs\"},[a(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[a(\"el-breadcrumb-item\",[a(\"i\",{staticClass:\"el-icon-lx-calendar\"}),e._v(\" API项目 \")]),a(\"el-breadcrumb-item\",[e._v(\"API项目\")])],1)],1),a(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:e.tableData}},[a(\"el-table-column\",{attrs:{prop:\"id\",label:\"id\",sortable:\"\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"api_project_name\",label:\"API项目名称\",sortable:\"\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"describe\",label:\"项目描述\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"updata_time\",label:\"更新时间\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"create_time\",label:\"创建时间\",width:\"180\"}}),a(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(a){return e.enterApiProjectTestCase(t.row)}}},[e._v(\"进入\")])]}}])})],1)],1)],1)},i=[],r=a(\"4e41\"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[e.showAddOrEditApiTestCase?a(\"api-test-case\",{attrs:{type:e.opsType,apiModuleId:e.currentApiModuleId,apiTestCaseProjectId:e.currentApiProjectId}}):a(\"div\",[a(\"div\",{staticClass:\"crumbs\"},[a(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[a(\"el-breadcrumb-item\",[a(\"i\",{staticClass:\"el-icon-lx-calendar\"}),e._v(\" API项目 \")]),a(\"el-breadcrumb-item\",[e._v(\"API模块\")])],1)],1),a(\"el-row\",[a(\"el-button\",{on:{click:e.returnAPIProjectList}},[e._v(\"返回\")])],1),a(\"div\",[a(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:e.tableData}},[a(\"el-table-column\",{attrs:{prop:\"id\",label:\"id\",sortable:\"\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"api_project_name\",label:\"API项目名称\",sortable:\"\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"api_module_name\",label:\"API模块名称\",sortable:\"\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"updata_time\",label:\"更新时间\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"create_time\",label:\"创建时间\",width:\"180\"}}),a(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(a){return e.enterApiTestCaseModule(t.row)}}},[e._v(\"进入\")])]}}])})],1),a(\"el-pagination\",{attrs:{\"current-page\":e.currentPage,\"page-sizes\":[10,20,30,40,50],\"page-size\":e.size_page,layout:\"total, sizes, prev, pager, next, jumper\",total:e.total_module},on:{\"size-change\":e.handleSizeChange,\"current-change\":e.handleCurrentChange}})],1)],1)],1)},o=[],l=a(\"9c08\"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[e.showAddOrEditApiTestCase?a(\"add-or-edit-api-test-case\",{attrs:{type:e.opsType,apiTestCaseId:e.currentApiTestCaseId,apiTestCaseData:e.currentApiTestCaseData,apiModuleId:e.currentApiModuleId},on:{saveApiTestCase:e.saveApiTestCase,cancelSaveApiTestCase:e.cancelSaveApiTestCase}}):a(\"div\",[a(\"div\",{staticClass:\"crumbs\"},[a(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[a(\"el-breadcrumb-item\",[a(\"i\",{staticClass:\"el-icon-lx-calendar\"}),e._v(\" API项目 \")]),a(\"el-breadcrumb-item\",[e._v(\"API模块\")]),a(\"el-breadcrumb-item\",[e._v(\"API测试用例\")])],1)],1),a(\"el-row\",[a(\"el-button\",{on:{click:e.returnAPIModuleList}},[e._v(\"返回\")]),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.openAddPageElement}},[e._v(\"创建API测试用例\")]),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.uploadTestCasesElement}},[e._v(\"上传测试用例\")])],1),e.uploadTestCase?a(\"el-dialog\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],attrs:{\"element-loading-text\":\"拼命加载中\",\"element-loading-spinner\":\"el-icon-loading\",\"element-loading-background\":\"rgba(0, 0, 0, 0.8)\",title:\"上传测试用例\",visible:e.showUploadTestCasesFrom,\"close-on-press-escape\":!1,\"close-on-click-modal\":!1,\"show-close\":!1},on:{\"update:visible\":function(t){e.showUploadTestCasesFrom=t}}},[a(\"el-upload\",{ref:\"my-upload\",attrs:{drag:\"\",action:e.UploadApiTestCaseUrl(),\"list-type\":\"text\",accept:\".xlsx\",\"show-file-list\":!0,\"on-success\":e.onSuccess,\"on-error\":e.onError,\"on-change\":e.handleChange,\"on-preview\":e.handlePreview,\"on-remove\":e.handleRemove,\"before-remove\":e.beforeRemove,multiple:!1,\"on-exceed\":e.handleExceed}},[a(\"i\",{staticClass:\"el-icon-upload\"}),a(\"div\",{staticClass:\"el-upload__text\"},[e._v(\"将文件拖到此处，或\"),a(\"em\",[e._v(\"点击上传\")])]),a(\"div\",{staticClass:\"el-upload__tip\",attrs:{slot:\"tip\"},slot:\"tip\"},[e._v(\"只能上传xlsx文件，且不超过500kb\")])]),a(\"el-tag\",{staticStyle:{\"margin-top\":\"20px\"},attrs:{type:\"danger\"}},[e._v(\"以下是上传异常，需重新上传（如存在异常则需全部重新上传）\")]),a(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:e.uploadCaseTableData}},[a(\"el-table-column\",{attrs:{prop:\"api_project_name\",label:\"项目名称\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"api_module_name\",label:\"模块名称\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"test_case_name\",label:\"用例名称\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"api_url\",label:\"URL\"}}),a(\"el-table-column\",{attrs:{prop:\"error_reason\",label:\"失败原因\"}})],1),a(\"div\",{staticStyle:{\"margin-top\":\"30px\"}},[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.uploadCase}},[e._v(\"立即上传\")]),a(\"el-button\",{on:{click:e.testCaseExcelCancel}},[e._v(\"关闭弹窗\")])],1)],1):e._e(),a(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:e.tableData}},[a(\"el-table-column\",{attrs:{prop:\"id\",label:\"id\",sortable:\"\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"api_module_name\",label:\"API模块\",sortable:\"\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"api_test_case_name\",label:\"API测试用例\",sortable:\"\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"api_test_case_url\",label:\"API_URL\",sortable:\"\",width:\"500\"}}),a(\"el-table-column\",{attrs:{prop:\"updata_time\",label:\"更新时间\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"create_time\",label:\"创建时间\",width:\"180\"}}),a(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(a){return e.openEditApiTestCase(t.row)}}},[e._v(\"编辑\")]),a(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(a){return e.deleteApiTestCasePopup(t.row)}}},[e._v(\"删除\")])]}}])})],1)],1)],1)},c=[],d=(a(\"7f7f\"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"div\",{staticClass:\"crumbs\"},[a(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[a(\"el-breadcrumb-item\",[a(\"i\",{staticClass:\"el-icon-lx-calendar\"}),e._v(\" API项目 \")]),a(\"el-breadcrumb-item\",[e._v(\"API模块\")]),a(\"el-breadcrumb-item\",[e._v(\"API测试用例\")])],1)],1),a(\"el-form\",{ref:\"apiTestCaseFormRef\",attrs:{model:e.apiTestCaseForm,\"label-width\":\"120px\",size:\"medium\"}},[a(\"el-form-item\",{attrs:{label:\"API测试用例\"}},[a(\"el-input\",{staticClass:\"api_test_case_name\",model:{value:e.apiTestCaseForm.api_test_case_name,callback:function(t){e.$set(e.apiTestCaseForm,\"api_test_case_name\",t)},expression:\"apiTestCaseForm.api_test_case_name\"}})],1),a(\"el-form-item\",{attrs:{label:\"API接口文档地址\"}},[a(\"el-input\",{staticClass:\"api_documentation\",model:{value:e.apiTestCaseForm.api_documentation,callback:function(t){e.$set(e.apiTestCaseForm,\"api_documentation\",t)},expression:\"apiTestCaseForm.api_documentation\"}})],1),a(\"el-form-item\",{attrs:{label:\"域名\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择域名\",id:\"selectApiEnvironment\"},on:{change:e.getSelectApiEnvironmentFun},model:{value:e.api_environment,callback:function(t){e.api_environment=t},expression:\"api_environment\"}},e._l(e.environmentSelect,(function(e){return a(\"el-option\",{key:e.id,attrs:{value:e.id,label:e.api_environment_name}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"请求地址\"}},[a(\"el-input\",{staticClass:\"input-with-select\",attrs:{placeholder:\"请输入请求地址\"},model:{value:e.apiTestCaseForm.api_url,callback:function(t){e.$set(e.apiTestCaseForm,\"api_url\",t)},expression:\"apiTestCaseForm.api_url\"}},[a(\"el-select\",{staticClass:\"address\",attrs:{slot:\"prepend\",placeholder:\"请选择\"},slot:\"prepend\",model:{value:e.api_method,callback:function(t){e.api_method=t},expression:\"api_method\"}},e._l(e.api_method_options,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)],1),a(\"el-button\",{on:{click:e.SendRequest}},[e._v(\"发送请求\")]),a(\"el-drawer\",{attrs:{title:\"请求结果!\",visible:e.drawer,size:\"60%\"},on:{\"update:visible\":function(t){e.drawer=t}}},[a(\"el-tabs\",{staticStyle:{height:\"300px\",width:\"1620px\",\"margin-left\":\"8px\"}},[a(\"el-tab-pane\",{attrs:{label:\"请求信息\"}},[a(\"el-collapse\",{staticStyle:{height:\"400px\",width:\"500px\"},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:\"activeNames\"}},[a(\"el-collapse-item\",{attrs:{title:\"请求地址\"}},[a(\"p\",[e._v(e._s(e.requestsForm.requests_url))])]),a(\"el-collapse-item\",{staticStyle:{width:\"500px\"},attrs:{title:\"headers\",name:\"2\"}},[a(\"json-viewer\",{staticStyle:{\"overflow-y\":\"auto\",position:\"absolute\",width:\"500px\",height:\"100%\"},attrs:{value:e.requestsForm.requests_headers,\"expand-depth\":5,copyable:\"\"}})],1),a(\"el-collapse-item\",{staticStyle:{width:\"500px\"},attrs:{title:\"body\",name:\"3\"}},[a(\"json-viewer\",{staticStyle:{\"overflow-y\":\"auto\",position:\"absolute\",width:\"500px\",height:\"100%\"},attrs:{value:e.requestsForm.requests_payload,\"expand-depth\":5,copyable:\"\"}})],1)],1)],1),a(\"el-tab-pane\",{attrs:{label:\"响应信息\"}},[a(\"el-collapse\",{staticStyle:{height:\"500px\",width:\"500px\"},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:\"activeNames\"}},[a(\"el-collapse-item\",{staticStyle:{width:\"500px\"},attrs:{title:\"响应结果\",name:\"1\"}},[a(\"json-viewer\",{staticStyle:{\"overflow-y\":\"auto\",position:\"absolute\",width:\"500px\",height:\"100%\"},attrs:{value:e.requestsForm.response_message,\"expand-depth\":5,copyable:\"\"}})],1),a(\"el-collapse-item\",{staticStyle:{width:\"500px\"},attrs:{title:\"响应时间\",name:\"2\"}},[a(\"p\",[e._v(e._s(e.requestsForm.response_time))])]),a(\"el-collapse-item\",{staticStyle:{width:\"500px\"},attrs:{title:\"状态码\",name:\"3\"}},[a(\"p\",[e._v(e._s(e.requestsForm.requests_status_code))])])],1)],1),a(\"el-tab-pane\",{attrs:{label:\"断言结果\"}},[a(\"el-collapse\",{staticStyle:{width:\"500px\"},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:\"activeNames\"}},[a(\"el-collapse-item\",{attrs:{title:\"断言结果\",name:\"1\"}},[a(\"p\",[e._v(e._s(e.requestsForm.api_assert))])])],1)],1),a(\"el-tab-pane\",{attrs:{label:\"参数提取\"}},[a(\"el-collapse\",{staticStyle:{width:\"500px\"},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:\"activeNames\"}},[a(\"el-collapse-item\",{attrs:{title:\"参数提取\",name:\"1\"}},[a(\"json-viewer\",{attrs:{value:e.requestsForm.api_variable_results,\"expand-depth\":5}})],1)],1)],1)],1)],1)],1),a(\"el-form-item\",{attrs:{label:\"请求参数\"}},[a(\"el-tabs\",{staticStyle:{height:\"300px\",width:\"1500px\",\"margin-left\":\"0px\"},attrs:{\"tab-position\":e.tabPosition}},[a(\"el-tab-pane\",{attrs:{label:\"Header请求头\"}},[a(\"el-input\",{staticStyle:{\"min-height\":\"31px\",width:\"532px\",height:\"212px\"},attrs:{type:\"textarea\",placeholder:\"请输入JSON格式参数\",rows:10},model:{value:e.apiTestCaseForm.api_headers,callback:function(t){e.$set(e.apiTestCaseForm,\"api_headers\",t)},expression:\"apiTestCaseForm.api_headers\"}})],1),a(\"el-tab-pane\",{attrs:{label:\"Params\"}},[a(\"div\",[a(\"el-table\",{staticStyle:{width:\"70%\"},attrs:{data:e.apiParameterData}},[a(\"el-table-column\",{attrs:{prop:\"api_parameter_name\",label:\"参数名称\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{placeholder:\"\",\"controls-position\":\"right\"},model:{value:t.row.api_parameter_name,callback:function(a){e.$set(t.row,\"api_parameter_name\",a)},expression:\"scope.row.api_parameter_name\"}})]}}])}),a(\"el-table-column\",{attrs:{prop:\"api_must_parameter\",label:\"必填\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-switch\",{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\",\"active-value\":\"true\",\"inactive-value\":\"false\"},on:{change:function(a){return e.api_must_switch(a,t.row.api_must_parameter)}},model:{value:t.row.api_must_parameter,callback:function(a){e.$set(t.row,\"api_must_parameter\",a)},expression:\"scope.row.api_must_parameter\"}})]}}])}),a(\"el-table-column\",{attrs:{prop:\"api_parameter_value\",label:\"参数值\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{placeholder:\"\",\"controls-position\":\"right\"},model:{value:t.row.api_parameter_value,callback:function(a){e.$set(t.row,\"api_parameter_value\",a)},expression:\"scope.row.api_parameter_value\"}})]}}])}),a(\"el-table-column\",{attrs:{prop:\"api_field_describe\",label:\"字段描述\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{placeholder:\"\",\"controls-position\":\"right\"},model:{value:t.row.api_field_describe,callback:function(a){e.$set(t.row,\"api_field_describe\",a)},expression:\"scope.row.api_field_describe\"}})]}}])}),a(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{on:{click:e.AddParameterRow}},[e._v(\"添加行\")]),a(\"el-button\",{staticStyle:{width:\"68px\",\"padding-top\":\"9px\",\"padding-bottom\":\"9px\",\"margin-left\":\"10px\"},attrs:{size:\"mini\",type:\"danger\"},on:{click:function(a){return e.DeleteParameter(t.$index,e.apiParameterData)}}},[e._v(\"删除\")])]}}])})],1)],1)]),a(\"el-tab-pane\",{staticStyle:{width:\"500px\"},attrs:{label:\"Body\"}},[a(\"div\",[a(\"el-radio-group\",{on:{change:function(t){return e.radioChange(t,e.apiTestCaseForm.api_parameter_types)}},model:{value:e.apiTestCaseForm.api_parameter_types,callback:function(t){e.$set(e.apiTestCaseForm,\"api_parameter_types\",t)},expression:\"apiTestCaseForm.api_parameter_types\"}},[a(\"el-radio\",{attrs:{label:1,value:\"1\"}},[e._v(\"form-data\")]),a(\"el-radio\",{attrs:{label:2,value:\"2\"}},[e._v(\"JSON\")]),a(\"el-radio\",{attrs:{label:3,value:\"3\"}},[e._v(\"x-www-form-urlencoded\")]),a(\"el-radio\",{attrs:{label:4,value:\"4\"}},[e._v(\"none\")])],1)],1),a(\"div\",{staticStyle:{\"min-height\":\"31px\",width:\"532px\",height:\"212px\",top:\"10px\"}},[a(\"el-input\",{staticStyle:{\"min-height\":\"32px\",\"margin-top\":\"10px\"},attrs:{type:\"textarea\",placeholder:\"请输入JSON格式参数\",rows:10},model:{value:e.apiTestCaseForm.api_parameter_body,callback:function(t){e.$set(e.apiTestCaseForm,\"api_parameter_body\",t)},expression:\"apiTestCaseForm.api_parameter_body\"}})],1)]),a(\"el-tab-pane\",{attrs:{label:\"断言\"}},[a(\"div\",[a(\"el-table\",{staticStyle:{width:\"45%\"},attrs:{data:e.assertionsData,\"max-height\":\"200\"}},[a(\"el-table-column\",{attrs:{prop:\"api_assert_type\",label:\"断言类型\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:t.row.api_assert_type,callback:function(a){e.$set(t.row,\"api_assert_type\",a)},expression:\"scope.row.api_assert_type\"}},e._l(e.api_assert_type_options,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)]}}])}),a(\"el-table-column\",{attrs:{label:\"数据库\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-select\",{attrs:{placeholder:\"请选择数据库\",clearable:!0},on:{change:e.getSelectDatabaseFun},model:{value:t.row.database_options,callback:function(a){e.$set(t.row,\"database_options\",a)},expression:\"scope.row.database_options\"}},e._l(e.database_options,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.api_database_title,value:e.id}})})),1)]}}])}),a(\"el-table-column\",{attrs:{prop:\"database_sql\",label:\"数据库语句\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{\"controls-position\":\"right\"},model:{value:t.row.database_sql,callback:function(a){e.$set(t.row,\"database_sql\",a)},expression:\"scope.row.database_sql\"}})]}}])}),a(\"el-table-column\",{attrs:{prop:\"api_assert_text\",label:\"断言(Value)\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{\"controls-position\":\"right\"},model:{value:t.row.api_assert_text,callback:function(a){e.$set(t.row,\"api_assert_text\",a)},expression:\"scope.row.api_assert_text\"}})]}}])})],1)],1)]),a(\"el-tab-pane\",{attrs:{label:\"参数提取\"}},[a(\"div\",[a(\"el-table\",{staticStyle:{width:\"90%\"},attrs:{data:e.apiParameterExtractionData,\"max-height\":\"200\"}},[a(\"el-table-column\",{attrs:{prop:\"api_value_variable\",label:\"提取表达式\",width:\"500\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{staticStyle:{width:\"453px\"},attrs:{placeholder:\"请用 英文‘点’逐层 '.' \",\"controls-position\":\"right\"},model:{value:t.row.api_value_variable,callback:function(a){e.$set(t.row,\"api_value_variable\",a)},expression:\"scope.row.api_value_variable\"}})]}}])}),a(\"el-table-column\",{attrs:{prop:\"api_key_variable\",label:\"变量名称\",width:\"500\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{staticStyle:{width:\"453px\"},attrs:{placeholder:\"请用  ${xxx}  命名\",\"controls-position\":\"right\"},model:{value:t.row.api_key_variable,callback:function(a){e.$set(t.row,\"api_key_variable\",a)},expression:\"scope.row.api_key_variable\"}})]}}])}),a(\"el-table-column\",{attrs:{prop:\"api_variable_results\",label:\"变量结果\",width:\"250px\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{staticStyle:{width:\"200px\"},attrs:{placeholder:\"变量结果\",\"controls-position\":\"right\"},model:{value:t.row.api_variable_results,callback:function(a){e.$set(t.row,\"api_variable_results\",a)},expression:\"scope.row.api_variable_results\"}})]}}])}),a(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{on:{click:e.AddParameterExtractionRow}},[e._v(\"添加行\")]),a(\"el-button\",{staticStyle:{\"margin-left\":\"0px\",\"margin-right\":\"13px\",\"padding-right\":\"28px\",\"text-align\":\"center\"},attrs:{size:\"mini\",type:\"danger\"},on:{click:function(a){return e.DeleteParameterExtraction(t.$index,e.apiParameterExtractionData)}}},[e._v(\"删除\")])]}}])})],1)],1)])],1)],1),a(\"el-form-item\",{attrs:{size:\"large\"}},[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.saveApiTestCase}},[e._v(\"保存\")]),a(\"el-button\",{on:{click:e.cancelSaveApiTestCase}},[e._v(\"取消\")])],1)],1)],1)}),u=[],_=(a(\"8e6e\"),a(\"ac6a\"),a(\"456d\"),a(\"ade3\")),m=a(\"2aa0\"),b=a(\"931a\"),h=a(\"2934\"),f=function(e){return Object(h[\"d\"])(\"api/backend/api_test_case/list/\"+e+\"/\")},v=function(e){return Object(h[\"e\"])(\"api/backend/api_test_case/\",e)},g=function(e){return Object(h[\"c\"])(\"api/backend/api_test_case/\"+e+\"/\")},x=function(e,t){return Object(h[\"d\"])(\"api/backend/api_test_case/\"+e+\"/\",t)},w=function(e){return Object(h[\"a\"])(\"api/backend/api_test_case/\"+e+\"/\")},C=function(e){return Object(h[\"d\"])(\"api/backend/api_test_case/debug/\",e)},y=function(e){return Object(h[\"e\"])(\"api/backend/api_test_case/upload_api_case_import/\",e)},T=a(\"2b0e\"),A=a(\"349e\"),k=a.n(A);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){Object(_[\"a\"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}T[\"default\"].use(k.a);var j={name:\"addOrEditApiTestCase\",props:[\"type\",\"apiTestCaseId\",\"apiTestCaseData\",\"apiModuleId\"],data:function(){return{drawer:!1,gridData:[],api_method_options:[{text:\"GET\",value:1},{text:\"POST\",value:2},{text:\"PUT\",value:3},{text:\"DELETE\",value:4}],api_method:\"\",api_module_id:\"\",api_assert_type_options:[{text:\"包含\",value:1},{text:\"匹配\",value:2},{text:\"数据库校验\",value:3},{text:\"状态码\",value:4}],database_options:[],api_environment:\"\",api_environment_options:[{api_environment_describe:\"\",api_environment_name:\"\",api_title:\"\",id:\"\"}],requestsForm:{requests_url:\"\",requests_headers:\"\",requests_payload:\"null\",requests_status_code:\"\",response_message:\"null\",response_time:\"\",api_assert:\"null\",api_assert_type:\"\",api_variable_results:[{api_variable_results:\"\"}]},apiTestCaseForm:{api_test_case_name:\"\",api_documentation:\"\",api_url:\"\",api_parameter_types:2,api_headers:'{\"Content-Type\": \"application/json\",\\n\"authorization\": \"Bearer ${Token}\"\\n}',api_parameter_body:\"{}\",api_parameter:\"{}\",api_test_case_id:\"\"},tabPosition:\"top\",environmentSelect:[],assertionsData:[{api_assert_type:4,api_assert_text:\"200\",database_sql:\"\",database_options:\"\"}],api_assert_text:\"\",apiParameterExtractionData:[{api_value_variable:\"\",api_key_variable:\"\",api_variable_results:\"\"}],apiParameterData:[{api_parameter_name:\"\",api_must_parameter:\"\",api_parameter_value:\"\",api_field_describe:\"\"}],activeNames:\"\"}},methods:{radioChange:function(e){console.log(e)},saveApiTestCase:function(){\"add\"===this.type?this.addApiTestCase():this.editApiTestCase()},api_must_switch:function(e,t){console.log(t)},cancelSaveApiTestCase:function(){this.$parent.cancelSaveApiTestCase()},addApiTestCase:function(){var e=this,t=JSON.parse(JSON.stringify(this.apiTestCaseForm));t.api_method=this.api_method,t.api_assert_type=this.assertionsData[0].api_assert_type,t.api_assert_text=this.assertionsData[0].api_assert_text,t.database_sql=this.assertionsData[0].database_sql,t.dataBase_id=this.assertionsData[0].database_options,t.api_parameter_extraction=this.apiParameterExtractionData,t.api_environment_id=this.api_environment,t.api_module_id=this.apiModuleId,t.api_parameter=this.apiParameterData,this.$refs.apiTestCaseFormRef.validate((function(a){if(console.log(e.$refs.apiTestCaseFormRef.validate(a)),!a)return!1;v(t).then((function(t){console.log(t),!0===t.data.success?(e.$message.success(\"添加Api测试用例成功\"),e.$parent.saveApiTestCase()):e.$message.error(t.data.error.message)}))}))},editApiTestCase:function(){var e=this,t=JSON.parse(JSON.stringify(this.apiTestCaseForm));t.api_method=this.api_method,t.api_assert_type=this.assertionsData[0].api_assert_type,t.api_assert_text=this.assertionsData[0].api_assert_text,t.api_assert_text=this.assertionsData[0].api_assert_text,t.database_sql=this.assertionsData[0].database_sql,t.dataBase_id=this.assertionsData[0].database_options,t.api_environment_id=this.api_environment,t.api_module_id=this.api_module_id,t.api_parameter_extraction=this.apiParameterExtractionData,t.api_parameter=this.apiParameterData,console.log(\"这是获取到的xxxxxxxxxxxxxxxx\",t),this.$refs.apiTestCaseFormRef.validate((function(a){if(!a)return!1;x(e.apiTestCaseData.id,t).then((function(t){!0===t.data.success?(e.$message.success(\"编辑Api测试用例成功\"),e.$parent.saveApiTestCase()):e.$message.error(t.data.error.message)}))}))},getSingleApiTestCaseFun:function(){var e=this;g(this.apiTestCaseForm.api_test_case_id).then((function(t){if(!0===t.data.success){var a=t.data.data,s=t.data.data.api_parameter_extraction,i=t.data.data.api_parameter;e.apiTestCaseForm=S({},a),e.api_method=t.data.data.api_method,0===i.length?console.log(i.length):e.apiParameterData=i,e.assertionsData=[{api_assert_type:a.api_assert_type,api_assert_text:a.api_assert_text,database_sql:a.database_sql,database_options:a.dataBase}],0===s.length?console.log(s.length):e.apiParameterExtractionData=JSON.parse(JSON.stringify(s)),e.database_id=a.database,e.database_sql=t.data.data.database_sql,e.api_environment=t.data.data.api_environment,e.api_module_id=t.data.data.api_module}else e.$message.error(\"获取接口失败\")}))},getSelectDatabaseFun:function(){var e=this;Object(b[\"c\"])().then((function(t){!0===t.data.success?e.database_options=t.data.data:e.$message.error(\"获取接口失败\")}))},getSelectApiEnvironmentFun:function(){var e=this;Object(m[\"c\"])().then((function(t){!0===t.data.success?e.environmentSelect=t.data.data:e.$message.error(\"获取接口失败\")}))},AddParameterExtractionRow:function(e,t){this.apiParameterExtractionData.push({api_value_variable:\"\",api_key_variable:\"\",api_variable_results:\"\"})},AddParameterRow:function(e,t){this.apiParameterData.push({api_parameter_name:\"\",api_must_parameter:!1,api_parameter_value:\"\",api_field_describe:\"\"})},DeleteParameterExtraction:function(e,t){1===this.apiParameterExtractionData.length?this.$message.error(\"至少保留一行\"):t.splice(e,1)},DeleteParameter:function(e,t){1===this.apiParameterData.length?(console.log(this.apiParameterData.length),this.$message.error(\"至少保留一行\")):t.splice(e,1)},SendRequest:function(){var e=this,t=JSON.parse(JSON.stringify(this.apiTestCaseForm));t.api_method=this.api_method,t.api_assert_type=this.assertionsData[0].api_assert_type,t.api_assert_text=this.assertionsData[0].api_assert_text,t.api_environment_id=this.api_environment,t.api_parameter_extraction=this.apiParameterExtractionData,t.api_parameter=this.apiParameterData,C(t).then((function(t){!0===t.data.success&&(e.$message.success(\"调试Api测试用例成功\"),e.jsonData=t.data.data.response_message,e.requestsForm.requests_url=t.data.data.api_url,e.requestsForm.requests_headers=t.data.data.api_header,e.requestsForm.requests_payload=t.data.data.api_body,e.requestsForm.requests_status_code=t.data.data.api_code,e.requestsForm.response_message=e.jsonData,e.requestsForm.response_time=t.data.data.response_time,e.requestsForm.api_assert=t.data.data.api_assert,e.requestsForm.api_variable_results=t.data.data.api_parameter_extraction,e.apiParameterExtractionData=e.requestsForm.api_variable_results),!1===t.data.success&&e.$message.error(t.data.error.message)})),this.drawer=!0},handleClose:function(e){this.$confirm(\"确认关闭？\").then((function(t){e()})).catch((function(e){}))}},created:function(){console.log(this.apiTestCaseData),\"edit\"===this.type&&(this.getSelectApiEnvironmentFun(),this.getSelectDatabaseFun(),this.apiTestCaseForm.api_test_case_id=this.apiTestCaseData.id,this.getSingleApiTestCaseFun()),\"add\"===this.type&&(this.getSelectApiEnvironmentFun(),this.getSelectDatabaseFun(),console.log(\"这是模块id\",this.apiModuleId))}},O=j,I=(a(\"c856\"),a(\"2877\")),D=Object(I[\"a\"])(O,d,u,!1,null,\"3142dc64\",null),F=D.exports,$={name:\"ApiTestCase\",props:[\"type\",\"apiModuleId\",\"apiTestCaseProjectId\"],inject:[\"reload\"],data:function(){return{loading:!1,num:1,content:[],uploadTestCase:!1,fileList:[{}],fileDataList:[{}],tableData:[],uploadCaseTableData:[],moduleId:\"\",upload_case_address_name:\"\",currentApiTestCaseId:0,currentApiModuleId:0,currentApiTestCaseData:0,showAddOrEditApiTestCase:!1,showUploadTestCasesFrom:!1,uploadTestCasesFrom:{}}},mounted:function(){},methods:{onSubumit:function(){this.content=[],this.webSocket()},webSocket:function(){var e=this;if(\"undefined\"==typeof WebSocket)this.$notify({title:\"提示\",message:\"当前浏览器无法接收实时报警信息，请使用谷歌浏览器！\",type:\"warning\",duration:0});else{var t=\"ws://127.0.0.1:8000/wx/\";this.socket=new WebSocket(t),this.socket.onopen=function(){console.log(\"浏览器WebSocket已打开\"),e.socket.send(JSON.stringify({upload_case_address_name:\"2022-03-25-11-31-46-72-testcase.xlsx\",withCredentials:!0}))},this.socket.onmessage=function(t){e.content.push({info:t.data})},this.socket.onerror=function(){e.$notify({title:\"错误\",message:\"服务器错误，无法接收实时报警信息\",type:\"error\",duration:0})},this.socket.onclose=function(){console.log(\"WebSocket已关闭\")}}},uploadCase:function(e){var t=this,a={};a.upload_case_address_name=this.upload_case_address_name,this.loading=!0,y(a).then((function(e){!0===e.data.success?(console.log(e),t.loading=!1,t.$message.success(\"上传成功\")):3e3===e.data.error.code?(t.loading=!1,t.$message.error(e.data.error.message.error_reason),t.uploadCaseTableData=e.data.error.message.upload_results_list):(e.data.error.code,t.loading=!1,t.$message.error(e.data.error.message))}))},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleDataPreview:function(e){console.log(e)},handleDataRemove:function(e,t){console.log(e,t)},handleExceed:function(e,t){this.$message.warning(\"当前限制选择 1 个文件，本次选择了 \".concat(e.length,\" 个文件，共选择了 \").concat(e.length+t.length,\" 个文件\"))},onSuccess:function(e){console.log(this.fileList),this.$alert(e.data.result,\"提示\",{confirmButtonText:\"确定\",callback:function(e){console.log(\"上传成功\")}});var t=e.data.file,a=t.lastIndexOf(\"/\");this.upload_case_address_name=t.substring(a+1,t.length)},beforeRemove:function(e,t){return this.$confirm(\"确定移除 \".concat(e.name,\"？\"))},beforeDataRemove:function(e,t){return this.$confirm(\"确定移除 \".concat(e.name,\"？\"))},handleChange:function(e,t){this.fileList=t.slice(-1),t.length>1&&t.splice(0,1)},onError:function(e){console.log(\"失败的回调\"+JSON.stringify(e)),this.$alert(\"创建失败\",\"提示\",{confirmButtonText:\"确定\",callback:function(e){console.log(\"上传失败\")}})},onDataError:function(e){console.log(\"失败的回调\"+JSON.stringify(e)),this.$alert(\"创建失败\",\"提示\",{confirmButtonText:\"确定\",callback:function(e){console.log(\"上传失败\")}})},UploadApiTestCaseUrl:function(){return h[\"b\"]+\"api/backend/api_test_case/upload_test_cases/\"},testCaseExcelCancel:function(){this.showUploadTestCasesFrom=!1,this.uploadTestCase=!1,this.$refs[\"my-upload\"].clearFiles(),this.uploadCaseTableData=[],this.getApiTestCaseFun()},openAddPageElement:function(){this.opsType=\"add\",this.currentApiModuleId=this.moduleId,this.currentApiTestCaseId=0,this.currentApiTestCaseData={},this.showAddOrEditApiTestCase=!0},uploadTestCasesElement:function(){this.showUploadTestCasesFrom=!0,this.uploadTestCase=!0},openEditApiTestCase:function(e){this.opsType=\"edit\",this.currentApiTestCaseId=e.id,this.currentApiTestCaseData=e,console.log(e),this.showAddOrEditApiTestCase=!0},saveApiTestCase:function(){this.showAddOrEditApiTestCase=!1,this.getApiTestCaseFun()},cancelSaveApiTestCase:function(){this.showAddOrEditApiTestCase=!1,this.getApiTestCaseFun()},getApiTestCaseFun:function(){var e=this;f(this.moduleId).then((function(t){console.log(\"这是api测试用例\",t),!0===t.data.success?e.tableData=t.data.data:e.$message.error(\"获取接口失败\")}))},deleteApiTestCasePopup:function(e){var t=this;this.apiTestCaseId=e.id,w(this.apiTestCaseId).then((function(e){console.log(e),!0===e.data.success?(t.getApiTestCaseFun(),t.$message.success(\"删除API测试用例成功\")):t.$message.error(\"删除API测试用例失败\")}))},returnAPIModuleList:function(){this.$parent.apiModuleList()}},components:{\"add-or-edit-api-test-case\":F},created:function(){console.log(this.apiModuleId,this.apiTestCaseProjectId),\"enter\"===this.type&&(this.moduleId=this.apiModuleId,this.getApiTestCaseFun())}},E=$,q=Object(I[\"a\"])(E,p,c,!1,null,\"5f747a0c\",null),M=q.exports,z={name:\"ApiModel\",props:[\"type\",\"apiProjectId\",\"apiModuleId\"],data:function(){return{tableData:[],currentPage:1,size_page:10,total_module:0,apiProjectSelect:[],apiProjectSelectId:\"\",moduleId:\"\",projectId:\"\",apiTestCaseId:\"\",currentApiTestCaseData:{},showAddOrEditApiTestCase:!1,opsType:\"add\",currentApiModuleId:0,currentApiProjectId:0}},methods:{handleSizeChange:function(e){this.size_page=e,this.getSingleAPIProjectModule()},handleCurrentChange:function(e){this.currentPage=e,this.getSingleAPIProjectModule()},getSingleAPIProjectModule:function(){var e=this;console.log(this.size_page,this.currentPage),Object(l[\"d\"])(this.projectId,this.size_page,this.currentPage).then((function(t){!0===t.data.success?(console.log(t.data.data),e.tableData=t.data.data.data,e.total_module=t.data.data.total_module):e.$message.error(\"获取接口失败\")}))},enterApiTestCaseModule:function(e){this.opsType=\"enter\",this.currentApiModuleId=e.id,this.currentApiProjectId=this.projectId,console.log(\"sssssss:\",this.currentApiModuleId),this.showAddOrEditApiTestCase=!0},returnAPIProjectList:function(){this.$parent.apiProjectList()},apiModuleList:function(){this.showAddOrEditApiTestCase=!1,this.getSingleAPIProjectModule()}},components:{\"api-test-case\":M},created:function(){console.log(this.apiProjectId),\"enter\"===this.type&&(this.projectId=this.apiProjectId,this.getSingleAPIProjectModule())}},N=z,R=Object(I[\"a\"])(N,n,o,!1,null,\"49f07603\",null),J=R.exports,L={name:\"ApiProjectTestCase\",data:function(){return{tableData:[],page:{page:1,total:0,size:10},projectId:\"\",opsType:\"enter\",showApiTestCaseModule:!1,currentApiProjectId:0}},methods:{handleEdit:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},handleSizeChange:function(e){this.page.size=e,this.getApiProjectFun()},handleCurrentChange:function(e){this.page.page=e,this.getApiProjectFun()},getApiProjectFun:function(){var e=this,t={page:this.page.page,size:this.page.size};Object(r[\"c\"])(t).then((function(t){console.log(t),!0===t.data.success?(e.tableData=t.data.data,e.page.total=t.data.data.total,e.page.page=t.data.data.page,e.page.size=t.data.data.size):e.$message.error(t.data.data)}))},enterApiProjectTestCase:function(e){this.opsType=\"enter\",this.currentApiProjectId=e.id,this.showApiTestCaseModule=!0},apiProjectList:function(){this.showApiTestCaseModule=!1,this.getApiProjectFun()}},components:{\"api-test-case-module\":J},created:function(){this.getApiProjectFun()}},U=L,B=Object(I[\"a\"])(U,s,i,!1,null,\"b251d53c\",null);t[\"default\"]=B.exports},c856:function(e,t,a){\"use strict\";a(\"34b1\")}}]);","extractedComments":[]}