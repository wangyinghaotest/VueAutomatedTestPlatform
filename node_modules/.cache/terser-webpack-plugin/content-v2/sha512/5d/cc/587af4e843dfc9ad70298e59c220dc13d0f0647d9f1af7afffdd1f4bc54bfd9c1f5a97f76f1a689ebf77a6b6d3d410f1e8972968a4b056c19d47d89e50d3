{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"uiProjectPageElement\"],{\"1dfe\":function(e,t,n){\"use strict\";n(\"4806\")},2909:function(e,t,n){\"use strict\";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function i(e){if(Array.isArray(e))return a(e)}function r(e){if(\"undefined\"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function o(e,t){if(e){if(\"string\"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function l(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function c(e){return i(e)||r(e)||o(e)||l()}n.d(t,\"a\",(function(){return c}))},4806:function(e,t,n){},\"4a1c\":function(e,t,n){\"use strict\";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",[e.showUiPage?n(\"ui-page-element\",{attrs:{type:e.opsType,uiProjectId:e.currentUiProjectId}}):n(\"div\",[n(\"div\",{staticClass:\"crumbs\"},[n(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[n(\"el-breadcrumb-item\",[n(\"i\",{staticClass:\"el-icon-lx-calendar\"}),e._v(\" UI项目 \")])],1)],1),n(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:e.tableData}},[n(\"el-table-column\",{attrs:{prop:\"id\",label:\"id\",sortable:\"\",width:\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"ui_project_name\",label:\"项目名称\",sortable:\"\",width:\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"describe\",label:\"项目描述\",width:\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"updata_time\",label:\"更新时间\",width:\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"create_time\",label:\"创建时间\",width:\"180\"}}),n(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(n){return e.enterProjectPage(t.row)}}},[e._v(\"进入\")])]}}])})],1)],1)],1)},i=[],r=n(\"f0bd\"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",[e.showAddOrEditPageElement?n(\"add-or-edit-page-element\",{attrs:{type:e.opsType,uiPageId:e.currentPageId,uiProjectId:e.currentProjectId},on:{savePageElement:e.savePageElement,cancelSavePageElement:e.cancelSavePageElement}}):n(\"div\",[n(\"div\",{staticClass:\"crumbs\"},[n(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[n(\"el-breadcrumb-item\",[n(\"i\",{staticClass:\"el-icon-lx-calendar\"}),e._v(\" UI项目 \")]),n(\"el-breadcrumb-item\",[e._v(\"UI页面元素管理\")])],1)],1),n(\"el-row\",[n(\"el-button\",{on:{click:e.returnProjectList}},[e._v(\"返回\")]),n(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.openAddPageElement}},[e._v(\"创建页面元素\")])],1),n(\"div\",[n(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:e.tableData}},[n(\"el-table-column\",{attrs:{prop:\"id\",label:\"id\",sortable:\"\",width:\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"ui_project_name\",label:\"项目名称\",sortable:\"\",width:\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"ui_page_name\",label:\"页面名称\",sortable:\"\",width:\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"updata_time\",label:\"更新时间\",width:\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"create_time\",label:\"创建时间\",width:\"180\"}}),n(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(n){return e.openEditPageElement(t.row)}}},[e._v(\"编辑\")]),n(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(n){return e.deletePageElementPopup(t.row)}}},[e._v(\"删除\")])]}}])})],1)],1)],1)],1)},l=[],c=n(\"2934\"),u=function(){return Object(c[\"c\"])(\"api/backend/ui_page_element/list/\")},s=function(e){return Object(c[\"e\"])(\"api/backend/ui_page_element/\",e)},d=function(e){return Object(c[\"c\"])(\"api/backend/ui_page_element/\"+e+\"/\")},p=function(e,t){return Object(c[\"d\"])(\"api/backend/ui_page_element/\"+e+\"/\",t)},g=function(e){return Object(c[\"a\"])(\"api/backend/ui_page_element/\"+e+\"/\")},m=function(){return Object(c[\"c\"])(\"api/backend/ui_page_element/get_ui_page_select_data/\")},_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",[n(\"el-form\",{ref:\"pageElementFormRef\",attrs:{model:e.uiPageElementForm,\"label-width\":\"100px\"}},[n(\"el-form-item\",{attrs:{label:\"选择UI项目\"}},[n(\"el-select\",{attrs:{placeholder:\"请选择项目\",id:\"selectUIProject\"},on:{change:e.getSelectUiPageElementFun},model:{value:e.uiPageElementForm.ui_project_id,callback:function(t){e.$set(e.uiPageElementForm,\"ui_project_id\",t)},expression:\"uiPageElementForm.ui_project_id\"}},e._l(e.projectSelect,(function(e){return n(\"el-option\",{key:e.project_id,attrs:{value:e.project_id,label:e.ui_project_name}})})),1)],1),n(\"el-form-item\",{attrs:{label:\"选择UI页面\"}},[n(\"el-select\",{attrs:{placeholder:\"选择UI页面\"},model:{value:e.uiPageElementForm.ui_page_id,callback:function(t){e.$set(e.uiPageElementForm,\"ui_page_id\",t)},expression:\"uiPageElementForm.ui_page_id\"}},e._l(e.pageSelect,(function(e){return n(\"el-option\",{key:e.ui_page_id,attrs:{value:e.ui_page_id,label:e.ui_page_name}})})),1)],1),n(\"div\",{staticClass:\"page-element-class\"},[n(\"el-form-item\",[n(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.savePageElement}},[e._v(\"保存\")]),n(\"el-button\",{attrs:{type:\"default\"},on:{click:e.cancelSavePageElement}},[e._v(\"取消\")])],1)],1),n(\"div\",[n(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:e.uiPageElementTableData}},[e._v(\"s \"),n(\"el-table-column\",{attrs:{label:\"页面元素名称\",width:\"200\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"el-input\",{staticStyle:{width:\"100%\"},attrs:{\"controls-position\":\"right\",placeholder:\"请输入内容\"},model:{value:t.row.ui_page_element_name,callback:function(n){e.$set(t.row,\"ui_page_element_name\",n)},expression:\"scope.row.ui_page_element_name\"}})]}}])}),n(\"el-table-column\",{attrs:{label:\"页面元素\",width:\"200\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"el-input\",{staticStyle:{width:\"100%\"},attrs:{\"controls-position\":\"right\"},model:{value:t.row.ui_page_element,callback:function(n){e.$set(t.row,\"ui_page_element\",n)},expression:\"scope.row.ui_page_element\"}})]}}])}),n(\"el-table-column\",{attrs:{prop:\"ui_page_element_table\",label:\"定位方式\",width:\"180\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"el-select\",{attrs:{size:\"small\",filterable:\"\",placeholder:\"请选择定位方式\"},model:{value:t.row.ui_element_positioning_id,callback:function(n){e.$set(t.row,\"ui_element_positioning_id\",n)},expression:\"scope.row.ui_element_positioning_id\"}},e._l(e.positioningSelect,(function(e){return n(\"el-option\",{key:e.id,attrs:{value:e.id,label:e.positioning_name}})})),1)]}}])}),n(\"el-table-column\",{attrs:{label:\"元素-多个\",width:\"200\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"el-input\",{staticStyle:{width:\"100%\"},attrs:{\"controls-position\":\"right\"},model:{value:t.row.ui_page_element_more,callback:function(n){e.$set(t.row,\"ui_page_element_more\",n)},expression:\"scope.row.ui_page_element_more\"}})]}}])}),n(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(n){return e.Delete(t.$index,e.uiPageElementTableData)}}},[e._v(\"删除\")]),n(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:e.AddForm}},[e._v(\"添加行\")])]}}])})],1)],1)],1)],1)},f=[],b=n(\"2909\"),h=n(\"7c76\"),P={name:\"addOrEditPageElement\",props:[\"type\",\"uiPageId\",\"uiProjectId\"],data:function(){return{uiPageElementForm:{ui_project_id:\"\",ui_page_id:\"\"},uiPageElementTableData:[{ui_page_element_name:\"\",ui_page_element:\"\",ui_element_positioning_id:\"\",ui_page_element_more:\"\"}],projectSelect:[],pageSelect:[],indexNum:0,positioningSelect:[]}},mounted:function(){this.getSelectUiPageElementFun()},methods:{getSelectUiPageElementFun:function(e){var t=this;m().then((function(e){if(!0===e.data.success){t.projectSelect=e.data.data;var n=0;for(n=0;n<t.projectSelect.length;n++)if(t.projectSelect[n].project_id===t.uiPageElementForm.ui_project_id){t.indexNum=n;break}t.pageSelect=t.projectSelect[t.indexNum].page_list}else t.$message.error(\"获取接口失败\")}))},savePageElement:function(){\"add\"===this.type?this.addUiPageElement():this.editUiPageElement()},cancelSavePageElement:function(){this.$emit(\"cancelSavePageElement\")},addUiPageElement:function(){var e=this,t=JSON.parse(JSON.stringify(this.uiPageElementForm));t.ui_page_element_data=this.uiPageElementTableData,console.log(t),this.$refs.pageElementFormRef.validate((function(n){if(console.log(e.$refs.pageElementFormRef.validate(n)),!n)return!1;s(t).then((function(t){console.log(t),!0===t.data.success?(e.$message.success(\"添加页面元素成功\"),e.$forceUpdate(),e.$emit(\"savePageElement\")):e.$message.error(\"添加页面元素失败\")}))}))},editUiPageElement:function(){var e=this,t=JSON.parse(JSON.stringify(this.uiPageElementForm));t.ui_page_element_data=this.uiPageElementTableData,this.$refs.pageElementFormRef.validate((function(n){if(!n)return!1;console.log(t),p(e.uiPageElementForm.ui_page_id,t).then((function(t){console.log(t),!0===t.data.success?(e.$message.success(\"编辑页面元素成功\"),e.$forceUpdate(),e.$emit(\"savePageElement\")):e.$message.error(\"编辑页面元素失败\")}))}))},getUiPositioningFun:function(){var e=this;Object(h[\"d\"])().then((function(t){console.log(t),!0===t.data.success?(e.positioningSelect=t.data.data,console.log(e.positioningSelect)):e.$message.error(\"获取接口失败\")}))},getSingleUiPageElementFun:function(){var e=this;d(this.uiPageElementForm.ui_page_id).then((function(t){if(console.log(t.data.data.length),!0===t.data.success){if(0===t.data.data.length)return!0;var n=t.data.data.ui_page_element_data;e.uiPageElementTableData=Object(b[\"a\"])(n)}else e.$message.error(\"获取接口失败\")}))},AddForm:function(e,t){this.uiPageElementTableData.push({ui_page_element_name:\"\",ui_page_element:\"\",ui_element_positioning_id:\"\",ui_page_element_more:\"\"})},Delete:function(e,t){t.splice(e,1)}},created:function(){\"edit\"===this.type&&(this.uiPageElementForm={ui_project_id:this.uiProjectId,ui_page_id:this.uiPageId},this.getSingleUiPageElementFun(),this.getUiPositioningFun()),\"add\"===this.type&&this.getUiPositioningFun()}},j=P,E=(n(\"1dfe\"),n(\"2877\")),v=Object(E[\"a\"])(j,_,f,!1,null,\"23e540c3\",null),w=v.exports,y=n(\"bbaa\"),S={name:\"UiPageElement\",props:[\"type\",\"uiProjectId\",\"showUiProjectPage\"],data:function(){return{tableData:[],page:{page:1,total:0,size:10},inject:[\"reload\"],pageElementId:\"\",showAddOrEditPageElement:!1,opsType:\"add\",currentPageId:0,currentProjectId:0,currentUiPageElementData:{},rules:{ui_page_name:[{required:!0,message:\"请输入页面名称\",trigger:\"blur\"}],ui_page_describe:[{required:!0,message:\"请输入页面描述\",trigger:\"blur\"}],ui_project_id:[{required:!0,message:\"请选择项目\",trigger:\"change\"}]}}},methods:{formatter:function(e,t){return e.address},handleEdit:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},handleSizeChange:function(e){this.page.size=e,this.getUiPageFun()},handleCurrentChange:function(e){this.page.page=e,this.getUiPageElementFun()},getUiPageElementFun:function(){var e=this,t={page:this.page.page,size:this.page.size};u(t).then((function(t){console.log(t),!0===t.data.success?e.tableData=t.data.data:e.$message.error(\"获取接口失败\")}))},openAddPageElement:function(){this.opsType=\"add\",this.currentUiPageElementId=0,this.currentUiPageElementData={},this.showAddOrEditPageElement=!0},openEditPageElement:function(e){this.opsType=\"edit\",this.currentPageId=e.id,console.log(\"这是页面id\",e.id),this.currentProjectId=this.projectId,this.showAddOrEditPageElement=!0},savePageElement:function(){this.showAddOrEditPageElement=!1},cancelSavePageElement:function(){this.showAddOrEditPageElement=!1},deletePageElementPopup:function(e){var t=this;this.pageElementId=e.id,g(this.pageElementId).then((function(e){console.log(e),!0===e.data.success?(t.getUiPageElementFun(),t.$message.success(\"删除页面成功\")):t.$message.error(\"删除页面失败\")}))},getSingleUiProjectPage:function(){var e=this;Object(y[\"d\"])(this.projectId).then((function(t){!0===t.data.success?(console.log(\"这是获取数据\"),console.log(t.data.data),e.tableData=t.data.data):e.$message.error(\"获取接口失败\")}))},returnProjectList:function(){this.$parent.returnProject()}},components:{\"add-or-edit-page-element\":w},created:function(){console.log(this.uiProjectId),\"enter\"===this.type&&(this.projectId=this.uiProjectId,this.getSingleUiProjectPage())}},k=S,U=Object(E[\"a\"])(k,o,l,!1,null,\"36183651\",null),O=U.exports,I={name:\"uiProjectPageElement\",data:function(){return{tableData:[],page:{page:1,total:0,size:10},projectId:\"\",opsType:\"enter\",showUiPage:!1,currentUiProjectId:0}},methods:{handleEdit:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},handleSizeChange:function(e){this.page.size=e,this.getUiProjectFun()},handleCurrentChange:function(e){this.page.page=e,this.getUiProjectFun()},getUiProjectFun:function(){var e=this,t={page:this.page.page,size:this.page.size};Object(r[\"d\"])(t).then((function(t){console.log(t),!0===t.data.success?(e.tableData=t.data.data,e.page.total=t.data.data.total,e.page.page=t.data.data.page,e.page.size=t.data.data.size):e.$message.error(\"获取接口失败\")}))},enterProjectPage:function(e){this.projectId=e.id,console.log(this.projectId),this.opsType=\"enter\",this.currentUiProjectId=e.id,this.showUiPage=!0},returnProject:function(){this.showUiPage=!1}},components:{\"ui-page-element\":O},created:function(){this.getUiProjectFun()}},F=I,$=Object(E[\"a\"])(F,a,i,!1,null,\"a67dddfa\",null);t[\"default\"]=$.exports},\"7c76\":function(e,t,n){\"use strict\";n.d(t,\"d\",(function(){return i})),n.d(t,\"a\",(function(){return r})),n.d(t,\"c\",(function(){return o})),n.d(t,\"e\",(function(){return l})),n.d(t,\"b\",(function(){return c}));var a=n(\"2934\"),i=function(){return Object(a[\"c\"])(\"api/backend/ui_positioning/list/\")},r=function(e){return Object(a[\"e\"])(\"api/backend/ui_positioning/\",e)},o=function(e){return Object(a[\"c\"])(\"api/backend/ui_positioning/\"+e+\"/\")},l=function(e,t){return Object(a[\"d\"])(\"api/backend/ui_positioning/\"+e+\"/\",t)},c=function(e){return Object(a[\"a\"])(\"api/backend/ui_positioning/\"+e+\"/\")}},bbaa:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return i})),n.d(t,\"c\",(function(){return r})),n.d(t,\"e\",(function(){return o})),n.d(t,\"b\",(function(){return l})),n.d(t,\"d\",(function(){return c}));var a=n(\"2934\"),i=function(e){return Object(a[\"e\"])(\"api/backend/ui_page/\",e)},r=function(e){return Object(a[\"c\"])(\"api/backend/ui_page/\"+e+\"/\")},o=function(e,t){return Object(a[\"d\"])(\"api/backend/ui_page/\"+e+\"/\",t)},l=function(e){return Object(a[\"a\"])(\"api/backend/ui_page/\"+e+\"/\")},c=function(e){return Object(a[\"c\"])(\"api/backend/ui_page_element/ui_project_page/\"+e+\"/\")}},f0bd:function(e,t,n){\"use strict\";n.d(t,\"d\",(function(){return i})),n.d(t,\"a\",(function(){return r})),n.d(t,\"c\",(function(){return o})),n.d(t,\"e\",(function(){return l})),n.d(t,\"b\",(function(){return c}));var a=n(\"2934\"),i=function(){return Object(a[\"c\"])(\"api/backend/ui_project/list/\")},r=function(e){return Object(a[\"e\"])(\"api/backend/ui_project/\",e)},o=function(e){return Object(a[\"c\"])(\"api/backend/ui_project/\"+e+\"/\")},l=function(e,t){return Object(a[\"d\"])(\"api/backend/ui_project/\"+e+\"/\",t)},c=function(e){return Object(a[\"a\"])(\"api/backend/ui_project/\"+e+\"/\")}}}]);","extractedComments":[]}