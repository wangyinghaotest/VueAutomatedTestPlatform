{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"uiProjectTask\"],{\"2c8a\":function(t,e,s){!function(e,s){t.exports=s()}(0,(function(){\"use strict\";function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t){return function(t){if(Array.isArray(t)){for(var e=0,s=new Array(t.length);e<t.length;e++)s[e]=t[e];return s}}(t)||function(t){if(Symbol.iterator in Object(t)||\"[object Arguments]\"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}var s=window.devicePixelRatio||1,i=10*s,a=i/2;return function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,n),this.canvas=function(t){var e=document.getElementById(t),i=e.parentNode.clientWidth,a=e.parentNode.clientHeight;return e.style.width=i+\"px\",e.style.height=a+\"px\",e.width=i*s,e.height=a*s,e}(t),this.ctx=this.canvas.getContext(\"2d\"),this.type=\"bar\",this.showValue=!0,this.showGrid=!0,this.topPadding=60*s,this.leftPadding=50*s,this.rightPadding=10*s,this.bottomPadding=50*s,this.yEqual=5,this.yLength=0,this.xLength=0,this.ySpace=0,this.xRorate=0,this.yRorate=0,this.xRotate=0,this.yRotate=0,this.bgColor=\"#fff\",this.axisColor=\"#666\",this.gridColor=\"#eee\",this.title={text:\"\",color:\"#666\",position:\"top\",font:\"bold \"+18*s+\"px Arial\",top:i,bottom:a},this.legend={display:!0,position:\"top\",color:\"#666\",font:14*s+\"px Arial\",top:45*s,bottom:15*s,textWidth:0},this.radius=100*s,this.innerRadius=60*s,this.colorList=[\"#4A90E2\",\"#F5A623\",\"#ff5858\",\"#5e64ff\",\"#2AC766\",\"#743ee2\",\"#b554ff\",\"#199475\"],this.init(e)}return function(e,s,i){s&&t(e.prototype,s),i&&t(e,i)}(n,[{key:\"init\",value:function(t){if(t.title=Object.assign({},this.title,t.title),t.legend=Object.assign({},this.legend,t.legend),Object.assign(this,t),!t.labels||!t.labels.length)throw new Error(\"缺少主要参数labels\");if(!t.datasets||!t.datasets.length)throw new Error(\"缺少主要参数datasets\");this.drawBackground(),\"bar\"===this.type||\"line\"===this.type?this.renderBarChart():this.renderPieChart(),this.drawLegend()}},{key:\"renderBarChart\",value:function(){this.yLength=Math.floor((this.canvas.height-this.topPadding-this.bottomPadding-i)/this.yEqual),this.xLength=Math.floor((this.canvas.width-this.leftPadding-this.rightPadding-i)/this.labels.length),this.ySpace=function(t,s){var i=t.map((function(t){return t.data.reduce((function(t,e){return e<t?t:e}))})),a=Math.ceil(Math.max.apply(Math,e(i))/s),n=a.toString().length-1;return n=2<n?2:n,Math.ceil(a/Math.pow(10,n))*Math.pow(10,n)}(this.datasets,this.yEqual),this.drawXAxis(),this.drawYAxis(),this.drawBarContent()}},{key:\"drawBarContent\",value:function(){var t=this.ctx,e=this.datasets.length;t.beginPath();for(var n=0;n<e;n++){t.font=this.legend.font,this.legend.textWidth+=Math.ceil(t.measureText(this.datasets[n].label).width),t.fillStyle=t.strokeStyle=this.datasets[n].fillColor||this.colorList[n];for(var o=this.datasets[n].data,r=0;r<o.length;r++)if(!(r>this.labels.length-1)){var l=this.xLength/(e+1),c=this.yLength/this.ySpace,u=this.leftPadding+this.xLength*r+l*(n+.5),d=u+l,h=this.canvas.height-this.bottomPadding,f=h-o[r]*c;if(\"bar\"===this.type)t.fillRect(u,f,d-u,h-f),this.drawValue(o[r],u+l/2,f-a);else if(\"line\"===this.type){var b=this.leftPadding+this.xLength*(r+.5);t.beginPath(),t.arc(b,f,3*s,0,2*Math.PI,!0),t.fill(),0!==r&&(t.beginPath(),t.strokeStyle=this.datasets[n].fillColor||this.colorList[n],t.lineWidth=2*s,t.moveTo(b-this.xLength,h-o[r-1]*c),t.lineTo(b,f),t.stroke(),t.lineWidth=1*s),this.drawValue(o[r],b,f-i)}}}t.stroke()}},{key:\"renderPieChart\",value:function(){for(var t=this.ctx,e=this.labels.length,s=this.datasets[0],i=s.data,a=i.reduce((function(t,e){return t+e})),n=-Math.PI/2,o=this.canvas.width/2,r=this.canvas.height/2,l=0;l<e;l++){t.font=this.legend.font,this.legend.textWidth+=Math.ceil(t.measureText(this.labels[l]).width),t.beginPath(),t.strokeStyle=t.fillStyle=s.colorList&&s.colorList[l]||this.colorList[l],t.moveTo(o,r);var c=n,u=n+=i[l]/a*2*Math.PI;t.arc(o,r,this.radius,c,u),t.closePath(),t.fill();var d=(c+u)/2;this.drawPieValue(i[l],d)}\"ring\"===this.type&&(t.beginPath(),t.fillStyle=this.bgColor,t.arc(o,r,this.innerRadius,0,2*Math.PI),t.closePath(),t.fill())}},{key:\"drawValue\",value:function(t,e,i){var a=this.ctx;this.showValue&&(a.textBaseline=\"middle\",a.font=12*s+\"px Arial\",a.textAlign=\"center\",a.fillText(t,e,i))}},{key:\"drawPieValue\",value:function(t,e){var s=this.ctx;if(this.showValue){var a=this.canvas.width/2,n=this.canvas.height/2,o=Math.ceil(Math.abs(this.radius*Math.cos(e))),r=Math.floor(Math.abs(this.radius*Math.sin(e)));s.textBaseline=\"middle\",this.showValue&&(e<=0?(s.textAlign=\"left\",s.moveTo(a+o,n-r),s.lineTo(a+o+i,n-r-i),s.moveTo(a+o+i,n-r-i),s.lineTo(a+o+3*i,n-r-i),s.stroke(),s.fillText(t,a+o+3.5*i,n-r-i)):0<e&&e<=Math.PI/2?(s.textAlign=\"left\",s.moveTo(a+o,n+r),s.lineTo(a+o+i,n+r+i),s.moveTo(a+o+i,n+r+i),s.lineTo(a+o+3*i,n+r+i),s.stroke(),s.fillText(t,a+o+3.5*i,n+r+i)):e>Math.PI/2&&e<Math.PI?(s.textAlign=\"right\",s.moveTo(a-o,n+r),s.lineTo(a-o-i,n+r+i),s.moveTo(a-o-i,n+r+i),s.lineTo(a-o-3*i,n+r+i),s.stroke(),s.fillText(t,a-o-3.5*i,n+r+i)):(s.textAlign=\"right\",s.moveTo(a-o,n-r),s.lineTo(a-o-i,n-r-i),s.moveTo(a-o-i,n-r-i),s.lineTo(a-o-3*i,n-r-i),s.stroke(),s.fillText(t,a-o-3.5*i,n-r-i)))}}},{key:\"drawBackground\",value:function(){this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.drawTitle()}},{key:\"drawTitle\",value:function(){var t=this.title;if(t.text){var e=this.ctx;e.beginPath(),e.font=t.font,e.textAlign=\"center\",e.fillStyle=t.color,\"top\"===t.position?(e.textBaseline=\"top\",e.fillText(t.text,this.canvas.width/2,t.top)):(e.textBaseline=\"bottom\",e.fillText(t.text,this.canvas.width/2,this.canvas.height-t.bottom))}}},{key:\"drawXAxis\",value:function(){var t=this.ctx,e=this.canvas.height-this.bottomPadding+.5;t.beginPath(),t.strokeStyle=this.axisColor,t.moveTo(this.leftPadding,e),t.lineTo(this.canvas.width-this.rightPadding,e),t.stroke(),this.drawXPoint()}},{key:\"drawXPoint\",value:function(){var t=this.ctx;t.beginPath(),t.font=12*s+\"px Microsoft YaHei\",t.textAlign=this.xRorate||this.xRotate?\"right\":\"center\",t.textBaseline=\"top\",t.fillStyle=this.axisColor;for(var e=0;e<this.labels.length;e++){var n=this.labels[e],o=this.leftPadding+this.xLength*(e+1)+.5,r=this.canvas.height-this.bottomPadding;this.showGrid?(t.strokeStyle=this.gridColor,t.moveTo(o,r),t.lineTo(o,this.topPadding+i)):(t.moveTo(o,r),t.lineTo(o,r-a)),t.stroke(),t.save(),t.translate(o-this.xLength/2,r+a),this.xRorate?t.rotate(-this.xRorate*Math.PI/180):t.rotate(-this.xRotate*Math.PI/180),t.fillText(n,0,0),t.restore()}}},{key:\"drawYAxis\",value:function(){var t=this.ctx;t.beginPath(),t.strokeStyle=this.axisColor,t.moveTo(this.leftPadding-.5,this.canvas.height-this.bottomPadding+.5),t.lineTo(this.leftPadding-.5,this.topPadding+.5),t.stroke(),this.drawYPoint()}},{key:\"drawYPoint\",value:function(){var t=this.ctx;t.font=12*s+\"px Microsoft YaHei\",t.textAlign=\"right\",t.textBaseline=\"middle\",t.beginPath();for(var e=0;e<this.yEqual;e++){var n=this.leftPadding,o=this.canvas.height-this.bottomPadding-this.yLength*(e+1)+.5;this.showGrid?(t.strokeStyle=this.gridColor,t.moveTo(n,o),t.lineTo(this.canvas.width-this.rightPadding-i,o)):(t.strokeStyle=this.axisColor,t.moveTo(n-a,o),t.lineTo(n,o)),t.stroke(),t.save(),t.fillStyle=this.axisColor,t.translate(n-i,o),this.yRorate?t.rotate(-this.yRorate*Math.PI/180):t.rotate(-this.yRotate*Math.PI/180),t.fillText(this.ySpace*(e+1),0,0),t.restore()}}},{key:\"drawLegend\",value:function(){var t=this.legend;if(t.display){var e=this.ctx,s=\"pie\"===this.type||\"ring\"===this.type;e.beginPath(),e.font=t.font,e.textAlign=\"left\",e.textBaseline=\"middle\";for(var n=s?this.labels.length:this.datasets.length,o=(this.canvas.width-(this.legend.textWidth+(5*n-2)*i))/2,r=0,l=0;l<n;l++){var c=s?this.datasets[0]:this.datasets[l],u=(s?this.labels[l]:c.label)||\"\";e.fillStyle=c.colorList&&c.colorList[l]||c.fillColor||this.colorList[l],\"top\"===t.position?(this.drawLegendIcon(o+5*i*l+r,t.top-a,2*i,i),e.fillStyle=t.color,e.fillText(u,o+(5*l+3)*i+r,t.top)):\"bottom\"===t.position?(this.drawLegendIcon(o+5*i*l+r,this.canvas.height-t.bottom-a,2*i,i),e.fillStyle=t.color,e.fillText(u,o+(5*l+3)*i+r,this.canvas.height-t.bottom)):(e.fillRect(i,t.top+2*i*l,2*i,i),e.fillStyle=t.color,e.fillText(u,4*i,t.top+2*i*l+.5*i)),r+=Math.ceil(e.measureText(u).width)}}}},{key:\"drawLegendIcon\",value:function(t,e,n,o){var r=this.ctx;\"line\"===this.type?(r.beginPath(),r.strokeStyle=r.fillStyle,r.lineWidth=2*s,r.moveTo(t,e+a),r.lineTo(t+2*i,e+a),r.stroke(),r.lineWidth=1*s,r.arc(t+i,e+a,3*s,0,2*Math.PI,!0),r.fill()):r.fillRect(t,e,n,o)}}]),n}()}))},\"2d2c\":function(t,e,s){},3494:function(t,e,s){\"use strict\";s(\"2d2c\")},\"3a03\":function(t,e,s){},\"664c\":function(t,e,s){\"use strict\";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",[t.showUiTask?s(\"ui-task\",{attrs:{type:t.opsType,uiProjectId:t.currentUiProjectId}}):s(\"div\",[s(\"div\",{staticClass:\"crumbs\"},[s(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[s(\"el-breadcrumb-item\",[s(\"i\",{staticClass:\"el-icon-lx-calendar\"}),t._v(\" UI任务管理 \")]),s(\"el-breadcrumb-item\",[t._v(\"UI项目\")])],1)],1),s(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.tableData}},[s(\"el-table-column\",{attrs:{prop:\"id\",label:\"id\",sortable:\"\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"ui_project_name\",label:\"项目名称\",sortable:\"\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"describe\",label:\"项目描述\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"updata_time\",label:\"更新时间\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"create_time\",label:\"创建时间\",width:\"180\"}}),s(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[s(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(s){return t.enterProjectTask(e.row)}}},[t._v(\"进入\")])]}}])})],1)],1)],1)},a=[],n=s(\"f0bd\"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",[t.showAddOrEditUiTestTask?s(\"add-or-edit-ui-test-task\",{attrs:{type:t.opsType,uiTestTaskId:t.currentUiTestTaskId,uiTestTaskData:t.currentUiTestTaskData,projectId:t.projectId},on:{saveUiTestTask:t.saveUiTestTask,cancelSaveUiTestTask:t.cancelSaveUiTestTask}}):t.showUiTestTaskResult?s(\"ui-test-task-result\",{attrs:{uiTestTaskId:t.currentUiTestTaskId,uiTestTaskData:t.currentUiTestTaskData}}):s(\"div\",[s(\"div\",{staticClass:\"crumbs\"},[s(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[s(\"el-breadcrumb-item\",[s(\"i\",{staticClass:\"el-icon-lx-calendar\"}),t._v(\" UI任务管理 \")]),s(\"el-breadcrumb-item\",[t._v(\"UI项目\")]),s(\"el-breadcrumb-item\",[t._v(\"UI任务\")])],1)],1),s(\"el-row\",[s(\"el-button\",{on:{click:t.returnProjectList}},[t._v(\"返回\")]),s(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.openAddUiTestTask}},[t._v(\"创建UI测试任务\")]),s(\"el-button\",{on:{click:t.getUiTestTaskFun}},[t._v(\"刷新\")])],1),s(\"div\",[s(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.tableData}},[s(\"el-table-column\",{attrs:{prop:\"id\",label:\"id\",sortable:\"\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"ui_project_name\",label:\"项目\",sortable:\"\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"ui_test_task_name\",label:\"任务名称\",sortable:\"\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"status\",label:\"状态\",sortable:\"\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"describe\",label:\"描述\",sortable:\"\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"updata_time\",label:\"更新时间\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"create_time\",label:\"创建时间\",width:\"180\"}}),s(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[s(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(s){return t.openEditUiTestTask(e.row)}}},[t._v(\"编辑\")]),s(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(s){return t.deleteUiTestTask(e.row)}}},[t._v(\"删除\")]),s(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(s){return t.performUiTestTask(e.row)}}},[t._v(\"执行\")]),s(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(s){return t.reportUiTestTask(e.row)}}},[t._v(\"查看报告\")])]}}])})],1)],1)],1)],1)},r=[],l=s(\"2934\"),c=function(t){return Object(l[\"c\"])(\"api/backend/ui_test_task/list/\"+t+\"/\")},u=function(t){return Object(l[\"e\"])(\"api/backend/ui_test_task/\",t)},d=function(t){return Object(l[\"c\"])(\"api/backend/ui_test_task/\"+t+\"/\")},h=function(t,e){return Object(l[\"d\"])(\"api/backend/ui_test_task/\"+t+\"/\",e)},f=function(t){return Object(l[\"a\"])(\"api/backend/ui_test_task/\"+t+\"/\")},b=function(t){return Object(l[\"c\"])(\"api/backend/ui_test_task/get_ui_case_tree/\"+t+\"/\")},p=function(t){return Object(l[\"d\"])(\"api/backend/ui_test_task/perform_ui_task/\"+t+\"/\")},T=function(t){return Object(l[\"c\"])(\"api/backend/ui_test_task/check_result_list/\"+t+\"/\")},k=function(t){return Object(l[\"d\"])(\"api/backend/ui_test_task/check_result/\"+t+\"/\")},g=function(t,e){return Object(l[\"a\"])(\"api/backend/ui_test_task/check_result_list/\"+t+\"/\"+e+\"/\")},_=function(t){return Object(l[\"c\"])(\"api/backend/ui_test_task/check_result/ui_test_abnormal/\"+t+\"/\")},m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",[s(\"div\",{staticClass:\"crumbs\"},[s(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[s(\"el-breadcrumb-item\",[s(\"i\",{staticClass:\"el-icon-lx-calendar\"}),t._v(\" UI任务管理 \")]),s(\"el-breadcrumb-item\",[t._v(\"UI任务管理\")])],1)],1),s(\"el-form\",{ref:\"uiTestTaskFormRef\",attrs:{model:t.uiTestTaskForm,\"label-width\":\"100px\"}},[s(\"el-form-item\",{attrs:{label:\"UI测试任务\",prop:\"ui_test_task_name\"}},[s(\"el-input\",{staticClass:\"ui_test_task_name\",model:{value:t.uiTestTaskForm.ui_test_task_name,callback:function(e){t.$set(t.uiTestTaskForm,\"ui_test_task_name\",e)},expression:\"uiTestTaskForm.ui_test_task_name\"}})],1),s(\"el-form-item\",{attrs:{label:\"描述\",prop:\"describe\"}},[s(\"el-input\",{staticStyle:{width:\"230px\"},attrs:{type:\"textarea\"},model:{value:t.uiTestTaskForm.describe,callback:function(e){t.$set(t.uiTestTaskForm,\"describe\",e)},expression:\"uiTestTaskForm.describe\"}})],1),s(\"el-form-item\",{attrs:{label:\"UI测试用例\"}},[s(\"el-tree\",{ref:\"tree\",staticStyle:{width:\"500px\"},attrs:{data:t.data,\"show-checkbox\":\"\",\"node-key\":\"id\",props:t.defaultProps,\"default-expanded-keys\":[],\"default-checked-keys\":t.defaultTask},on:{\"check-change\":t.handleBucketClick}})],1),s(\"div\",{staticClass:\"page-element-class\"},[s(\"el-form-item\",[s(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.saveUiTestTask}},[t._v(\"保存\")]),s(\"el-button\",{attrs:{type:\"default\"},on:{click:t.cancelSaveUiTestTask}},[t._v(\"取消\")])],1)],1)],1)],1)},v=[];function y(t){return y=\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},y(t)}var w={inject:[\"reload\"],name:\"addOrEditUiTestTask\",props:[\"type\",\"uiTestTaskId\",\"uiTestTaskData\",\"projectId\"],data:function(){return{uiTestTaskForm:{ui_test_task_name:\"\",ui_test_task_id:\"\",describe:\"\"},count:\"\",data:[],defaultProps:{label:\"label\",children:\"children\"},cases:[],defaultTask:[],ui_project_id:\"\"}},mounted:function(){},methods:{saveUiTestTask:function(){\"add\"===this.type?this.addUiTestTask():this.editUiTestTask()},handleBucketClick:function(t){},cancelSaveUiTestTask:function(){this.$emit(\"cancelSaveUiTestTask\")},addUiTestTask:function(){var t=this;this.uiTestTaskForm.ui_test_task_id=0;var e=JSON.parse(JSON.stringify(this.uiTestTaskForm));console.log(this.$refs.tree.getCheckedNodes(!0));var s=this.$refs.tree.getCheckedNodes(!0);this.cases=[];for(var i=0;i<s.length;i++)this.cases[i]=s[i].ui_test_cases_id;console.log(\"这是cases\",this.cases),e.cases=this.cases,e.ui_project_id=this.ui_project_id,console.log(\"这是获取到的\",e),this.$refs.uiTestTaskFormRef.validate((function(s){if(console.log(t.$refs.uiTestTaskFormRef.validate(s)),!s)return!1;u(e).then((function(e){console.log(e),!0===e.data.success?(t.$message.success(\"添加UI测试任务成功\"),t.$forceUpdate(),t.$emit(\"saveUiTestTask\")):(t.$message.error(\"添加UI测试任务失败\"),t.$emit(\"saveUiTestTask\"))}))}))},editUiTestTask:function(){var t=this,e=JSON.parse(JSON.stringify(this.uiTestTaskForm));console.log(this.$refs.tree.getCheckedNodes(!0));var s=this.$refs.tree.getCheckedNodes(!0);this.cases=[];for(var i=0;i<s.length;i++)this.cases[i]=s[i].ui_test_cases_id;console.log(\"这是cases\",this.cases),e.cases=this.cases,e.ui_project_id=this.ui_project_id,console.log(\"这是获取到的\",e),this.$refs.uiTestTaskFormRef.validate((function(s){if(console.log(\"这是id：\",t.uiTestTaskForm.ui_test_task_id),console.log(t.$refs.uiTestTaskFormRef.validate(s)),!s)return!1;h(t.uiTestTaskForm.ui_test_task_id,e).then((function(e){console.log(e),!0===e.data.success?(t.showAddOrEditUiTestCase=!1,t.$message.success(\"编辑UI测试任务成功\"),t.$forceUpdate()):t.$message.error(\"编辑UI测试任务失败\")})),t.$emit(\"saveUiTestTask\")}))},getUiCaseTreeFun:function(){var t=this;console.log(\"zhesahoidshasd\",this.ui_project_id),b(this.ui_project_id).then((function(e){if(!0===e.data.success){var s=e.data.data,i=JSON.parse(JSON.stringify(s));console.log(\"uiTestTask：\",i);for(var a=0;a<i.length;a++){var n=i[a].children;i[a].label=i[a].ui_project_name;for(var o=0;o<n.length;o++)console.log(n.length),i[a].children[o].label=i[a].children[o].ui_test_case_name,i[a].children[o].id=i[a].children[o].ui_test_cases_id}console.log(\"uiTestTask222222222：\",i),t.data=i}else t.$message.info(\"获取接口失败\")}))},getSingleUiTestTaskFun:function(){var t=this;d(this.uiTestTaskForm.ui_test_task_id).then((function(e){if(!0===e.data.success){var s=e.data.data;console.log(s);var i=JSON.parse(JSON.stringify(s));console.log(\"uiTestTask2333333333333：\",i.cases),t.defaultTask=JSON.parse(e.data.data.cases),console.log(t.defaultTask),console.log(y(t.defaultTask)),console.log(\"这是默认选中返回得数据：\",t.defaultTask)}else t.$message.error(\"获取接口失败\")}))},getCheckedKeys:function(){console.log(this.$refs.tree.getCheckedKeys())},setCheckedKeys:function(){this.$refs.tree.setCheckedKeys([])}},created:function(){\"edit\"===this.type&&(console.log(\"编辑测试任务222222\"),console.log(this.uiTestTaskData),this.ui_project_id=this.projectId,this.uiTestTaskForm={ui_test_task_name:this.uiTestTaskData.ui_test_task_name,ui_test_task_id:this.uiTestTaskData.id,describe:this.uiTestTaskData.describe},console.log(\"编辑测试任务\"),console.log(\"编辑测试任务\",this.uiTestTaskForm.ui_test_task_id),this.getUiCaseTreeFun(),this.getSingleUiTestTaskFun()),\"add\"===this.type&&(console.log(\"新增测试任务\",this.projectId),this.ui_project_id=this.projectId,this.getUiCaseTreeFun())}},x=w,U=(s(\"b9d0\"),s(\"2877\")),j=Object(U[\"a\"])(x,m,v,!1,null,\"3434909a\",null),P=j.exports,I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",[s(\"div\",{staticClass:\"crumbs\"},[s(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[s(\"el-breadcrumb-item\",[s(\"i\",{staticClass:\"el-icon-lx-calendar\"}),t._v(\" UI任务管理 \")]),s(\"el-breadcrumb-item\",[t._v(\"UI项目\")]),s(\"el-breadcrumb-item\",[t._v(\"UI任务\")]),s(\"el-breadcrumb-item\",[t._v(\"UI测试报告\")])],1)],1),s(\"el-row\",[s(\"el-button\",{on:{click:t.returnUITaskList}},[t._v(\"返回\")]),s(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.DownloadWebScriptTemplate}},[t._v(\"下载脚本模板\")])],1),s(\"div\",[s(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.tableData}},[s(\"el-table-column\",{attrs:{prop:\"id\",label:\"id\",sortable:\"\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"ui_test_result_name\",label:\"测试报告名称\",sortable:\"\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"ui_error_total_number\",label:\"失败总数\",sortable:\"\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"ui_successful_total_number\",label:\"成功总数\",sortable:\"\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"ui_total_number\",label:\"用例总数\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"create_time\",label:\"时间\",width:\"180\"}}),s(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[s(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(s){return t.checkReport(e.row)}}},[t._v(\"查看报告\")]),s(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(s){return t.deleteSingleRequest(e.row)}}},[t._v(\"删除\")]),s(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(s){return t.DownloadWebScript(e.row)}}},[t._v(\"下载脚本\")])]}}])})],1)],1),s(\"div\",[s(\"el-dialog\",{attrs:{visible:t.ui_ResultVisible,fullscreen:!1,\"destroy-on-close\":!0,\"show-close\":!0,width:\"70%\"},on:{\"update:visible\":function(e){t.ui_ResultVisible=e}}},[s(\"div\",{staticClass:\"schart-box\"},[s(\"div\",{staticClass:\"content-title\"},[t._v(\"测试结果\")]),s(\"schart\",{staticClass:\"schart\",attrs:{canvasId:\"pie\",options:t.options3}})],1),s(\"div\",[s(\"el-table\",{staticStyle:{width:\"65%\"},attrs:{data:t.ui_result_visible_table_data}},[s(\"el-table-column\",{attrs:{prop:\"id\",label:\"id\",sortable:\"\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"ui_test_case_name\",label:\"测试用例名称\",sortable:\"\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"ui_error\",label:\"失败\",sortable:\"\",width:\"180\"}}),s(\"el-table-column\",{attrs:{prop:\"ui_successful\",label:\"成功\",sortable:\"\",width:\"180\"}}),s(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[s(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(s){return t.check_abnormal(e.row)}}},[t._v(\"查看\")])]}}])})],1)],1)])],1),s(\"div\",[s(\"el-dialog\",{attrs:{visible:t.UiTestAbnormalResult,\"destroy-on-close\":!0,\"show-close\":!0,modal:!0,title:\"异常消息\",width:\"50%\"},on:{\"update:visible\":function(e){t.UiTestAbnormalResult=e}}},[s(\"span\",[t._v(t._s(t.ui_test_abnormal))])])],1)],1)},S=[],O=s(\"f5ac\"),C={name:\"UiTestTaskResult\",props:[\"uiTestTaskData\"],components:{Schart:O[\"a\"]},data:function(){return{ui_result_visible_table_data:[],ui_test_abnormal_result_id:\"\",ui_test_abnormal:\"\",ui_test_script:\"\",tableData:[],testTaskId:\"\",result_id:\"\",ui_ResultVisible:!1,UiTestAbnormalResult:!1,ui_Result:\"\",options3:{type:\"pie\",title:{text:\"测试结果\"},legend:{position:\"left\"},bgColor:\"#fbfbfb\",labels:[\"成功\",\"失败\"],datasets:[{data:[334,22]}]}}},mounted:function(){this.getUiCaseResultFun()},methods:{DownloadWebScript:function(t){var e;return this.result_id=t.id,e=l[\"b\"]+\"api/backend/ui_test_task/check_result/ui_test_web_script/\"+this.result_id+\"/\",console.log(e),window.location.href=e},DownloadWebScriptTemplate:function(){var t;return t=l[\"b\"]+\"api/backend/ui_test_task/check_result/ui_test_web_script/download_web_script_template/\",console.log(t),window.location.href=t},getUiCaseResultFun:function(){var t=this;T(this.testTaskId).then((function(e){!0===e.data.success?t.tableData=e.data.data.data:t.$message.error(\"获取接口失败\")}))},deleteSingleRequest:function(t){var e=this;this.result_id=t.id,g(this.testTaskId,this.result_id).then((function(t){!0===t.data.success?(e.tableData=t.data.data.data,e.$message.success(\"删除成功\"),e.getUiCaseResultFun()):e.$message.error(\"获取接口失败\")}))},checkReport:function(t){var e=this;this.result_id=t.id,k(this.result_id).then((function(t){!0===t.data.success?(e.options3.datasets[0].data=t.data.data.case_result_total,e.ui_result_visible_table_data=t.data.data.data,e.ui_ResultVisible=!0):e.$message.error(\"获取接口失败\")}))},check_abnormal:function(t){var e=this;this.ui_test_abnormal_result_id=t.id,_(this.ui_test_abnormal_result_id).then((function(t){!0===t.data.success?(console.log(t.data.data.ui_test_abnormal),e.ui_test_abnormal=t.data.data.ui_test_abnormal,e.UiTestAbnormalResult=!0):e.$message.error(\"获取接口失败\")}))},closeReport:function(){this.ui_ResultVisible=!1},returnUITaskList:function(){this.$parent.returnTaskList()}},created:function(){console.log(this.uiTestTaskData.id),this.testTaskId=this.uiTestTaskData.id}},R=C,$=(s(\"3494\"),Object(U[\"a\"])(R,I,S,!1,null,\"5242acf2\",null)),F=$.exports,A={inject:[\"reload\"],name:\"UiTask\",props:[\"type\",\"uiProjectId\"],data:function(){return{tableData:[],uiTestTaskId:\"\",showAddOrEditUiTestTask:!1,showUiTestTaskResult:!1,opsType:\"add\",currentUiTestTaskId:0,currentUiTestTaskData:{},projectId:\"\"}},methods:{getUiTestTaskFun:function(){var t=this;c(this.uiProjectId).then((function(e){console.log(e),!0===e.data.success?t.tableData=e.data.data:t.$message.error(\"获取接口失败\")}))},openAddUiTestTask:function(){this.opsType=\"add\",this.currentUiTestTaskId=0,this.currentUiTestTaskData={},this.showAddOrEditUiTestTask=!0},openEditUiTestTask:function(t){this.opsType=\"edit\",this.currentUiTestTaskId=t.id,this.currentUiTestTaskData=t,console.log(t),this.showAddOrEditUiTestTask=!0},deleteUiTestTask:function(t){var e=this;this.uiTestTaskId=t.id,f(this.uiTestTaskId).then((function(t){console.log(t),!0===t.data.success?(e.getUiTestTaskFun(),e.$message.success(\"删除测试任务成功\")):e.$message.error(\"删除测试任务失败\")}))},saveUiTestTask:function(){this.showAddOrEditUiTestTask=!1,this.getUiTestTaskFun()},cancelSaveUiTestTask:function(){this.showAddOrEditUiTestTask=!1,this.getUiTestTaskFun()},performUiTestTask:function(t){var e=this;this.uiTestTaskId=t.id,p(this.uiTestTaskId).then((function(t){console.log(t),!0===t.data.success?(e.getUiTestTaskFun(),e.$message.success(\"执行测试任务成功\")):10200===t.data.error.code.status?e.$message.error(\"当前有任务正在执行！\"):e.$message.error(\"执行测试任务失败\")}))},reportUiTestTask:function(t){this.currentUiTestTaskId=t.id,this.currentUiTestTaskData=t,console.log(t),this.showUiTestTaskResult=!0},returnProjectList:function(){this.$parent.returnProject()},returnTaskList:function(){this.showUiTestTaskResult=!1,this.getUiTestTaskFun()}},components:{\"add-or-edit-ui-test-task\":P,\"ui-test-task-result\":F},created:function(){\"enter\"===this.type&&(this.projectId=this.uiProjectId,this.getUiTestTaskFun())}},D=A,L=Object(U[\"a\"])(D,o,r,!1,null,\"3980ce3e\",null),M=L.exports,E={name:\"UiProjectTask\",data:function(){return{tableData:[],page:{page:1,total:0,size:10},projectId:\"\",opsType:\"enter\",showUiTask:!1,currentUiProjectId:0}},methods:{handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e)},handleSizeChange:function(t){this.page.size=t,this.getUiProjectFun()},handleCurrentChange:function(t){this.page.page=t,this.getUiProjectFun()},getUiProjectFun:function(){var t=this,e={page:this.page.page,size:this.page.size};Object(n[\"d\"])(e).then((function(e){console.log(e),!0===e.data.success?(t.tableData=e.data.data,t.page.total=e.data.data.total,t.page.page=e.data.data.page,t.page.size=e.data.data.size):t.$message.error(\"获取接口失败\")}))},enterProjectTask:function(t){this.projectId=t.id,console.log(this.projectId),this.opsType=\"enter\",this.currentUiProjectId=t.id,this.showUiTask=!0},returnProject:function(){this.showUiTask=!1}},components:{\"ui-task\":M},created:function(){this.getUiProjectFun()}},z=E,B=Object(U[\"a\"])(z,i,a,!1,null,\"3246917c\",null);e[\"default\"]=B.exports},ade3:function(t,e,s){\"use strict\";function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.d(e,\"a\",(function(){return i}))},b9d0:function(t,e,s){\"use strict\";s(\"3a03\")},f0bd:function(t,e,s){\"use strict\";s.d(e,\"d\",(function(){return a})),s.d(e,\"a\",(function(){return n})),s.d(e,\"c\",(function(){return o})),s.d(e,\"e\",(function(){return r})),s.d(e,\"b\",(function(){return l}));var i=s(\"2934\"),a=function(){return Object(i[\"c\"])(\"api/backend/ui_project/list/\")},n=function(t){return Object(i[\"e\"])(\"api/backend/ui_project/\",t)},o=function(t){return Object(i[\"c\"])(\"api/backend/ui_project/\"+t+\"/\")},r=function(t,e){return Object(i[\"d\"])(\"api/backend/ui_project/\"+t+\"/\",e)},l=function(t){return Object(i[\"a\"])(\"api/backend/ui_project/\"+t+\"/\")}},f5ac:function(t,e,s){\"use strict\";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",[s(\"canvas\",{attrs:{id:t.canvasId}})])},a=[],n=(s(\"8e6e\"),s(\"ac6a\"),s(\"456d\"),s(\"ade3\")),o=s(\"2c8a\"),r=s.n(o);function l(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?l(Object(s),!0).forEach((function(e){Object(n[\"a\"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var u={props:{canvasId:{type:String,default:\"\",required:!0},options:{type:Object,required:!0}},mounted:function(){this.renderChart()},methods:{renderChart:function(){if(this.checkOptions()){var t=c({},this.options);new r.a(this.canvasId,t)}},checkOptions:function(){var t=this.options;return!(!t.datasets||!t.datasets.length)&&!(!t.labels||!t.labels.length)}},watch:{options:{handler:function(t,e){this.renderChart()},deep:!0}}},d=u,h=s(\"2877\"),f=Object(h[\"a\"])(d,i,a,!1,null,null,null);e[\"a\"]=f.exports}}]);","extractedComments":[]}