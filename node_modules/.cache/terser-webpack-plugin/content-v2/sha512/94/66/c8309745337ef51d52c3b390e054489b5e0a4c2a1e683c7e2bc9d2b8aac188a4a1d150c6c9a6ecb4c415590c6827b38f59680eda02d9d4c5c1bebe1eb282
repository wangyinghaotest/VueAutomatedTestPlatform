{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"apiEnvironment\"],{\"2ddf\":function(e,t,a){\"use strict\";a.d(t,\"c\",(function(){return n})),a.d(t,\"a\",(function(){return l})),a.d(t,\"d\",(function(){return o})),a.d(t,\"e\",(function(){return r})),a.d(t,\"b\",(function(){return p}));var i=a(\"82f8\"),n=function(){return Object(i[\"c\"])(\"api/backend/api_environment/list/\")},l=function(e){return Object(i[\"e\"])(\"api/backend/api_environment/\",e)},o=function(e){return Object(i[\"c\"])(\"api/backend/api_environment/\"+e+\"/\")},r=function(e,t){return Object(i[\"d\"])(\"api/backend/api_environment/\"+e+\"/\",t)},p=function(e){return Object(i[\"a\"])(\"api/backend/api_environment/\"+e+\"/\")}},db37:function(e,t,a){\"use strict\";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"div\",{staticClass:\"crumbs\"},[a(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[a(\"el-breadcrumb-item\",[a(\"i\",{staticClass:\"el-icon-lx-calendar\"}),e._v(\" API环境 \")]),a(\"el-breadcrumb-item\",[e._v(\"API环境\")])],1)],1),a(\"el-row\",[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.addEnvironmentPopup}},[e._v(\"创建API环境\")])],1),a(\"el-dialog\",{attrs:{title:\"创建API环境\",visible:e.addApiEnvironmentdialogFormVisible},on:{\"update:visible\":function(t){e.addApiEnvironmentdialogFormVisible=t}}},[a(\"el-form\",{ref:\"addApiProjectFormRef\",attrs:{model:e.addApiEnvironmentData,rules:e.rules}},[a(\"el-form-item\",{attrs:{label:\"环境名称\",\"label-width\":\"100px\",prop:\"api_environment_name\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.addApiEnvironmentData.api_environment_name,callback:function(t){e.$set(e.addApiEnvironmentData,\"api_environment_name\",t)},expression:\"addApiEnvironmentData.api_environment_name\"}})],1),a(\"el-form-item\",{attrs:{label:\"域名\",\"label-width\":\"100px\",prop:\"api_title\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.addApiEnvironmentData.api_title,callback:function(t){e.$set(e.addApiEnvironmentData,\"api_title\",t)},expression:\"addApiEnvironmentData.api_title\"}})],1),a(\"el-form-item\",{attrs:{label:\"环境描述\",\"label-width\":\"100px\",prop:\"api_describe\"}},[a(\"el-input\",{attrs:{type:\"textarea\",autocomplete:\"off\"},model:{value:e.addApiEnvironmentData.api_environment_describe,callback:function(t){e.$set(e.addApiEnvironmentData,\"api_environment_describe\",t)},expression:\"addApiEnvironmentData.api_environment_describe\"}})],1)],1),a(\"el-tabs\",{attrs:{\"tab-position\":e.tabPosition}},[a(\"el-tab-pane\",{attrs:{label:\"全局变量设置\"}},[a(\"div\",[a(\"el-table\",{staticStyle:{width:\"80%\"},attrs:{data:e.global_variable}},[a(\"el-table-column\",{attrs:{prop:\"api_parameter_name\",label:\"参数名称\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{placeholder:\"请输入${xxx}命名\",\"controls-position\":\"right\"},model:{value:t.row.api_global_variable_name,callback:function(a){e.$set(t.row,\"api_global_variable_name\",a)},expression:\"scope.row.api_global_variable_name\"}})]}}])}),a(\"el-table-column\",{attrs:{prop:\"api_parameter_value\",label:\"参数值\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{placeholder:\"\",\"controls-position\":\"right\"},model:{value:t.row.api_global_variable_value,callback:function(a){e.$set(t.row,\"api_global_variable_value\",a)},expression:\"scope.row.api_global_variable_value\"}})]}}])}),a(\"el-table-column\",{attrs:{prop:\"api_field_describe\",label:\"字段描述\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{placeholder:\"\",\"controls-position\":\"right\"},model:{value:t.row.api_global_variable_describe,callback:function(a){e.$set(t.row,\"api_global_variable_describe\",a)},expression:\"scope.row.api_global_variable_describe\"}})]}}])}),a(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{on:{click:e.AddGlobalVariableRow}},[e._v(\"添加行\")]),a(\"el-button\",{staticStyle:{width:\"68px\",\"padding-top\":\"9px\",\"padding-bottom\":\"9px\",\"margin-left\":\"10px\"},attrs:{size:\"mini\",type:\"danger\"},on:{click:function(a){return e.DeleteGlobalVariable(t.$index,e.global_variable)}}},[e._v(\"删除\")])]}}])})],1)],1)])],1),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:function(t){e.addApiEnvironmentdialogFormVisible=!1}}},[e._v(\"取 消\")]),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.addApiEnvironment}},[e._v(\"确 定\")])],1)],1),a(\"el-dialog\",{attrs:{title:\"编辑环境\",visible:e.editApiEnvironmentdialogFormVisible},on:{\"update:visible\":function(t){e.editApiEnvironmentdialogFormVisible=t}}},[a(\"el-form\",{ref:\"editEnvironmentFormRef\",attrs:{model:e.editApiEnvironmentData,rules:e.rules}},[a(\"el-form-item\",{attrs:{label:\"环境名称\",\"label-width\":\"100px\",prop:\"api_environment_name\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.editApiEnvironmentData.api_environment_name,callback:function(t){e.$set(e.editApiEnvironmentData,\"api_environment_name\",t)},expression:\"editApiEnvironmentData.api_environment_name\"}})],1),a(\"el-form-item\",{attrs:{label:\"环境标题\",\"label-width\":\"100px\",prop:\"api_title\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.editApiEnvironmentData.api_title,callback:function(t){e.$set(e.editApiEnvironmentData,\"api_title\",t)},expression:\"editApiEnvironmentData.api_title\"}})],1),a(\"el-form-item\",{attrs:{label:\"项目描述\",\"label-width\":\"100px\",prop:\"api_describe\"}},[a(\"el-input\",{attrs:{type:\"textarea\",autocomplete:\"off\"},model:{value:e.editApiEnvironmentData.api_environment_describe,callback:function(t){e.$set(e.editApiEnvironmentData,\"api_environment_describe\",t)},expression:\"editApiEnvironmentData.api_environment_describe\"}})],1)],1),a(\"el-tabs\",{attrs:{\"tab-position\":e.tabPosition}},[a(\"el-tab-pane\",{attrs:{label:\"全局变量设置\"}},[a(\"div\",[a(\"el-table\",{staticStyle:{width:\"80%\"},attrs:{data:e.global_variable}},[a(\"el-table-column\",{attrs:{prop:\"api_parameter_name\",label:\"参数名称\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{placeholder:\"请输入${xxx}命名\",\"controls-position\":\"right\"},model:{value:t.row.api_global_variable_name,callback:function(a){e.$set(t.row,\"api_global_variable_name\",a)},expression:\"scope.row.api_global_variable_name\"}})]}}])}),a(\"el-table-column\",{attrs:{prop:\"api_parameter_value\",label:\"参数值\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{placeholder:\"\",\"controls-position\":\"right\"},model:{value:t.row.api_global_variable_value,callback:function(a){e.$set(t.row,\"api_global_variable_value\",a)},expression:\"scope.row.api_global_variable_value\"}})]}}])}),a(\"el-table-column\",{attrs:{prop:\"api_field_describe\",label:\"字段描述\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{placeholder:\"\",\"controls-position\":\"right\"},model:{value:t.row.api_global_variable_describe,callback:function(a){e.$set(t.row,\"api_global_variable_describe\",a)},expression:\"scope.row.api_global_variable_describe\"}})]}}])}),a(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{on:{click:e.AddGlobalVariableRow}},[e._v(\"添加行\")]),a(\"el-button\",{staticStyle:{width:\"68px\",\"padding-top\":\"9px\",\"padding-bottom\":\"9px\",\"margin-left\":\"10px\"},attrs:{size:\"mini\",type:\"danger\"},on:{click:function(a){return e.DeleteGlobalVariable(t.$index,e.global_variable)}}},[e._v(\"删除\")])]}}])})],1)],1)])],1),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:function(t){e.editApiEnvironmentdialogFormVisible=!1}}},[e._v(\"取 消\")]),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.editEnvironment}},[e._v(\"确 定\")])],1)],1),a(\"div\",[a(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:e.tableData}},[a(\"el-table-column\",{attrs:{prop:\"id\",label:\"id\",sortable:\"\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"api_environment_name\",label:\"环境名称\",sortable:\"\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"api_title\",label:\"环境标题\",sortable:\"\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"api_environment_describe\",label:\"环境描述\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"update_time\",label:\"更新时间\",width:\"180\"}}),a(\"el-table-column\",{attrs:{prop:\"create_time\",label:\"创建时间\",width:\"180\"}}),a(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(a){return e.editApiEnvironmentPopup(t.row)}}},[e._v(\"编辑\")]),a(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(a){return e.deleteEnvironmentPopup(t.row)}}},[e._v(\"删除\")])]}}])})],1)],1)],1)},n=[],l=a(\"2ddf\"),o={name:\"ApiEnvironment\",data:function(){return{tableData:[],tabPosition:\"top\",global_variable:[{api_global_variable_name:\"\",api_global_variable_value:\"\",api_global_variable_describe:\"\"}],page:{page:1,total:0,size:10},addApiEnvironmentdialogFormVisible:!1,editApiEnvironmentdialogFormVisible:!1,addApiEnvironmentData:{api_environment_name:\"\",api_title:\"\",api_describe:\"\"},editApiEnvironmentData:{api_environment_name:\"\",api_title:\"\",api_environment_describe:\"\",id:0},apiEnvironmentId:\"\",apiEnvironmentData:\"\",rules:{api_environment_name:[{required:!0,message:\"请输入环境名称\",trigger:\"blur\"}],api_title:[{required:!0,message:\"请输入环境标题\",trigger:\"blur\"}]}}},methods:{DeleteGlobalVariable:function(e,t){1===this.global_variable.length?(console.log(this.global_variable.length),this.$message.error(\"至少保留一行\")):t.splice(e,1)},AddGlobalVariableRow:function(e,t){this.global_variable.push({api_global_variable_name:\"\",api_global_variable_value:\"\",api_global_variable_describe:\"\"})},formatter:function(e,t){return e.address},handleEdit:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},handleSizeChange:function(e){this.page.size=e,this.getApiEnvironmentFun()},handleCurrentChange:function(e){this.page.page=e,this.getApiEnvironmentFun()},getApiEnvironmentFun:function(){var e=this,t={page:this.page.page,size:this.page.size};Object(l[\"c\"])(t).then((function(t){console.log(t),!0===t.data.success?(e.tableData=t.data.data,e.page.total=t.data.data.total,e.page.page=t.data.data.page,e.page.size=t.data.data.size):e.$message.error(\"获取接口失败\")}))},addApiEnvironment:function(){var e=this,t=JSON.parse(JSON.stringify(this.addApiEnvironmentData));this.$refs.addApiProjectFormRef.validate((function(a){if(!a)return!1;t.global_variable_data=e.global_variable,Object(l[\"a\"])(t).then((function(t){!0===t.data.success?(e.getApiEnvironmentFun(),e.addApiEnvironmentdialogFormVisible=!1,e.$message.success(\"添加API环境成功\"),e.global_variable=[{api_global_variable_name:\"\",api_global_variable_value:\"\",api_global_variable_describe:\"\"}]):e.$message.error(\"添加API环境失败\")}))}))},addEnvironmentPopup:function(){this.addApiEnvironmentData={api_environment_name:\"\",api_title:\"\",api_describe:\"\"},this.addApiEnvironmentdialogFormVisible=!0},handleNodeClick:function(e){this.currentServiceId=e.id},editEnvironment:function(){var e=this,t=JSON.parse(JSON.stringify(this.editApiEnvironmentData));t.global_variable_data=this.global_variable,this.$refs.editEnvironmentFormRef.validate((function(a){if(console.log(e.apiEnvironmentId),!a)return!1;Object(l[\"e\"])(e.apiEnvironmentId,t).then((function(t){console.log(t),!0===t.data.success?(e.getApiEnvironmentFun(),e.editApiEnvironmentdialogFormVisible=!1,e.$message.success(\"编辑API环境成功\")):e.$message.error(\"编辑API环境失败\")}))}))},editApiEnvironmentPopup:function(e){var t=this;this.apiEnvironmentId=e.id,this.apiEnvironmentData=e,this.editApiEnvironmentdialogFormVisible=!0,Object(l[\"d\"])(this.apiEnvironmentId).then((function(e){console.log(e),!0===e.data.success?(t.editApiEnvironmentData.api_environment_name=e.data.data.api_environment_name,t.editApiEnvironmentData.api_describe=e.data.data.api_describe,t.editApiEnvironmentData.api_title=e.data.data.api_title,t.global_variable=e.data.data.global_variable):t.$message.error(\"获取接口失败\")}))},deleteEnvironmentPopup:function(e){var t=this;this.$confirm(\"此操作将永久删除该环境, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){t.apiEnvironmentId=e.id,t.apiEnvironmentData=e,Object(l[\"b\"])(t.apiEnvironmentId).then((function(e){console.log(e),!0===e.data.success?(t.getApiEnvironmentFun(),t.$message.success(\"删除API环境成功\")):t.$message.error(\"删除API环境失败\")}))})).catch((function(){t.$message({type:\"info\",message:\"已取消删除\"})}))}},created:function(){this.getApiEnvironmentFun()}},r=o,p=a(\"2877\"),s=Object(p[\"a\"])(r,i,n,!1,null,\"dc4fb904\",null);t[\"default\"]=s.exports}}]);","extractedComments":[]}