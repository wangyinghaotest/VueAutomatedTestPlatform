{"remainingRequest":"E:\\test-platform-vue\\node_modules\\babel-loader\\lib\\index.js!E:\\test-platform-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\test-platform-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\test-platform-vue\\src\\components\\page\\apiAutomation\\apiTask\\ApiTestTaskResult.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\test-platform-vue\\src\\components\\page\\apiAutomation\\apiTask\\ApiTestTaskResult.vue","mtime":1652877133455},{"path":"E:\\test-platform-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652877126456},{"path":"E:\\test-platform-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1652877125945},{"path":"E:\\test-platform-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652877126456},{"path":"E:\\test-platform-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1652877132787}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0QXBpQ2FzZVJlc3VsdFJlcXVlc3QsIGRlbGV0ZUFwaUNhc2VSZXN1bHRSZXF1ZXN0LCBwb3N0UGVyZm9ybUFwaVRhc2tSZXF1ZXN0IH0gZnJvbSAiLi4vLi4vLi4vLi4vYXBpL2FwaUF1dG9tYXRpb24vYXBpVGVzdFRhc2siOwppbXBvcnQgQVBJVGVzdFRhc2tSZXN1bHREZXRhaWxzIGZyb20gIi4vQVBJVGVzdFRhc2tSZXN1bHREZXRhaWxzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBcGlUZXN0VGFza1Jlc3VsdCcsCiAgaW5qZWN0OiBbJ3JlbG9hZCddLAogIHByb3BzOiBbJ2FwaVRlc3RUYXNrRGF0YScsICdhcGlUZXN0VGFza0lkJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIHRlc3RUYXNrSWQ6ICIiLAogICAgICByZXN1bHRfaWQ6ICIiLAogICAgICBhcGlfUmVzdWx0OiAiIiwKICAgICAgc2hvd0FwaVRlc3RUYXNrUmVzdWx0RGV0YWlsczogZmFsc2UKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRBcGlDYXNlUmVzdWx0RnVuKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBkZXRhaWxzUmVwb3J0OiBmdW5jdGlvbiBkZXRhaWxzUmVwb3J0KGRhdGEpIHsKICAgICAgdmFyIF90aGlzJCRyb3V0ZXIkcmVzb2x2ZSA9IHRoaXMuJHJvdXRlci5yZXNvbHZlKHsKICAgICAgICBwYXRoOiAnL2FwaV90ZXN0X3Rhc2tfcmVzdWx0JywKICAgICAgICBxdWVyeTogewogICAgICAgICAgYXBpUmVzdWx0SWQ6IGRhdGEuaWQKICAgICAgICB9CiAgICAgIH0pLAogICAgICAgICAgaHJlZiA9IF90aGlzJCRyb3V0ZXIkcmVzb2x2ZS5ocmVmOwoKICAgICAgd2luZG93Lm9wZW4oaHJlZiwgJ19ibGFuaycpOwogICAgfSwKICAgIC8vIOaJp+ihjOa1i+ivleS7u+WKoQogICAgcGVyZm9ybUFwaVRlc3RUYXNrOiBmdW5jdGlvbiBwZXJmb3JtQXBpVGVzdFRhc2soKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBwb3N0UGVyZm9ybUFwaVRhc2tSZXF1ZXN0KHRoaXMudGVzdFRhc2tJZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwoKICAgICAgICBpZiAodHJ1ZSA9PT0gZGF0YS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgIC8vIHRoaXMuZ2V0QXBpVGVzdFRhc2tGdW4oKQogICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5omn6KGM5rWL6K+V5Lu75Yqh5oiQ5YqfIik7CiAgICAgICAgfSBlbHNlIGlmICgxMDIwMCA9PT0gZGF0YS5kYXRhLmVycm9yLmNvZGUuc3RhdHVzKSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcigi5b2T5YmN5pyJQVBJ5Lu75Yqh5q2j5Zyo5omn6KGM77yBIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKCLmiafooYxBUEnmtYvor5Xku7vliqHlpLHotKUiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPlua1i+ivleaKpeWRigogICAgZ2V0QXBpQ2FzZVJlc3VsdEZ1bjogZnVuY3Rpb24gZ2V0QXBpQ2FzZVJlc3VsdEZ1bigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBnZXRBcGlDYXNlUmVzdWx0UmVxdWVzdCh0aGlzLnRlc3RUYXNrSWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBpZiAodHJ1ZSA9PT0gZGF0YS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgIF90aGlzMi50YWJsZURhdGEgPSBkYXRhLmRhdGEuZGF0YS5kYXRhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UuaW5mbygi6I635Y+W5o6l5Y+j5aSx6LSlIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjaGVja1JlcG9ydDogZnVuY3Rpb24gY2hlY2tSZXBvcnQoZGF0YSkgewogICAgICB0aGlzLnNob3dBcGlUZXN0VGFza1Jlc3VsdERldGFpbHMgPSB0cnVlOwogICAgICB0aGlzLnJlc3VsdF9pZCA9IGRhdGEuaWQ7CiAgICB9LAogICAgcmV0dXJuQVBJUmVwb3J0TGlzdDogZnVuY3Rpb24gcmV0dXJuQVBJUmVwb3J0TGlzdCgpIHsKICAgICAgdGhpcy5zaG93QXBpVGVzdFRhc2tSZXN1bHREZXRhaWxzID0gZmFsc2U7CiAgICAgIHRoaXMuZ2V0QXBpQ2FzZVJlc3VsdEZ1bigpOwogICAgfSwKICAgIC8vIOWIoOmZpOaKpeWRigogICAgZGVsZXRlUmVwb3J0OiBmdW5jdGlvbiBkZWxldGVSZXBvcnQoZGF0YSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMucmVzdWx0X2lkID0gZGF0YS5pZDsKICAgICAgZGVsZXRlQXBpQ2FzZVJlc3VsdFJlcXVlc3QodGhpcy5yZXN1bHRfaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBpZiAodHJ1ZSA9PT0gZGF0YS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgIF90aGlzMy5nZXRBcGlDYXNlUmVzdWx0RnVuKCk7CgogICAgICAgICAgX3RoaXMzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpEFQSea1i+ivleaKpeWRiuaIkOWKnyIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UuZXJyb3IoIuWIoOmZpEFQSea1i+ivleaKpeWRiuWksei0pSIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g6L+U5Zue5Lu75Yqh5YiX6KGoCiAgICByZXR1cm5UYXNrTGlzdDogZnVuY3Rpb24gcmV0dXJuVGFza0xpc3QoKSB7CiAgICAgIHRoaXMuJHBhcmVudC5yZXR1cm5BUElUYXNrTGlzdCgpOwogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgJ2FwaS10ZXN0LXRhc2stcmVzdWx0X2RldGFpbHMnOiBBUElUZXN0VGFza1Jlc3VsdERldGFpbHMKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBjb25zb2xlLmxvZyh0aGlzLmFwaVRlc3RUYXNrRGF0YS5pZCk7CiAgICB0aGlzLnRlc3RUYXNrSWQgPSB0aGlzLmFwaVRlc3RUYXNrRGF0YS5pZDsKICB9Cn07"},{"version":3,"sources":["ApiTestTaskResult.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <api-test-task-result_details\r\n            :apiResultId = \"result_id\"\r\n            v-if=\"showApiTestTaskResultDetails\">\r\n        </api-test-task-result_details>\r\n        <div v-else>\r\n            <div class=\"crumbs\">\r\n                <el-breadcrumb separator=\"/\">\r\n                    <el-breadcrumb-item>\r\n                        <i class=\"el-icon-lx-calendar\"></i> API任务管理\r\n                    </el-breadcrumb-item>\r\n                    <el-breadcrumb-item>API项目</el-breadcrumb-item>\r\n                    <el-breadcrumb-item>API任务</el-breadcrumb-item>\r\n                    <el-breadcrumb-item>API测试报告</el-breadcrumb-item>\r\n                </el-breadcrumb>\r\n            </div>\r\n            <el-row>\r\n                <el-button @click=\"returnTaskList\">返回</el-button>\r\n                <el-button type=\"danger\" @click=\"performApiTestTask\">执行</el-button>\r\n            </el-row>\r\n            <div>\r\n                <el-table\r\n                    :data=\"tableData\"\r\n                    style=\"width: 100%\">\r\n                    <!--                    :default-sort = \"{prop: 'date', order: 'descending'}\">-->\r\n                    <el-table-column\r\n                        prop=\"id\"\r\n                        label=\"id\"\r\n                        sortable\r\n                        width=\"180\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"api_test_result_name\"\r\n                        label=\"测试报告名称\"\r\n                        sortable\r\n                        width=\"180\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"api_total_number\"\r\n                        label=\"总数\"\r\n                        sortable\r\n                        width=\"180\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"api_successful_total_number\"\r\n                        label=\"成功\"\r\n                        sortable\r\n                        width=\"180\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                        prop=\"api_error_total_number\"\r\n                        label=\"失败\"\r\n                        sortable\r\n                        width=\"180\">\r\n                    </el-table-column>\r\n\r\n                    <el-table-column label=\"操作\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-button\r\n                                size=\"mini\"\r\n                                type=\"danger\"\r\n                                @click=\"detailsReport(scope.row)\">查看报告</el-button>\r\n<!--                            <el-button-->\r\n<!--                                size=\"mini\"-->\r\n<!--                                type=\"danger\"-->\r\n<!--                                @click=\"checkReport(scope.row)\">查看报告</el-button>-->\r\n                            <el-button\r\n                                size=\"mini\"\r\n                                type=\"danger\"\r\n                                @click=\"deleteReport(scope.row)\">删除</el-button>\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {getApiCaseResultRequest, deleteApiCaseResultRequest, postPerformApiTaskRequest} from '../../../../api/apiAutomation/apiTestTask';\r\nimport APITestTaskResultDetails from './APITestTaskResultDetails';\r\nexport default {\r\n    name: 'ApiTestTaskResult',\r\n    inject:['reload'],\r\n    props: ['apiTestTaskData', 'apiTestTaskId'],\r\n    data(){\r\n\r\n        return{\r\n\r\n            tableData: [],\r\n            testTaskId: \"\",\r\n            result_id: \"\",\r\n            api_Result: \"\",\r\n            showApiTestTaskResultDetails: false\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n    },\r\n    mounted() {\r\n        this.getApiCaseResultFun()\r\n\r\n\r\n    },\r\n    methods: {\r\n        detailsReport(data){\r\n            const {href} = this.$router.resolve({\r\n                path: '/api_test_task_result',\r\n                query: {\r\n                    apiResultId:data.id,\r\n                }\r\n            })\r\n            window.open(href, '_blank')\r\n\r\n\r\n        },\r\n\r\n        // 执行测试任务\r\n        performApiTestTask(){\r\n            postPerformApiTaskRequest(this.testTaskId).then(data => {\r\n                console.log(data)\r\n                if (true === data.data.success){\r\n                    // this.getApiTestTaskFun()\r\n                    this.$message.success(\"执行测试任务成功\")\r\n                }\r\n                else if(10200 === data.data.error.code.status){\r\n                    this.$message.error(\"当前有API任务正在执行！\")\r\n\r\n                }\r\n                else {\r\n                    this.$message.error(\"执行API测试任务失败\")\r\n                }\r\n            })\r\n        },\r\n\r\n\r\n        // 获取测试报告\r\n        getApiCaseResultFun() {\r\n            getApiCaseResultRequest(this.testTaskId).then(data =>{\r\n                if (true === data.data.success){\r\n                    this.tableData = data.data.data.data;\r\n\r\n                }else {\r\n                    this.$message.info(\"获取接口失败\")\r\n                }\r\n\r\n            })\r\n        },\r\n\r\n\r\n        checkReport(data){\r\n            this.showApiTestTaskResultDetails = true\r\n            this.result_id = data.id\r\n\r\n        },\r\n\r\n\r\n        returnAPIReportList(){\r\n            this.showApiTestTaskResultDetails = false\r\n            this.getApiCaseResultFun()\r\n        },\r\n\r\n        // 删除报告\r\n        deleteReport(data){\r\n            this.result_id = data.id\r\n            deleteApiCaseResultRequest(this.result_id).then(data =>{\r\n                if (true === data.data.success){\r\n                    this.getApiCaseResultFun()\r\n                    this.$message.success(\"删除API测试报告成功\")\r\n                }\r\n                else {\r\n                    this.$message.error(\"删除API测试报告失败\")\r\n                }\r\n\r\n            })\r\n        },\r\n\r\n        // 返回任务列表\r\n        returnTaskList(){\r\n            this.$parent.returnAPITaskList();\r\n\r\n        }\r\n\r\n\r\n\r\n    },\r\n    components: {\r\n        'api-test-task-result_details': APITestTaskResultDetails\r\n\r\n    },\r\n    created() {\r\n        console.log(this.apiTestTaskData.id)\r\n        this.testTaskId = this.apiTestTaskData.id\r\n\r\n    }\r\n\r\n\r\n\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"sourceRoot":"src/components/page/apiAutomation/apiTask"}]}