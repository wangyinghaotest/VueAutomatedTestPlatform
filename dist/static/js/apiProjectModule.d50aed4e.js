(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["apiProjectModule"],{"157b":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showApiModule?a("api-module",{attrs:{type:e.opsType,apiProjectId:e.currentApiProjectId}}):a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-calendar"}),e._v(" API项目 ")]),a("el-breadcrumb-item",[e._v("API项目")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"id",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"api_project_name",label:"API项目名称",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"describe",label:"API项目描述",width:"180"}}),a("el-table-column",{attrs:{prop:"updata_time",label:"更新时间",width:"180"}}),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"180"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.enterApiProjectModule(t.row)}}},[e._v("进入")])]}}])})],1)],1)],1)},i=[],l=a("453f"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-calendar"}),e._v(" API项目 ")]),a("el-breadcrumb-item",[e._v("API模块")])],1)],1),a("el-row",[a("el-button",{on:{click:e.returnProjectList}},[e._v("返回")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addModulePopup}},[e._v("创建API模块")])],1),a("el-dialog",{attrs:{title:"创建页面",visible:e.addModuledialogFormVisible},on:{"update:visible":function(t){e.addModuledialogFormVisible=t}}},[a("el-form",{ref:"addModuleFormRef",attrs:{model:e.addModuleData,rules:e.rules}},[a("el-form-item",{attrs:{label:"模块名称","label-width":"100px",prop:"api_module_name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addModuleData.api_module_name,callback:function(t){e.$set(e.addModuleData,"api_module_name",t)},expression:"addModuleData.api_module_name"}})],1),a("el-form-item",{attrs:{label:"模块描述","label-width":"100px",prop:"api_module_describe"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.addModuleData.api_module_describe,callback:function(t){e.$set(e.addModuleData,"api_module_describe",t)},expression:"addModuleData.api_module_describe"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addModuledialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addModule}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑模块",visible:e.editModuledialogFormVisible},on:{"update:visible":function(t){e.editModuledialogFormVisible=t}}},[a("el-form",{ref:"editPageFormRef",attrs:{model:e.editModuleData,rules:e.rules}},[a("el-form-item",{attrs:{label:"模块名称","label-width":"100px",prop:"api_module_name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.editModuleData.api_module_name,callback:function(t){e.$set(e.editModuleData,"api_module_name",t)},expression:"editModuleData.api_module_name"}})],1),a("el-form-item",{attrs:{label:"模块描述","label-width":"100px",prop:"api_module_describe"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.editModuleData.api_module_describe,callback:function(t){e.$set(e.editModuleData,"api_module_describe",t)},expression:"editModuleData.api_module_describe"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editModuledialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editModule}},[e._v("确 定")])],1)],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"id",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"api_project_name",label:"API项目名称",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"api_module_name",label:"API模块名称",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"api_module_describe",label:"API模块描述",width:"180"}}),a("el-table-column",{attrs:{prop:"updata_time",label:"更新时间",width:"180"}}),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"180"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.editModulePopup(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteModulePopup(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40,50],"page-size":e.size_page,layout:"total, sizes, prev, pager, next, jumper",total:e.total_module},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},r=[],n=a("6765"),u={name:"ApiModule",props:["type","apiProjectId"],data:function(){return{tableData:[],currentPage:1,size_page:10,total_module:0,addModuledialogFormVisible:!1,editModuledialogFormVisible:!1,addModuleData:{api_module_name:"",api_module_describe:"",api_project_id:this.projectId},apiProjectSelect:[],apiProjectSelectId:"",editModuleData:{api_module_name:"",api_module_describe:"",api_project_id:this.projectId,id:0},moduleId:"",projectId:"",rules:{api_module_name:[{required:!0,message:"请输入模块名称",trigger:"blur"}],api_module_describe:[{required:!0,message:"请输入模块描述",trigger:"blur"}]}}},methods:{formatter:function(e,t){return e.address},handleEdit:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},handleSizeChange:function(e){this.size_page=e,this.getSingleAPIProjectModule()},handleCurrentChange:function(e){this.currentPage=e,this.getSingleAPIProjectModule()},addModule:function(){var e=this,t=JSON.parse(JSON.stringify(this.addModuleData));console.log(t),this.$refs.addModuleFormRef.validate((function(a){if(!a)return!1;Object(n["a"])(t).then((function(t){console.log(t),!0===t.data.success?(e.addModuledialogFormVisible=!1,e.getSingleAPIProjectModule(),e.$message.success("创建模块成功")):e.$message.error("创建模块失败")}))}))},addModulePopup:function(){this.addModuleData={api_module_name:"",api_module_describe:"",api_project_id:this.projectId},this.addModuledialogFormVisible=!0},handleNodeClick:function(e){this.currentServiceId=e.id},editModule:function(){var e=this,t=JSON.parse(JSON.stringify(this.editModuleData));this.$refs.editPageFormRef.validate((function(a){if(console.log(e.projectId),!a)return!1;Object(n["e"])(e.moduleId,t).then((function(t){console.log(t),!0===t.data.success?(e.getSingleAPIProjectModule(),e.editModuledialogFormVisible=!1,e.$message.success("编辑页面成功")):e.$message.error("编辑页面失败")}))}))},editModulePopup:function(e){var t=this;this.moduleId=e.id,this.editModuleData=e,console.log(this.moduleId),Object(n["c"])(this.moduleId).then((function(e){console.log(e),!0===e.data.success?(t.editModuleData.api_module_name=e.data.data.api_module_name,t.editModuleData.api_module_describe=e.data.data.api_module_describe,t.editModuleData.api_project_id=e.data.data.api_project,console.log("这是获取项目id"),t.editModuledialogFormVisible=!0):t.$message.error("获取接口失败")}))},deleteModulePopup:function(e){var t=this;this.moduleId=e.id,Object(n["b"])(this.moduleId).then((function(e){console.log(e),!0===e.data.success?(t.getSingleAPIProjectModule(),t.$message.success("删除页面成功")):t.$message.error("删除页面失败")}))},getSingleAPIProjectModule:function(){var e=this;Object(n["d"])(this.projectId,this.size_page,this.currentPage).then((function(t){!0===t.data.success?(console.log(t.data.data),e.tableData=t.data.data.data,e.total_module=t.data.data.total_module):e.$message.error("获取接口失败")}))},returnProjectList:function(){this.$parent.apiProjectList()}},created:function(){console.log(this.apiProjectId),"enter"===this.type&&(this.projectId=this.apiProjectId,this.getSingleAPIProjectModule())}},c=u,s=a("2877"),p=Object(s["a"])(c,d,r,!1,null,"0ff00460",null),m=p.exports,b={name:"ApiProjectModule",data:function(){return{tableData:[],page:{page:1,total:0,size:10},apiProjectId:"",opsType:"enter",showApiModule:!1,currentApiProjectId:0}},methods:{handleEdit:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},handleSizeChange:function(e){this.page.size=e,this.getApiProjectFun()},handleCurrentChange:function(e){this.page.page=e,this.getApiProjectFun()},getApiProjectFun:function(){var e=this,t={page:this.page.page,size:this.page.size};Object(l["c"])(t).then((function(t){console.log(t),!0===t.data.success?(e.tableData=t.data.data,e.page.total=t.data.data.total,e.page.page=t.data.data.page,e.page.size=t.data.data.size):e.$message.error("获取接口失败")}))},enterApiProjectModule:function(e){this.apiProjectId=e.id,console.log(this.apiProjectId),this.opsType="enter",this.currentApiProjectId=e.id,this.showApiModule=!0},apiProjectList:function(){this.showApiModule=!1}},components:{"api-module":m},created:function(){this.getApiProjectFun()}},f=b,_=Object(s["a"])(f,o,i,!1,null,"c3a7eda0",null);t["default"]=_.exports},"453f":function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return r})),a.d(t,"b",(function(){return n}));var o=a("82f8"),i=function(){return Object(o["c"])("api/backend/api_project/list/")},l=function(e){return Object(o["e"])("api/backend/api_project/",e)},d=function(e){return Object(o["c"])("api/backend/api_project/"+e+"/")},r=function(e,t){return Object(o["d"])("api/backend/api_project/"+e+"/",t)},n=function(e){return Object(o["a"])("api/backend/api_project/"+e+"/")}},6765:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return d})),a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return n}));var o=a("82f8"),i=function(e){return Object(o["e"])("api/backend/api_module/",e)},l=function(e){return Object(o["c"])("api/backend/api_module/"+e+"/")},d=function(e,t){return Object(o["d"])("api/backend/api_module/"+e+"/",t)},r=function(e){return Object(o["a"])("api/backend/api_module/"+e+"/")},n=function(e,t,a){return Object(o["c"])("api/backend/api_project/api_module/"+e+"/"+t+"/"+a+"/")}}}]);