(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["performanceProjectScript"],{"348b":function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return o})),r.d(t,"m",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"d",(function(){return s})),r.d(t,"l",(function(){return p})),r.d(t,"c",(function(){return l})),r.d(t,"h",(function(){return u})),r.d(t,"f",(function(){return f})),r.d(t,"k",(function(){return m})),r.d(t,"g",(function(){return d})),r.d(t,"i",(function(){return _})),r.d(t,"j",(function(){return h}));var a=r("82f8"),c=function(e){return Object(a["e"])("api/backend/performance_test/performance_script/",e)},o=function(e){return Object(a["c"])("api/backend/performance_test/performance_script/"+e+"/")},n=function(e,t){return Object(a["d"])("api/backend/performance_test/performance_script/"+e+"/",t)},i=function(e){return Object(a["a"])("api/backend/performance_test/performance_script/"+e+"/")},s=function(e,t,r){return Object(a["c"])("api/backend/performance_test/performance_project_script/"+e+"/"+t+"/"+r+"/")},p=function(e,t,r){return Object(a["d"])("api/backend/performance_test/performance_project_script/"+e+"/"+t+"/",r)},l=function(e){return Object(a["c"])("api/backend/performance_test/performance_project_script/script_suspended/"+e+"/")},u=function(e){return Object(a["c"])("api/backend/performance_test/perform_performance_script/"+e+"/")},f=function(e){return Object(a["c"])("api/backend/performance_test/new_perform_performance_script/"+e+"/")},m=function(e){return Object(a["c"])("api/backend/performance_test/performance_script_report/"+e+"/")},d=function(e){return Object(a["d"])("api/backend/performance_test/performance_script_report/",e)},_=function(e,t){return Object(a["a"])("api/backend/performance_test/performance_script_report/"+e+"/"+t)},h=function(e){return Object(a["c"])("api/backend/performance_test/performance_script_report_page/"+e+"/")}},8026:function(e,t,r){},8744:function(e,t,r){"use strict";r("8026")},ade3:function(e,t,r){"use strict";function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return a}))},c6e6:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.showPerformanceScript?r("performance-script",{attrs:{type:e.opsType,performanceProjectId:e.currentPerformanceProjectId}}):r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 性能测试项目 ")]),r("el-breadcrumb-item",[e._v("性能测试项目")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"id",label:"id",sortable:"",width:"180"}}),r("el-table-column",{attrs:{prop:"performance_project_name",label:"性能测试项目名称",sortable:"",width:"180"}}),r("el-table-column",{attrs:{prop:"describe",label:"性能项目描述",width:"180"}}),r("el-table-column",{attrs:{prop:"updata_time",label:"更新时间",width:"180"}}),r("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"180"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.enterPerformanceProjectScript(t.row)}}},[e._v("进入")])]}}])})],1)],1)],1)},c=[],o=r("ef00"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.showPerformanceScriptResult?r("performance-script-result",{attrs:{performanceScriptId:e.currentPerformanceScriptId,performanceScriptData:e.currentPerformanceScriptData},on:{performanceScriptList:e.performanceScriptList}}):e.showAddOrEditPerformanceScript?r("add-or-edit-performance-project-script",{attrs:{type:e.opsType,performanceScriptId:e.currentPerformanceScriptId,performanceScriptData:e.currentPerformanceScriptData,performanceScriptProjectId:e.projectId},on:{savePerformanceScript:e.savePerformanceScript,cancelPerformanceScript:e.cancelPerformanceScript}}):r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 性能测试项目 ")]),r("el-breadcrumb-item",[e._v("性能测试项目")]),r("el-breadcrumb-item",[e._v("性能测试脚本")])],1)],1),r("el-row",[r("el-button",{on:{click:e.returnProjectList}},[e._v("返回")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addPerformanceScriptPopup}},[e._v("创建性能脚本")]),r("el-button",{on:{click:e.getSinglePerformanceProjectScript}},[e._v("刷新")])],1),r("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"20px"},attrs:{inline:!0,model:e.queryForm}},[r("el-form-item",{attrs:{label:"脚本名称"}},[r("el-input",{attrs:{placeholder:"脚本名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.querySubmit(t)}},model:{value:e.queryForm.performance_script_name,callback:function(t){e.$set(e.queryForm,"performance_script_name",t)},expression:"queryForm.performance_script_name"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.querySubmit}},[e._v("查询")])],1)],1),r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"id",label:"id",sortable:"",width:"180"}}),r("el-table-column",{attrs:{prop:"performance_project_name",label:"性能项目名称",sortable:"",width:"180"}}),r("el-table-column",{attrs:{prop:"performance_script_name",label:"脚本名称",sortable:"",width:"180"}}),r("el-table-column",{attrs:{prop:"performance_status",label:"状态",sortable:"",width:"180"}}),r("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"180"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.editPerformanceScriptPopup(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"primary",disabled:e.isDisabled},on:{click:function(r){return e.NewPerformPerformanceScriptPopup(t.row)}}},[e._v("执行")]),r("el-button",{attrs:{size:"mini",type:"warning",disabled:e.isDisabled},on:{click:function(r){return e.performanceProjectScriptSuspendedPopup(t.row)}}},[e._v("暂停")]),r("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(r){return e.performanceScriptReportPopup(t.row)}}},[e._v("查看测试报告")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.deletePerformanceScriptPopup(t.row)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40,50,60],"page-size":e.size_page,layout:"total, sizes, prev, pager, next, jumper",total:e.total_script},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},i=[],s=r("348b"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.showNewPerformanceScriptResult?r("new-performance-script-result",{attrs:{performanceScriptReportData:e.currentPerformanceScriptReportData,performanceScriptId:e.performanceScriptId},on:{performanceReportList:e.performanceReportList}}):r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 性能测试项目 ")]),r("el-breadcrumb-item",[e._v("性能测试项目")]),r("el-breadcrumb-item",[e._v("性能测试脚本")]),r("el-breadcrumb-item",[e._v("性能测试报告")])],1)],1),r("el-row",[r("el-button",{on:{click:e.returnScriptList}},[e._v("返回")])],1),r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"performance_report_id",label:"id",width:"180"}}),r("el-table-column",{attrs:{prop:"performance_script_report_name",label:"性能测试报告名称",sortable:"",width:"180"}}),r("el-table-column",{attrs:{prop:"create_time",sortable:"",label:"创建时间",width:"180"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.NewCheckReport(t.row)}}},[e._v("查看报告")]),r("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.report_address,expression:"report_address",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.NewPageCheckReport(t.row)}}},[e._v("分享报告")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.deleteReport(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)],1)},l=[],u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 性能测试项目 ")]),r("el-breadcrumb-item",[e._v("性能测试项目")]),r("el-breadcrumb-item",[e._v("性能测试脚本")]),r("el-breadcrumb-item",[e._v("性能测试报告")])],1)],1),r("el-row",[r("el-button",{on:{click:e.performanceReportList}},[e._v("返回")])],1),r("el-row",[r("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",plain:""},on:{click:e.reportList}},[e._v("报告对比")])],1),r("el-dialog",{attrs:{title:"报告列表",visible:e.report_dialog},on:{"update:visible":function(t){e.report_dialog=t}}},[r("el-table",{attrs:{data:e.report_data},on:{"selection-change":e.check_data_report}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{property:"performance_report_id",label:"id",width:"150"}}),r("el-table-column",{attrs:{property:"performance_script_report_name",label:"测试报告名称",width:"200"}}),r("el-table-column",{attrs:{property:"pressure_test_content",label:"压测内容",width:"200"}})],1),r("el-button",{on:{click:e.reportCompared}},[e._v("确定")]),r("el-button",{on:{click:e.cancelReportList}},[e._v("取消")])],1),e._l(e.chartList,(function(e,t){return r("div",{key:t,staticStyle:{top:"20px","margin-top":"20px"}},[r("div",{staticStyle:{width:"90.7%",height:"70vh"},attrs:{id:"chart"+t}})])})),e._l(e.tableData,(function(t){return r("div",[r("el-table",{staticStyle:{width:"90.7%","margin-top":"20px"},attrs:{data:t.report_list,"header-cell-style":{textAlign:"center"}}},[r("el-table-column",{attrs:{label:"测试报告内容",prop:"test_report_name",width:"100"}},[r("el-table-column",{attrs:{prop:"test_report_name",label:"测试报告名称",width:"180"}}),r("el-table-column",{attrs:{prop:"pressure_test_content",label:"压测内容",width:"120"}})],1),r("el-table-column",{attrs:{label:"Requests",width:"150"}},[r("el-table-column",{attrs:{prop:"requests_label",label:"label",width:"120"}})],1),r("el-table-column",{attrs:{label:"Executions(执行)",width:"150"}},[r("el-table-column",{attrs:{prop:"samples",label:"请求数量",width:"80"}}),r("el-table-column",{attrs:{prop:"api_error",label:"失败率",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.api_error>"0%"?r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.api_error))]):r("span",{staticStyle:{color:"#37B328"}},[e._v(e._s(t.row.api_error))])]}}],null,!0)})],1),r("el-table-column",{attrs:{label:"响应时间(ms)",width:"150"}},[r("el-table-column",{attrs:{prop:"api_average",label:"平均响应",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.api_average>=8e3?r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.api_average))]):r("span",{staticStyle:{color:"#37B328"}},[e._v(e._s(t.row.api_average))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"api_min",label:"最小响应",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.api_min>=8e3?r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.api_min))]):r("span",{staticStyle:{color:"#37B328"}},[e._v(e._s(t.row.api_min))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"api_max",label:"最大响应",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.api_max>=8e3?r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.api_max))]):r("span",{staticStyle:{color:"#37B328"}},[e._v(e._s(t.row.api_max))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"api_median",label:"中位数",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.api_median>=8e3?r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.api_median))]):r("span",{staticStyle:{color:"#37B328"}},[e._v(e._s(t.row.api_median))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"api_90",label:"90%",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.api_90>=8e3?r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.api_90))]):r("span",{staticStyle:{color:"#37B328"}},[e._v(e._s(t.row.api_90))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"api_95",label:"95%",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.api_95>=8e3?r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.api_95))]):r("span",{staticStyle:{color:"#37B328"}},[e._v(e._s(t.row.api_95))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"api_99",label:"99%",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.api_99>=8e3?r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.api_99))]):r("span",{staticStyle:{color:"#37B328"}},[e._v(e._s(t.row.api_99))])]}}],null,!0)})],1),r("el-table-column",{attrs:{label:"Throughput",width:"150"}},[r("el-table-column",{attrs:{prop:"api_transactions",label:"吞吐量(s)",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.api_transactions<=10?r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.api_transactions))]):r("span",{staticStyle:{color:"#37B328"}},[e._v(e._s(t.row.api_transactions))])]}}],null,!0)})],1),r("el-table-column",{attrs:{label:"Network(KB/sec)",width:"150"}},[r("el-table-column",{attrs:{prop:"api_received",label:"每秒接收数据量",width:"120"}})],1)],1)],1)})),e._l(e.errorTableData,(function(t){return r("div",[r("el-table",{staticStyle:{width:"90.7%","margin-top":"20px"},attrs:{data:t.jtl_error,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[r("el-table-column",{attrs:{prop:"jtl_error",label:"是否存在异常"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1!==t.row.jtl_error.indexOf("暂无异常")?r("span",{staticStyle:{color:"#37B328"}},[e._v(e._s(t.row.jtl_error))]):r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.jtl_error))])]}}],null,!0)})],1)],1)}))],2)},f=[],m=(r("ac6a"),r("313e"),{name:"newPerformanceReport.vue",props:["performanceScriptReportData","performanceScriptId"],data:function(){return{chartList:[{}],chartList2:[{}],report_dialog:!1,report_data:[],check_data:[],errorTableData:[{jtl_error:[{jtl_error:""}]}],tableData:[{report_list:[{test_report_name:"",requests_label:"",samples:"",api_error:"",api_min:"",api_max:"",api_median:"",api_90:"",api_95:"",api_99:"",api_transactions:"",api_received:"",api_average:"",pressure_test_content:""}]}],performanceReportScriptId:"",performance_report_id_data:{}}},mounted:function(){this.getPerformanceReportFun()},methods:{initChart:function(){var e=this;this.chartList.forEach((function(t,r){var a=e.$echarts.init(document.getElementById("chart".concat(r)),"dark");a.setOption(e.chartList[r])}))},check_data_report:function(e){this.check_data=e},reportCompared:function(){var e=this;this.report_dialog=!1;var t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(s["g"])(this.check_data).then((function(r){if(!0===r.data.success){e.tableData=r.data.data,e.chartList2=r.data.data,e.errorTableData=r.data.data;for(var a=[],c=0;c<e.chartList2.length;c++)a.push(e.chartList2[c].response_time_varies_over_time);e.chartList=a,e.chartList.length>0&&e.$nextTick((function(){e.initChart()})),t.close()}else e.$message.error("获取接口失败"),t.close()}))},cancelReportList:function(){this.report_dialog=!1},reportList:function(){var e=this;this.report_dialog=!0,Object(s["k"])(this.performanceReportScriptId).then((function(t){!0===t.data.success?e.report_data=t.data.data:e.$message.error("获取接口失败")}))},performanceReportList:function(){this.$parent.performanceReportList()},getPerformanceReportFun:function(){var e=this,t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(s["g"])(this.performanceScriptReportData).then((function(r){if(!0===r.data.success){console.log(r.data.data),e.tableData=r.data.data,e.errorTableData=r.data.data,e.chartList2=r.data.data;for(var a=[],c=0;c<e.chartList2.length;c++)a.push(e.chartList2[c].response_time_varies_over_time);e.chartList=a,e.chartList.length>0&&e.$nextTick((function(){e.initChart()})),t.close()}else e.$message.error(r.data.error.message),t.close()}))}},created:function(){this.performance_report_id_data=this.performanceScriptReportData,this.performanceReportScriptId=this.performanceScriptId}}),d=m,_=r("2877"),h=Object(_["a"])(d,u,f,!1,null,"33b71f26",null),b=h.exports,S=r("82f8"),g={name:"performanceReport",props:["performanceScriptData"],data:function(){return{tableData:[],report_address:"",report_host:"",performanceScriptId:"",report_id:"",performance_script_report_name:"",performance_script_report_url:"",performance_report_id:"",create_time:"",currentPerformanceScriptReportURL:{},showNewPerformanceScriptResult:!1,currentPerformanceScriptReportData:[{}]}},mounted:function(){this.getPerformanceScriptReportFun()},methods:{onCopy:function(e){this.$message.success("复制成功")},onError:function(e){this.$message.error("复制失败，请稍后重试")},performanceReportList:function(){this.showNewPerformanceScriptResult=!1},NewPageCheckReport:function(e){"http://localhost:8000/"===S["b"]?this.report_host="http://localhost:8080/":this.report_host=S["b"],this.report_address=this.report_host+"performanceReportPage#/performanceReportPage?performanceResultId="+e.performance_report_id+"&performanceScriptId="+this.performanceScriptId},getPerformanceScriptReportFun:function(){var e=this;Object(s["k"])(this.performanceScriptId).then((function(t){!0===t.data.success?e.tableData=t.data.data:e.$message.error("获取接口失败")}))},NewCheckReport:function(e){this.showNewPerformanceScriptResult=!0,this.currentPerformanceScriptReportData[0].performance_report_id=e.performance_report_id},checkReport:function(e){this.performance_script_report_name=e.performance_script_report_name,this.performance_report_id=e.performance_report_id,this.create_time=e.create_time,this.performance_script_report_url=e.file,this.currentPerformanceScriptReportURL=e.file,window.open(this.currentPerformanceScriptReportURL)},deleteReport:function(e){var t=this;this.performance_script_report_name=e.performance_script_report_name,this.performance_report_id=e.performance_report_id,Object(s["i"])(this.performance_script_report_name,this.performance_report_id).then((function(e){!0===e.data.success?(t.$message.success("删除成功"),t.getPerformanceScriptReportFun()):t.$message.error("获取接口失败")})),console.log(this.performance_script_report_name)},returnScriptList:function(){this.$parent.performanceScriptList()}},components:{"new-performance-script-result":b},created:function(){this.performanceScriptId=this.performanceScriptData.id}},v=g,w=Object(_["a"])(v,p,l,!1,null,"259227e3",null),P=w.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 性能测试项目 ")]),r("el-breadcrumb-item",[e._v("性能测试项目")]),r("el-breadcrumb-item",[e._v("性能测试脚本")])],1)],1),r("el-form",{ref:"PerformanceScriptFormRef",attrs:{model:e.performanceScriptData,rules:e.rules}},[r("el-form-item",{staticStyle:{"padding-right":"0px"},attrs:{label:"性能脚本名称",prop:"performance_script_name"}},[r("el-input",{staticStyle:{width:"232px","margin-left":"26px"},attrs:{autocomplete:"off"},model:{value:e.performanceScriptData.performance_script_name,callback:function(t){e.$set(e.performanceScriptData,"performance_script_name",t)},expression:"performanceScriptData.performance_script_name"}})],1),r("el-form-item",{staticStyle:{"padding-right":"0px"},attrs:{label:"线程数",prop:"performance_threads"}},[r("el-input",{staticStyle:{width:"232px","margin-left":"69px"},attrs:{autocomplete:"off"},model:{value:e.performanceScriptData.performance_threads,callback:function(t){e.$set(e.performanceScriptData,"performance_threads",t)},expression:"performanceScriptData.performance_threads"}})],1),r("el-form-item",{staticStyle:{"padding-right":"0px"},attrs:{label:"Ramp-Up时间(秒)",prop:"performance_ramp_up_time_seconds"}},[r("el-input",{staticStyle:{width:"232px"},model:{value:e.performanceScriptData.performance_ramp_up_time_seconds,callback:function(t){e.$set(e.performanceScriptData,"performance_ramp_up_time_seconds",t)},expression:"performanceScriptData.performance_ramp_up_time_seconds"}})],1),r("el-form-item",{staticStyle:{"padding-right":"0px"},attrs:{label:"参数化",prop:"data_set"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"true","inactive-value":"false"},on:{change:function(t){return e.data_set_switch(t,e.data_set)}},model:{value:e.data_set,callback:function(t){e.data_set=t},expression:"data_set"}})],1),r("el-form-item",{staticStyle:{"padding-right":"0px"},attrs:{label:"参数化文件"}},[r("el-upload",{ref:"my-upload",staticClass:"upload_jmx",attrs:{disabled:"false"===e.data_set,action:e.UploadDataUrl(),"list-type":"text","on-preview":e.handleDataPreview,"on-remove":e.handleDataRemove,"before-remove":e.beforeDataRemove,multiple:!1,"on-exceed":e.handleDataExceed,"file-list":e.fileDataList,"on-change":e.handleDataChange,accept:".txt,.csv","show-file-list":!0,"on-success":e.onDataSuccess,"on-error":e.onDataError}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传 txt/csv 文件")])],1)],1),r("el-form-item",{staticStyle:{"padding-right":"0px"},attrs:{label:"循环次数-永远",prop:"loop_count_forever"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"true","inactive-value":"false"},on:{change:function(t){return e.loop_count_forever_switch(t,e.loop_count_forever)}},model:{value:e.loop_count_forever,callback:function(t){e.loop_count_forever=t},expression:"loop_count_forever"}})],1),r("el-form-item",{staticStyle:{"padding-right":"0px"},attrs:{label:"循环次数",prop:"performance_loop_count"}},[r("el-input",{staticStyle:{width:"232px",left:"54px"},attrs:{disabled:"true"===e.loop_count_forever},model:{value:e.performanceScriptData.performance_loop_count,callback:function(t){e.$set(e.performanceScriptData,"performance_loop_count",t)},expression:"performanceScriptData.performance_loop_count"}})],1),r("el-form-item",{staticStyle:{"padding-right":"0px"},attrs:{label:"是否开启调度器",prop:"performance_scheduler"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"true","inactive-value":"false"},on:{change:function(t){return e.scheduler_switch(t,e.performance_scheduler)}},model:{value:e.performance_scheduler,callback:function(t){e.performance_scheduler=t},expression:"performance_scheduler"}})],1),r("el-form-item",{staticStyle:{"padding-right":"0px"},attrs:{label:"持续时间",prop:"performance_duration"}},[r("el-input",{staticStyle:{width:"232px",left:"54px"},attrs:{disabled:"false"===e.performance_scheduler},on:{input:function(t){return e.change(t)}},model:{value:e.performanceScriptData.performance_duration,callback:function(t){e.$set(e.performanceScriptData,"performance_duration",t)},expression:"performanceScriptData.performance_duration"}})],1)],1),r("el-upload",{ref:"my-upload",staticClass:"upload_jmx",attrs:{display:"none",action:e.UploadUrl(),"list-type":"text","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,multiple:!1,"on-exceed":e.handleExceed,"file-list":e.fileList,"on-change":e.handleChange,accept:".jmx","show-file-list":!0,"on-success":e.onSuccess,"on-error":e.onError}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jmx文件，且不超过500kb")])],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.downloadPerformanceScript}},[e._v("下 载")]),r("el-button",{on:{click:e.scriptCancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.savePerformanceScript}},[e._v("确 定")])],1)],1)},j=[],D=(r("8e6e"),r("456d"),r("ade3"));r("7f7f");function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Object(D["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O={name:"addOrEditPerformanceProjectScript",props:["type","performanceScriptProjectId","performanceScriptId","scriptData"],data:function(){return{fileList:[{}],fileDataList:[{}],performance_scheduler:"",data_set:"",loop_count_forever:"",performanceScriptData:{performance_script_name:"",performance_project_id:"",performance_script:"",performance_data_script:"",performance_threads:"",performance_ramp_up_time_seconds:"",performance_loop_count:"",performance_duration:"",performance_script_id:""},rules:{performance_script_name:[{required:!0,message:"请输入脚本名称",trigger:"blur"}],performance_threads:[{required:!0,message:"请输入线程数",trigger:"blur"}],performance_ramp_up_time_seconds:[{required:!0,message:"请输入时间",trigger:"blur"}]}}},mounted:function(){},methods:{scheduler_switch:function(e){console.log(e)},data_set_switch:function(e){console.log(e)},change:function(e){this.$forceUpdate()},loop_count_forever_switch:function(e){console.log(e)},onSuccess:function(e){this.$alert(e.data.result,"提示",{confirmButtonText:"确定",callback:function(e){console.log("上传成功")}}),this.performanceScriptData.performance_script=e.data.file},onDataSuccess:function(e){this.$alert(e.data.result,"提示",{confirmButtonText:"确定",callback:function(e){console.log("上传成功")}}),this.performanceScriptData.performance_data_script=e.data.file},UploadUrl:function(){return S["b"]+"api/backend/performance_test/performance_script_upload/"},UploadDataUrl:function(){return S["b"]+"api/backend/performance_test/performance_script_data_set_upload/"},handlePreview:function(e){console.log(e)},handleDataPreview:function(e){console.log(e)},handleRemove:function(e,t){console.log(e,t)},handleDataRemove:function(e,t){console.log(e,t)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleDataExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},beforeDataRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},handleChange:function(e,t){t.length>0&&(this.fileList=[t[t.length-1]])},handleDataChange:function(e,t){t.length>0&&(this.fileDataList=[t[t.length-1]])},onError:function(e){console.log("失败的回调"+JSON.stringify(e)),this.$alert("创建失败","提示",{confirmButtonText:"确定",callback:function(e){console.log("上传失败")}})},onDataError:function(e){console.log("失败的回调"+JSON.stringify(e)),this.$alert("创建失败","提示",{confirmButtonText:"确定",callback:function(e){console.log("上传失败")}})},downloadPerformanceScript:function(){console.log(this.fileList[0].url),window.location.href=this.fileList[0].url},scriptCancel:function(){this.performance_scheduler="",this.$parent.cancelPerformanceScript(),this.$refs["my-upload"].clearFiles()},savePerformanceScript:function(){"add"===this.type?this.addPerformanceScript():this.editPerformanceScript()},addPerformanceScript:function(){var e=this,t=JSON.parse(JSON.stringify(this.performanceScriptData));t.performance_scheduler=this.performance_scheduler,t.loop_count_forever=this.loop_count_forever,t.performance_data_script=this.performanceScriptData.performance_data_script,t.data_set=this.data_set,this.$refs.PerformanceScriptFormRef.validate((function(r){if(!r)return!1;Object(s["a"])(t).then((function(t){!0===t.data.success?(e.$message.success("创建性能脚本成功"),e.$parent.savePerformanceScript()):e.$message.error("创建性能脚本失败")}))}))},editPerformanceScript:function(){var e=this,t=JSON.parse(JSON.stringify(this.performanceScriptData));t.performance_scheduler=this.performance_scheduler,t.loop_count_forever=this.loop_count_forever,t.performance_script=this.performanceScriptData.performance_script,t.performance_data_script=this.performanceScriptData.performance_data_script,t.data_set=this.data_set,this.$refs.PerformanceScriptFormRef.validate((function(r){if(!r)return!1;Object(s["m"])(e.performanceScriptData.performance_script_id,t).then((function(t){console.log(t),!0===t.data.success?(e.$message.success("编辑性能脚本成功"),e.$parent.savePerformanceScript()):e.$message.error("编辑性能脚本失败")}))}))},editPerformanceScriptPopup:function(){var e=this;Object(s["e"])(this.performanceScriptData.performance_script_id).then((function(t){if(!0===t.data.success){var r=t.data.data;e.performanceScriptData=x({},r),e.loop_count_forever=t.data.data.loop_count_forever,e.performance_scheduler=t.data.data.performance_scheduler,e.fileList=t.data.data.performance_script_url,e.performanceScriptData.performance_script=r.performance_script_url[0].url,e.fileDataList=t.data.data.performance_script_data_url,e.performanceScriptData.performance_data_script=r.performance_script_data_url[0].url,e.data_set=r.data_set}else e.$message.error("获取接口失败")}))}},components:{},created:function(){"edit"===this.type&&(this.performanceScriptData.performance_project_id=this.performanceScriptProjectId,this.performanceScriptData.performance_script_id=this.performanceScriptId,this.editPerformanceScriptPopup()),"add"===this.type&&(this.performanceScriptData.performance_project_id=this.performanceScriptProjectId)}},R=O,$=(r("f778"),Object(_["a"])(R,y,j,!1,null,"2b6362e1",null)),L=$.exports,I={name:"performanceScript",props:["type","performanceProjectId"],data:function(){return{queryForm:{performance_script_name:""},duration:!0,isDisabled:!1,tableData:[],currentPage:1,size_page:10,total_script:0,fileList:[{}],performance_scheduler:"",loop_count_forever:"",showAddOrEditPerformanceScript:!1,showPerformanceScriptResult:!1,performanceScriptId:"",currentPerformanceScriptId:0,currentPerformanceScriptProjectId:"",currentPerformanceScriptData:{},projectId:"",rules:{performance_script_name:[{required:!0,message:"请输入脚本名称",trigger:"blur"}],performance_threads:[{required:!0,message:"请输入线程数",trigger:"blur"}],performance_ramp_up_time_seconds:[{required:!0,message:"请输入时间",trigger:"blur"}]}}},methods:{savePerformanceScript:function(){this.showAddOrEditPerformanceScript=!1,this.getSinglePerformanceProjectScript()},cancelPerformanceScript:function(){this.showAddOrEditPerformanceScript=!1,this.getSinglePerformanceProjectScript()},formatter:function(e,t){return e.address},handleEdit:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},handleSizeChange:function(e){this.size_page=e,this.querySubmit()},handleCurrentChange:function(e){this.currentPage=e,this.querySubmit()},querySubmit:function(){var e=this,t=JSON.parse(JSON.stringify(this.queryForm));t.performance_project_id=this.projectId,Object(s["l"])(this.size_page,this.currentPage,t).then((function(t){!0===t.data.success?(e.tableData=t.data.data.data,e.total_script=t.data.data.total_script):e.$message.error("获取接口失败")}))},addPerformanceScriptPopup:function(){this.opsType="add",this.showAddOrEditPerformanceScript=!0},editPerformanceScriptPopup:function(e){this.opsType="edit",this.currentPerformanceScriptId=e.id,this.currentPerformanceScriptData=e,this.showAddOrEditPerformanceScript=!0},deletePerformanceScriptPopup:function(e){var t=this;this.performanceScriptId=e.id,Object(s["b"])(this.performanceScriptId).then((function(e){console.log(e),!0===e.data.success?(t.querySubmit(),t.$message.success("删除性能脚本成功")):t.$message.error("删除性能脚本失败")}))},performanceProjectScriptSuspendedPopup:function(e){var t=this;Object(s["c"])(e.id).then((function(e){!0===e.data.success?(t.querySubmit(),t.$message.success(e.data.data)):!1===e.data.success?t.$message.error(e.data.error.code.message):t.$message.error("获取接口失败")}))},NewPerformPerformanceScriptPopup:function(e){var t=this;this.isDisabled=!0,setTimeout((function(){t.isDisabled=!1}),1e3),console.log("开始执行了"),Object(s["f"])(e.id).then((function(e){t.querySubmit(),!0===e.data.success?(t.querySubmit(),t.$message.success(e.data.data)):!1===e.data.success?t.$message.error(e.data.error.code.message):t.$message.error("获取接口失败")}))},performPerformanceScriptPopup:function(e){var t=this;this.isDisabled=!0,setTimeout((function(){t.isDisabled=!1}),1e3),console.log("开始执行了"),Object(s["h"])(e.id).then((function(e){t.querySubmit(),!0===e.data.success?(t.querySubmit(),t.$message.success(e.data.data)):!1===e.data.success?t.$message.error(e.data.error.code.message):t.$message.error("获取接口失败")}))},performanceScriptReportPopup:function(e){this.currentPerformanceScriptId=e.id,this.currentPerformanceScriptData=e,this.showPerformanceScriptResult=!0},performanceScriptList:function(){this.showPerformanceScriptResult=!1},getSinglePerformanceProjectScript:function(){var e=this;Object(s["d"])(this.projectId,this.size_page,this.currentPage).then((function(t){!0===t.data.success?(e.tableData=t.data.data.data,e.total_script=t.data.data.total_script):e.$message.error("获取接口失败")}))},returnProjectList:function(){this.$parent.projectList()}},components:{"performance-script-result":P,"add-or-edit-performance-project-script":L},created:function(){"enter"===this.type&&(this.projectId=this.performanceProjectId,this.querySubmit())}},C=I,E=(r("8744"),Object(_["a"])(C,n,i,!1,null,"2109590e",null)),z=E.exports,q={name:"performanceProjectScript",data:function(){return{tableData:[],page:{page:1,total:0,size:10},performanceProjectId:"",opsType:"enter",showPerformanceScript:!1,currentPerformanceProjectId:0}},methods:{handleEdit:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},handleSizeChange:function(e){this.page.size=e,this.getApiProjectFun()},handleCurrentChange:function(e){this.page.page=e,this.getApiProjectFun()},getPerformanceProjectFun:function(){var e=this,t={page:this.page.page,size:this.page.size};Object(o["c"])(t).then((function(t){console.log(t),!0===t.data.success?(e.tableData=t.data.data,e.page.total=t.data.data.total,e.page.page=t.data.data.page,e.page.size=t.data.data.size):e.$message.error("获取接口失败")}))},enterPerformanceProjectScript:function(e){this.performanceProjectId=e.id,console.log(this.performanceProjectId),this.opsType="enter",this.currentPerformanceProjectId=e.id,this.showPerformanceScript=!0},projectList:function(){this.showPerformanceScript=!1}},components:{"performance-script":z},created:function(){this.getPerformanceProjectFun()}},N=q,F=Object(_["a"])(N,a,c,!1,null,"d5b5743c",null);t["default"]=F.exports},e100:function(e,t,r){},ef00:function(e,t,r){"use strict";r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return i})),r.d(t,"b",(function(){return s}));var a=r("82f8"),c=function(){return Object(a["c"])("api/backend/performance_test/performance_project_list/")},o=function(e){return Object(a["e"])("api/backend/performance_test/performance_project/",e)},n=function(e){return Object(a["c"])("api/backend/performance_test/performance_project/"+e+"/")},i=function(e,t){return Object(a["d"])("api/backend/performance_test/performance_project/"+e+"/",t)},s=function(e){return Object(a["a"])("api/backend/performance_test/performance_project/"+e+"/")}},f778:function(e,t,r){"use strict";r("e100")}}]);