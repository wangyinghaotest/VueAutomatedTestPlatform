(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["apiDatabase"],{"942d":function(a,t,e){"use strict";e.d(t,"c",(function(){return i})),e.d(t,"a",(function(){return o})),e.d(t,"d",(function(){return d})),e.d(t,"f",(function(){return l})),e.d(t,"b",(function(){return r})),e.d(t,"e",(function(){return b}));var s=e("82f8"),i=function(){return Object(s["c"])("api/backend/api_database/list/")},o=function(a){return Object(s["e"])("api/backend/api_database/",a)},d=function(a){return Object(s["c"])("api/backend/api_database/"+a+"/")},l=function(a,t){return Object(s["d"])("api/backend/api_database/"+a+"/",t)},r=function(a){return Object(s["a"])("api/backend/api_database/"+a+"/")},b=function(a){return Object(s["d"])("api/backend/api_debug_database/",a)}},"9ba4":function(a,t,e){"use strict";e.r(t);var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("div",{staticClass:"crumbs"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",[e("i",{staticClass:"el-icon-lx-calendar"}),a._v(" API数据库 ")]),e("el-breadcrumb-item",[a._v("API数据库")])],1)],1),e("el-row",[e("el-button",{attrs:{type:"primary"},on:{click:a.addDatabasePopup}},[a._v("创建API数据库")])],1),e("el-dialog",{attrs:{title:"创建API数据库",visible:a.addApiDatabasedialogFormVisible},on:{"update:visible":function(t){a.addApiDatabasedialogFormVisible=t}}},[e("el-form",{ref:"addDatabaseFormRef",attrs:{model:a.addDatabaseData,rules:a.rules}},[e("el-form-item",{attrs:{label:"数据库名称","label-width":"100px",prop:"api_database_title"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:a.addDatabaseData.api_database_title,callback:function(t){a.$set(a.addDatabaseData,"api_database_title",t)},expression:"addDatabaseData.api_database_title"}})],1),e("el-form-item",{attrs:{label:"Host","label-width":"100px",prop:"api_host"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:a.addDatabaseData.api_host,callback:function(t){a.$set(a.addDatabaseData,"api_host",t)},expression:"addDatabaseData.api_host"}})],1),e("el-form-item",{attrs:{label:"端口号","label-width":"100px",prop:"api_port"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:a.addDatabaseData.api_port,callback:function(t){a.$set(a.addDatabaseData,"api_port",t)},expression:"addDatabaseData.api_port"}})],1),e("el-form-item",{attrs:{label:"用户名","label-width":"100px",prop:"user"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:a.addDatabaseData.user,callback:function(t){a.$set(a.addDatabaseData,"user",t)},expression:"addDatabaseData.user"}})],1),e("el-form-item",{attrs:{label:"密码","label-width":"100px",prop:"password"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:a.addDatabaseData.password,callback:function(t){a.$set(a.addDatabaseData,"password",t)},expression:"addDatabaseData.password"}})],1),e("el-form-item",{attrs:{label:"数据库表名","label-width":"100px",prop:"database"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:a.addDatabaseData.database,callback:function(t){a.$set(a.addDatabaseData,"database",t)},expression:"addDatabaseData.database"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:a.debugAddDatabase}},[a._v("调试")]),e("el-button",{on:{click:function(t){a.addApiDatabasedialogFormVisible=!1}}},[a._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:a.addApiDatabase}},[a._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"编辑环境",visible:a.editApiDatabasedialogFormVisible},on:{"update:visible":function(t){a.editApiDatabasedialogFormVisible=t}}},[e("el-form",{ref:"editDatabaseFormRef",attrs:{model:a.editDatabaseData,rules:a.rules}},[e("el-form-item",{attrs:{label:"数据库名称","label-width":"100px",prop:"api_database_title"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:a.editDatabaseData.api_database_title,callback:function(t){a.$set(a.editDatabaseData,"api_database_title",t)},expression:"editDatabaseData.api_database_title"}})],1),e("el-form-item",{attrs:{label:"Host","label-width":"100px",prop:"api_host"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:a.editDatabaseData.api_host,callback:function(t){a.$set(a.editDatabaseData,"api_host",t)},expression:"editDatabaseData.api_host"}})],1),e("el-form-item",{attrs:{label:"端口号","label-width":"100px",prop:"api_port"}},[e("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:a.editDatabaseData.api_port,callback:function(t){a.$set(a.editDatabaseData,"api_port",t)},expression:"editDatabaseData.api_port"}})],1),e("el-form-item",{attrs:{label:"用户名","label-width":"100px",prop:"user"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:a.editDatabaseData.user,callback:function(t){a.$set(a.editDatabaseData,"user",t)},expression:"editDatabaseData.user"}})],1),e("el-form-item",{attrs:{label:"密码","label-width":"100px",prop:"password"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:a.editDatabaseData.password,callback:function(t){a.$set(a.editDatabaseData,"password",t)},expression:"editDatabaseData.password"}})],1),e("el-form-item",{attrs:{label:"数据库表名","label-width":"100px",prop:"database"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:a.editDatabaseData.database,callback:function(t){a.$set(a.editDatabaseData,"database",t)},expression:"editDatabaseData.database"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:a.debugDatabase}},[a._v("调试")]),e("el-button",{on:{click:function(t){a.editApiDatabasedialogFormVisible=!1}}},[a._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:a.editDatabase}},[a._v("确 定")])],1)],1),e("div",[e("el-table",{staticStyle:{width:"100%"},attrs:{data:a.tableData}},[e("el-table-column",{attrs:{prop:"id",label:"id",sortable:"",width:"180"}}),e("el-table-column",{attrs:{prop:"api_database_title",label:"数据库",sortable:"",width:"180"}}),e("el-table-column",{attrs:{prop:"api_host",label:"Host",sortable:"",width:"180"}}),e("el-table-column",{attrs:{prop:"updata_time",label:"更新时间",width:"180"}}),e("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"180"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return a.editApiDatabasePopup(t.row)}}},[a._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return a.deleteDatabasePopup(t.row)}}},[a._v("删除")])]}}])})],1)],1)],1)},i=[],o=e("942d"),d={name:"ApiDatabase",data:function(){return{tableData:[],page:{page:1,total:0,size:10},addApiDatabasedialogFormVisible:!1,editApiDatabasedialogFormVisible:!1,addDatabaseData:{api_database_title:"",api_host:"",api_port:"",user:"",password:"",database:""},editDatabaseData:{api_database_title:"",api_host:"",api_port:"",user:"",password:"",database:"",id:0},databaseId:"",databaseData:"",rules:{api_database_title:[{required:!0,message:"请输入数据库名称",trigger:"blur"}],api_host:[{required:!0,message:"请输入Host",trigger:"blur"}],api_port:[{required:!0,message:"请输入Port",trigger:"blur"}],user:[{required:!0,message:"请输入数据库用户名",trigger:"blur"}],password:[{required:!0,message:"请输入数据库密码",trigger:"blur"}],database:[{required:!0,message:"请输入数据库表名",trigger:"blur"}]}}},methods:{formatter:function(a,t){return a.address},handleEdit:function(a,t){console.log(a,t)},handleDelete:function(a,t){console.log(a,t)},handleSizeChange:function(a){this.page.size=a,this.getDatabaseFun()},handleCurrentChange:function(a){this.page.page=a,this.getDatabaseFun()},getDatabaseFun:function(){var a=this,t={page:this.page.page,size:this.page.size};Object(o["c"])(t).then((function(t){console.log(t),!0===t.data.success?(a.tableData=t.data.data,a.page.total=t.data.data.total,a.page.page=t.data.data.page,a.page.size=t.data.data.size):a.$message.error("获取接口失败")}))},addApiDatabase:function(){var a=this,t=JSON.parse(JSON.stringify(this.addDatabaseData));this.$refs.addDatabaseFormRef.validate((function(e){if(!e)return!1;Object(o["a"])(t).then((function(t){console.log(t),!0===t.data.success?(a.getDatabaseFun(),a.addApiDatabasedialogFormVisible=!1,a.$message.success("创建数据库配置成功")):a.$message.error("创建数据库配置失败")}))}))},addDatabasePopup:function(){this.addDatabaseData={api_database_title:"",api_host:"",api_port:""},this.addApiDatabasedialogFormVisible=!0},handleNodeClick:function(a){this.currentServiceId=a.id},debugAddDatabase:function(){var a=this,t=JSON.parse(JSON.stringify(this.addDatabaseData));this.$refs.addDatabaseFormRef.validate((function(e){if(!e)return!1;Object(o["e"])(t).then((function(t){console.log(t),!0===t.data.success?a.$message.success("数据库配置调试成功"):a.$message.error("数据库配置调试失败")}))}))},debugDatabase:function(){var a=this,t=JSON.parse(JSON.stringify(this.editDatabaseData));this.$refs.editDatabaseFormRef.validate((function(e){if(!e)return!1;Object(o["e"])(t).then((function(t){console.log(t),!0===t.data.success?a.$message.success("数据库配置调试成功"):a.$message.error("数据库配置调试失败")}))}))},editDatabase:function(){var a=this,t=JSON.parse(JSON.stringify(this.editDatabaseData));this.$refs.editDatabaseFormRef.validate((function(e){if(console.log(a.databaseId),!e)return!1;Object(o["f"])(a.databaseId,t).then((function(t){console.log(t),!0===t.data.success?(a.getDatabaseFun(),a.editApiDatabasedialogFormVisible=!1,a.$message.success("编辑数据库配置成功")):a.$message.error("编辑数据库配置失败")}))}))},editApiDatabasePopup:function(a){var t=this;this.databaseId=a.id,this.databaseData=a,this.editApiDatabasedialogFormVisible=!0,console.log(this.databaseData),Object(o["d"])(this.databaseId).then((function(a){console.log(a),!0===a.data.success?(t.editDatabaseData.api_database_title=a.data.data.api_database_title,t.editDatabaseData.api_port=a.data.data.api_port,t.editDatabaseData.api_host=a.data.data.api_host,t.editDatabaseData.user=a.data.data.user,t.editDatabaseData.password=a.data.data.password,t.editDatabaseData.database=a.data.data.database):t.$message.error("获取接口失败")}))},deleteDatabasePopup:function(a){var t=this;this.databaseId=a.id,this.databaseData=a,console.log(this.databaseId),console.log(this.databaseData),Object(o["b"])(this.databaseId).then((function(a){console.log(a),!0===a.data.success?(t.getDatabaseFun(),t.$message.success("删除数据库配置成功")):t.$message.error("删除数据库配置失败")}))}},created:function(){this.getDatabaseFun()}},l=d,r=e("2877"),b=Object(r["a"])(l,s,i,!1,null,"65e9e61e",null);t["default"]=b.exports}}]);